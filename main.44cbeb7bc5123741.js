"use strict";(self.webpackChunkfirebaseLogin=self.webpackChunkfirebaseLogin||[]).push([[179],{2011:(wt,Ae,F)=>{F.d(Ae,{Dh:()=>De,GT:()=>ne,cc:()=>Te,hO:()=>Be,on:()=>z,pX:()=>se,xv:()=>pe});var d=F(2223),K=F(9260),P=F(4976);wt=F.hmd(wt);const ie=["ngOnDestroy"],se=(Le,Oe,Ge,Pe={})=>new Proxy(Le,{get:(_e,ge)=>Ge.runOutsideAngular(()=>{var Ne;if(Le[ge])return!(null===(Ne=Pe?.spy)||void 0===Ne)&&Ne.get&&Pe.spy.get(ge,Le[ge]),Le[ge];if(ie.indexOf(ge)>-1)return()=>{};const Ee=Oe.toPromise().then(je=>{const re=je&&je[ge];return"function"==typeof re?re.bind(je):re&&re.then?re.then(Ke=>Ge.run(()=>Ke)):Ge.run(()=>re)});return new Proxy(()=>{},{get:(je,re)=>Ee[re],apply:(je,re,Ke)=>Ee.then(en=>{var vr;const pi=en&&en(...Ke);return!(null===(vr=Pe?.spy)||void 0===vr)&&vr.apply&&Pe.spy.apply(ge,Ke,pi),pi})})})}),ne=(Le,Oe)=>{Oe.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(Pe=>{Object.defineProperty(Le.prototype,Pe,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,Pe))})})};class ye{constructor(Oe){return Oe}}const De=new d.OlP("angularfire2.app.options"),pe=new d.OlP("angularfire2.app.name");function z(Le,Oe,Ge){const _e="object"==typeof Ge&&Ge||{};_e.name=_e.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const Ne=K.Z.apps.filter(Ee=>Ee&&Ee.name===_e.name)[0]||Oe.runOutsideAngular(()=>K.Z.initializeApp(Le,_e));try{JSON.stringify(Le)!==JSON.stringify(Ne.options)&&j("error",`${Ne.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(Ne)}const j=(Le,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Le](...Oe)},W={provide:ye,useFactory:z,deps:[De,d.R0b,[new d.FiY,pe]]};let Be=(()=>{class Le{constructor(Ge){K.Z.registerVersion("angularfire",P.q4.full,"core"),K.Z.registerVersion("angularfire",P.q4.full,"app-compat"),K.Z.registerVersion("angular",d.q4F.full,Ge.toString())}static initializeApp(Ge,Pe){return{ngModule:Le,providers:[{provide:De,useValue:Ge},{provide:pe,useValue:Pe}]}}}return Le.\u0275fac=function(Ge){return new(Ge||Le)(d.LFG(d.Lbi))},Le.\u0275mod=d.oAB({type:Le}),Le.\u0275inj=d.cJS({providers:[W]}),Le})();function Te(Le,Oe,Ge,Pe,_e){const[,ge,Ne]=globalThis.\u0275AngularfireInstanceCache.find(Ee=>Ee[0]===Le)||[];if(ge)return function rt(Le,Oe){try{return Le.toString()===Oe.toString()}catch{return Le===Oe}}(_e,Ne)||(ue("error",`${Oe} was already initialized on the ${Ge} Firebase App with different settings.${pt?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:_e,was:Ne})),ge;{const Ee=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Le,Ee,_e]),Ee}}const pt=!!wt.hot,ue=(Le,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Le](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(wt,Ae,F)=>{F.d(Ae,{q4:()=>kr,iC:()=>qr,HU:()=>ja,vb:()=>ep,JM:()=>ys});var d=F(2223),K=F(259),P=F(5861),ie=F(6881),se=F(2090),ne=F(4859),ye=F(1877);const De=(I,b)=>b.some(M=>I instanceof M);let pe,z;const Be=new WeakMap,Te=new WeakMap,rt=new WeakMap,pt=new WeakMap,ue=new WeakMap;let Ge={get(I,b,M){if(I instanceof IDBTransaction){if("done"===b)return Te.get(I);if("objectStoreNames"===b)return I.objectStoreNames||rt.get(I);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Ne(I[b])},set:(I,b,M)=>(I[b]=M,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function ge(I){return"function"==typeof I?function _e(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(Ee(this),b),Ne(Be.get(this))}:function(...b){return Ne(I.apply(Ee(this),b))}:function(b,...M){const O=I.call(Ee(this),b,...M);return rt.set(O,b.sort?b.sort():[b]),Ne(O)}}(I):(I instanceof IDBTransaction&&function Oe(I){if(Te.has(I))return;const b=new Promise((M,O)=>{const $=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",le),I.removeEventListener("abort",le)},Z=()=>{M(),$()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),$()};I.addEventListener("complete",Z),I.addEventListener("error",le),I.addEventListener("abort",le)});Te.set(I,b)}(I),De(I,function j(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Ge):I)}function Ne(I){if(I instanceof IDBRequest)return function Le(I){const b=new Promise((M,O)=>{const $=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",le)},Z=()=>{M(Ne(I.result)),$()},le=()=>{O(I.error),$()};I.addEventListener("success",Z),I.addEventListener("error",le)});return b.then(M=>{M instanceof IDBCursor&&Be.set(M,I)}).catch(()=>{}),ue.set(b,I),b}(I);if(pt.has(I))return pt.get(I);const b=ge(I);return b!==I&&(pt.set(I,b),ue.set(b,I)),b}const Ee=I=>ue.get(I),Ke=["get","getKey","getAll","getAllKeys","count"],en=["put","add","delete","clear"],vr=new Map;function pi(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(vr.get(b))return vr.get(b);const M=b.replace(/FromIndex$/,""),O=b!==M,$=en.includes(M);if(!(M in(O?IDBIndex:IDBObjectStore).prototype)||!$&&!Ke.includes(M))return;const Z=function(){var le=(0,P.Z)(function*(ze,...$e){const dt=this.transaction(ze,$?"readwrite":"readonly");let Ct=dt.store;return O&&(Ct=Ct.index($e.shift())),(yield Promise.all([Ct[M](...$e),$&&dt.done]))[0]});return function($e){return le.apply(this,arguments)}}();return vr.set(b,Z),Z}!function Pe(I){Ge=I(Ge)}(I=>({...I,get:(b,M,O)=>pi(b,M)||I.get(b,M,O),has:(b,M)=>!!pi(b,M)||I.has(b,M)}));const Zs="@firebase/installations",ce="0.6.4",ve=1e4,Ce=`w:${ce}`,xe="FIS_v2",qe="https://firebaseinstallations.googleapis.com/v1",ke=36e5,vt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Rt(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function _n({projectId:I}){return`${qe}/projects/${I}/installations`}function Jt(I){return{token:I.token,requestStatus:2,expiresIn:Ks(I.expiresIn),creationTime:Date.now()}}function mn(I,b){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*(I,b){const O=(yield b.json()).error;return vt.create("request-failed",{requestName:I,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function Br({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Pi(I){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function Ks(I){return Number(I.replace("s","000"))}function gt(){return(gt=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:M}){const O=_n(I),$=Br(I),Z=b.getImmediate({optional:!0});if(Z){const dt=yield Z.getHeartbeatsHeader();dt&&$.append("x-firebase-client",dt)}const ze={method:"POST",headers:$,body:JSON.stringify({fid:M,authVersion:xe,appId:I.appId,sdkVersion:Ce})},$e=yield Pi(()=>fetch(O,ze));if($e.ok){const dt=yield $e.json();return{fid:dt.fid||M,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Jt(dt.authToken)}}throw yield mn("Create Installation",$e)})).apply(this,arguments)}function gi(I){return new Promise(b=>{setTimeout(b,I)})}const lr=/^[cdef][\w-]{21}$/,nn="";function Et(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function tt(I){return function Qs(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return lr.test(M)?M:nn}catch{return nn}}function mi(I){return`${I.appName}!${I.appId}`}const Pn=new Map;function Xr(I,b){const M=mi(I);As(M,b),function an(I,b){const M=function Yt(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=I=>{As(I.data.key,I.data.fid)}),ki}();M&&M.postMessage({key:I,fid:b}),function Js(){0===Pn.size&&ki&&(ki.close(),ki=null)}()}(M,b)}function As(I,b){const M=Pn.get(I);if(M)for(const O of M)O(b)}let ki=null;const Fi="firebase-installations-database",ou=1,jn="firebase-installations-store";let Ms=null;function dn(){return Ms||(Ms=function je(I,b,{blocked:M,upgrade:O,blocking:$,terminated:Z}={}){const le=indexedDB.open(I,b),ze=Ne(le);return O&&le.addEventListener("upgradeneeded",$e=>{O(Ne(le.result),$e.oldVersion,$e.newVersion,Ne(le.transaction))}),M&&le.addEventListener("blocked",()=>M()),ze.then($e=>{Z&&$e.addEventListener("close",()=>Z()),$&&$e.addEventListener("versionchange",()=>$())}).catch(()=>{}),ze}(Fi,ou,{upgrade:(I,b)=>{0===b&&I.createObjectStore(jn)}})),Ms}function $n(I,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,P.Z)(function*(I,b){const M=mi(I),$=(yield dn()).transaction(jn,"readwrite"),Z=$.objectStore(jn),le=yield Z.get(M);return yield Z.put(b,M),yield $.done,(!le||le.fid!==b.fid)&&Xr(I,b.fid),b})).apply(this,arguments)}function yi(I){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,P.Z)(function*(I){const b=mi(I),O=(yield dn()).transaction(jn,"readwrite");yield O.objectStore(jn).delete(b),yield O.done})).apply(this,arguments)}function vi(I,b){return Li.apply(this,arguments)}function Li(){return(Li=(0,P.Z)(function*(I,b){const M=mi(I),$=(yield dn()).transaction(jn,"readwrite"),Z=$.objectStore(jn),le=yield Z.get(M),ze=b(le);return void 0===ze?yield Z.delete(M):yield Z.put(ze,M),yield $.done,ze&&(!le||le.fid!==ze.fid)&&Xr(I,ze.fid),ze})).apply(this,arguments)}function B(I){return V.apply(this,arguments)}function V(){return V=(0,P.Z)(function*(I){let b;const M=yield vi(I.appConfig,O=>{const $=function q(I){return kn(I||{fid:Et(),registrationStatus:0})}(O),Z=function me(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(vt.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},O=function X(I,b){return Qe.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:O}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Ye(I)}:{installationEntry:b}}(I,$);return b=Z.registrationPromise,Z.installationEntry});return M.fid===nn?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}}),V.apply(this,arguments)}function Qe(){return Qe=(0,P.Z)(function*(I,b){try{const M=yield function Qu(I,b){return gt.apply(this,arguments)}(I,b);return $n(I.appConfig,M)}catch(M){throw Rt(M)&&409===M.customData.serverCode?yield yi(I.appConfig):yield $n(I.appConfig,{fid:b.fid,registrationStatus:0}),M}}),Qe.apply(this,arguments)}function Ye(I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(I){let b=yield Jn(I.appConfig);for(;1===b.registrationStatus;)yield gi(100),b=yield Jn(I.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:O}=yield B(I);return O||M}return b})).apply(this,arguments)}function Jn(I){return vi(I,b=>{if(!b)throw vt.create("installation-not-found");return kn(b)})}function kn(I){return function Gn(I){return 1===I.registrationStatus&&I.registrationTime+ve<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Xn(){return(Xn=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:b},M){const O=function Xi(I,{fid:b}){return`${_n(I)}/${b}/authTokens:generate`}(I,M),$=function wr(I,{refreshToken:b}){const M=Br(I);return M.append("Authorization",function Ys(I){return`${xe} ${I}`}(b)),M}(I,M),Z=b.getImmediate({optional:!0});if(Z){const dt=yield Z.getHeartbeatsHeader();dt&&$.append("x-firebase-client",dt)}const ze={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:Ce,appId:I.appId}})},$e=yield Pi(()=>fetch(O,ze));if($e.ok)return Jt(yield $e.json());throw yield mn("Generate Auth Token",$e)})).apply(this,arguments)}function ds(I){return bo.apply(this,arguments)}function bo(){return bo=(0,P.Z)(function*(I,b=!1){let M;const O=yield vi(I.appConfig,Z=>{if(!$t(Z))throw vt.create("not-registered");const le=Z.authToken;if(!b&&function rn(I){return 2===I.requestStatus&&!function cr(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+ke}(I)}(le))return Z;if(1===le.requestStatus)return M=function de(I,b){return ee.apply(this,arguments)}(I,b),Z;{if(!navigator.onLine)throw vt.create("app-offline");const ze=function er(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}(Z);return M=function ft(I,b){return bt.apply(this,arguments)}(I,ze),ze}});return M?yield M:O.authToken}),bo.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*(I,b){let M=yield Re(I.appConfig);for(;1===M.authToken.requestStatus;)yield gi(100),M=yield Re(I.appConfig);const O=M.authToken;return 0===O.requestStatus?ds(I,b):O})).apply(this,arguments)}function Re(I){return vi(I,b=>{if(!$t(b))throw vt.create("not-registered");return function tr(I){return 1===I.requestStatus&&I.requestTime+ve<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function bt(){return bt=(0,P.Z)(function*(I,b){try{const M=yield function Vt(I,b){return Xn.apply(this,arguments)}(I,b),O=Object.assign(Object.assign({},b),{authToken:M});return yield $n(I.appConfig,O),M}catch(M){if(!Rt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const O=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield $n(I.appConfig,O)}else yield yi(I.appConfig);throw M}}),bt.apply(this,arguments)}function $t(I){return void 0!==I&&2===I.registrationStatus}function _a(){return(_a=(0,P.Z)(function*(I){const b=I,{installationEntry:M,registrationPromise:O}=yield B(b);return O?O.catch(console.error):ds(b).catch(console.error),M.fid})).apply(this,arguments)}function Xl(){return Xl=(0,P.Z)(function*(I,b=!1){const M=I;return yield function kd(I){return es.apply(this,arguments)}(M),(yield ds(M,b)).token}),Xl.apply(this,arguments)}function es(){return(es=(0,P.Z)(function*(I){const{registrationPromise:b}=yield B(I);b&&(yield b)})).apply(this,arguments)}function eo(I){return vt.create("missing-app-config-values",{valueName:I})}const Ld="installations",Pf=I=>{const b=I.getProvider("app").getImmediate(),M=function Xu(I){if(!I||!I.options)throw eo("App Configuration");if(!I.name)throw eo("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!I.options[M])throw eo(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},to=I=>{const b=I.getProvider("app").getImmediate(),M=(0,ie._getProvider)(b,Ld).getImmediate();return{getId:()=>function va(I){return _a.apply(this,arguments)}(M),getToken:$=>function Pd(I){return Xl.apply(this,arguments)}(M,$)}};(function sn(){(0,ie._registerComponent)(new ne.wA(Ld,Pf,"PUBLIC")),(0,ie._registerComponent)(new ne.wA("installations-internal",to,"PRIVATE"))})(),(0,ie.registerVersion)(Zs,ce),(0,ie.registerVersion)(Zs,ce,"esm2017");const Fn="@firebase/remote-config",Er=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ei{constructor(b,M,O,$){this.client=b,this.storage=M,this.storageCache=O,this.logger=$}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-M,$=O<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${$}.`),$}fetch(b){var M=this;return(0,P.Z)(function*(){const[O,$]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if($&&M.isCachedDataFresh(b.cacheMaxAgeMillis,O))return $;b.eTag=$&&$.eTag;const Z=yield M.client.fetch(b),le=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&le.push(M.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(le),Z})()}}function Da(I=navigator){return I.languages&&I.languages[0]||I.language}class ti{constructor(b,M,O,$,Z,le){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=O,this.projectId=$,this.apiKey=Z,this.appId=le}fetch(b){var M=this;return(0,P.Z)(function*(){const[O,$]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},$e={sdk_version:M.sdkVersion,app_instance_id:O,app_instance_id_token:$,app_id:M.appId,language_code:Da()},dt={method:"POST",headers:ze,body:JSON.stringify($e)},Ct=fetch(le,dt),St=new Promise((Ti,vs)=>{b.signal.addEventListener(()=>{const ih=new Error("The operation was aborted.");ih.name="AbortError",vs(ih)})});let Fr;try{yield Promise.race([Ct,St]),Fr=yield Ct}catch(Ti){let vs="fetch-client-network";throw"AbortError"===Ti?.name&&(vs="fetch-timeout"),Er.create(vs,{originalErrorMessage:Ti?.message})}let Rn=Fr.status;const Zo=Fr.headers.get("ETag")||void 0;let Ko,bi;if(200===Fr.status){let Ti;try{Ti=yield Fr.json()}catch(vs){throw Er.create("fetch-client-parse",{originalErrorMessage:vs?.message})}Ko=Ti.entries,bi=Ti.state}if("INSTANCE_STATE_UNSPECIFIED"===bi?Rn=500:"NO_CHANGE"===bi?Rn=304:("NO_TEMPLATE"===bi||"EMPTY_CONFIG"===bi)&&(Ko={}),304!==Rn&&200!==Rn)throw Er.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:Zo,config:Ko}})()}}class Mo{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,P.Z)(function*(){const O=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,O)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:O}){var $=this;return(0,P.Z)(function*(){yield function Ao(I,b){return new Promise((M,O)=>{const $=Math.max(b-Date.now(),0),Z=setTimeout(M,$);I.addEventListener(()=>{clearTimeout(Z),O(Er.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const Z=yield $.client.fetch(b);return yield $.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function tc(I){if(!(I instanceof se.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Z))throw Z;const le={throttleEndTimeMillis:Date.now()+(0,se.$s)(O),backoffCount:O+1};return yield $.storage.setThrottleMetadata(le),$.attemptFetch(b,le)}})()}}class nl{constructor(b,M,O,$,Z){this.app=b,this._client=M,this._storageCache=O,this._storage=$,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ht(I,b){const M=I.target.error||void 0;return Er.create(b,{originalErrorMessage:M&&M?.message})}const Ui="app_namespace_store";class Ud{constructor(b,M,O,$=function Ei(){return new Promise((I,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=O=>{b(Ht(O,"storage-open"))},M.onsuccess=O=>{I(O.target.result)},M.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(Ui,{keyPath:"compositeKey"})}}catch(M){b(Er.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=O,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,P.Z)(function*(){const O=yield M.openDbPromise;return new Promise(($,Z)=>{const ze=O.transaction([Ui],"readonly").objectStore(Ui),$e=M.createCompositeKey(b);try{const dt=ze.get($e);dt.onerror=Ct=>{Z(Ht(Ct,"storage-get"))},dt.onsuccess=Ct=>{const St=Ct.target.result;$(St?St.value:void 0)}}catch(dt){Z(Er.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(b,M){var O=this;return(0,P.Z)(function*(){const $=yield O.openDbPromise;return new Promise((Z,le)=>{const $e=$.transaction([Ui],"readwrite").objectStore(Ui),dt=O.createCompositeKey(b);try{const Ct=$e.put({compositeKey:dt,value:M});Ct.onerror=St=>{le(Ht(St,"storage-set"))},Ct.onsuccess=()=>{Z()}}catch(Ct){le(Er.create("storage-set",{originalErrorMessage:Ct?.message}))}})})()}delete(b){var M=this;return(0,P.Z)(function*(){const O=yield M.openDbPromise;return new Promise(($,Z)=>{const ze=O.transaction([Ui],"readwrite").objectStore(Ui),$e=M.createCompositeKey(b);try{const dt=ze.delete($e);dt.onerror=Ct=>{Z(Ht(Ct,"storage-delete"))},dt.onsuccess=()=>{$()}}catch(dt){Z(Er.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class No{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const M=b.storage.getLastFetchStatus(),O=b.storage.getLastSuccessfulFetchTimestampMillis(),$=b.storage.getActiveConfig(),Z=yield M;Z&&(b.lastFetchStatus=Z);const le=yield O;le&&(b.lastSuccessfulFetchTimestampMillis=le);const ze=yield $;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function ni(){return xr.apply(this,arguments)}function xr(){return(xr=(0,P.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ii(){(0,ie._registerComponent)(new ne.wA("remote-config",function I(b,{instanceIdentifier:M}){const O=b.getProvider("app").getImmediate(),$=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Er.create("registration-window");if(!(0,se.hl)())throw Er.create("indexed-db-unavailable");const{projectId:Z,apiKey:le,appId:ze}=O.options;if(!Z)throw Er.create("registration-project-id");if(!le)throw Er.create("registration-api-key");if(!ze)throw Er.create("registration-app-id");const $e=new Ud(ze,O.name,M=M||"firebase"),dt=new No($e),Ct=new ye.Yd(Fn);Ct.logLevel=ye.in.ERROR;const St=new ti($,ie.SDK_VERSION,M,Z,le,ze),Fr=new Mo(St,$e),Rn=new ei(Fr,$e,dt,Ct),Zo=new nl(O,Rn,dt,$e,Ct);return function Nr(I){const b=(0,se.m9)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Zo),Zo},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Fn,"0.4.4"),(0,ie.registerVersion)(Fn,"0.4.4","esm2017")}();const rl=(I,b)=>b.some(M=>I instanceof M);let xo,Bi;const nc=new WeakMap,cu=new WeakMap,Ro=new WeakMap,ri=new WeakMap,ba=new WeakMap;let il={get(I,b,M){if(I instanceof IDBTransaction){if("done"===b)return cu.get(I);if("objectStoreNames"===b)return I.objectStoreNames||Ro.get(I);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return fs(I[b])},set:(I,b,M)=>(I[b]=M,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function hm(I){return"function"==typeof I?function Ff(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ca(){return Bi||(Bi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(rc(this),b),fs(nc.get(this))}:function(...b){return fs(I.apply(rc(this),b))}:function(b,...M){const O=I.call(rc(this),b,...M);return Ro.set(O,b.sort?b.sort():[b]),fs(O)}}(I):(I instanceof IDBTransaction&&function Bd(I){if(cu.has(I))return;const b=new Promise((M,O)=>{const $=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",le),I.removeEventListener("abort",le)},Z=()=>{M(),$()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),$()};I.addEventListener("complete",Z),I.addEventListener("error",le),I.addEventListener("abort",le)});cu.set(I,b)}(I),rl(I,function hs(){return xo||(xo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,il):I)}function fs(I){if(I instanceof IDBRequest)return function dm(I){const b=new Promise((M,O)=>{const $=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",le)},Z=()=>{M(fs(I.result)),$()},le=()=>{O(I.error),$()};I.addEventListener("success",Z),I.addEventListener("error",le)});return b.then(M=>{M instanceof IDBCursor&&nc.set(M,I)}).catch(()=>{}),ba.set(b,I),b}(I);if(ri.has(I))return ri.get(I);const b=hm(I);return b!==I&&(ri.set(I,b),ba.set(b,I)),b}const rc=I=>ba.get(I);function ic(I,b,{blocked:M,upgrade:O,blocking:$,terminated:Z}={}){const le=indexedDB.open(I,b),ze=fs(le);return O&&le.addEventListener("upgradeneeded",$e=>{O(fs(le.result),$e.oldVersion,$e.newVersion,fs(le.transaction))}),M&&le.addEventListener("blocked",()=>M()),ze.then($e=>{Z&&$e.addEventListener("close",()=>Z()),$&&$e.addEventListener("versionchange",()=>$())}).catch(()=>{}),ze}function du(I,{blocked:b}={}){const M=indexedDB.deleteDatabase(I);return b&&M.addEventListener("blocked",()=>b()),fs(M).then(()=>{})}const jd=["get","getKey","getAll","getAllKeys","count"],sc=["put","add","delete","clear"],hu=new Map;function $d(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(hu.get(b))return hu.get(b);const M=b.replace(/FromIndex$/,""),O=b!==M,$=sc.includes(M);if(!(M in(O?IDBIndex:IDBObjectStore).prototype)||!$&&!jd.includes(M))return;const Z=function(){var le=(0,P.Z)(function*(ze,...$e){const dt=this.transaction(ze,$?"readwrite":"readonly");let Ct=dt.store;return O&&(Ct=Ct.index($e.shift())),(yield Promise.all([Ct[M](...$e),$&&dt.done]))[0]});return function($e){return le.apply(this,arguments)}}();return hu.set(b,Z),Z}!function kf(I){il=I(il)}(I=>({...I,get:(b,M,O)=>$d(b,M)||I.get(b,M,O),has:(b,M)=>!!$d(b,M)||I.has(b,M)}));const Hd="/firebase-messaging-sw.js",oc="/firebase-cloud-messaging-push-scope",ps="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gd="https://fcmregistrations.googleapis.com/v1",ac="google.c.a.c_id",bn="google.c.a.c_l",uc="google.c.a.ts";var Oo=(()=>((Oo=Oo||{}).PUSH_RECEIVED="push-received",Oo.NOTIFICATION_CLICKED="notification-clicked",Oo))();function Ns(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sl(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(M),$=new Uint8Array(O.length);for(let Z=0;Z<O.length;++Z)$[Z]=O.charCodeAt(Z);return $}const ii="fcm_token_details_db",fu=5,An="fcm_token_object_Store";function pu(){return pu=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(ii))return null;let b=null;return(yield ic(ii,fu,{upgrade:(O=(0,P.Z)(function*($,Z,le,ze){var $e;if(Z<2||!$.objectStoreNames.contains(An))return;const dt=ze.objectStore(An),Ct=yield dt.index("fcmSenderId").get(I);if(yield dt.clear(),Ct)if(2===Z){const St=Ct;if(!St.auth||!St.p256dh||!St.endpoint)return;b={token:St.fcmToken,createTime:null!==($e=St.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Ns(St.vapidKey)}}}else if(3===Z){const St=Ct;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ns(St.auth),p256dh:Ns(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ns(St.vapidKey)}}}else if(4===Z){const St=Ct;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ns(St.auth),p256dh:Ns(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ns(St.vapidKey)}}}}),function(Z,le,ze,$e){return O.apply(this,arguments)})})).close(),yield du(ii),yield du("fcm_vapid_details_db"),yield du("undefined"),function lc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var O}),pu.apply(this,arguments)}const gu="firebase-messaging-database",Ta=1,Di="firebase-messaging-store";let zd=null;function mu(){return zd||(zd=ic(gu,Ta,{upgrade:(I,b)=>{0===b&&I.createObjectStore(Di)}})),zd}function yu(I){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,P.Z)(function*(I){const b=dc(I),O=yield(yield mu()).transaction(Di).objectStore(Di).get(b);if(O)return O;{const $=yield function Vf(I){return pu.apply(this,arguments)}(I.appConfig.senderId);if($)return yield vu(I,$),$}}),Sa.apply(this,arguments)}function vu(I,b){return ol.apply(this,arguments)}function ol(){return(ol=(0,P.Z)(function*(I,b){const M=dc(I),$=(yield mu()).transaction(Di,"readwrite");return yield $.objectStore(Di).put(b,M),yield $.done,b})).apply(this,arguments)}function cc(){return(cc=(0,P.Z)(function*(I){const b=dc(I),O=(yield mu()).transaction(Di,"readwrite");yield O.objectStore(Di).delete(b),yield O.done})).apply(this,arguments)}function dc({appConfig:I}){return I.appId}const Rr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qd(I,b){return al.apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(I,b){const M=yield gc(I),O=Zd(b),$={method:"POST",headers:M,body:JSON.stringify(O)};let Z;try{Z=yield(yield fetch(_u(I.appConfig),$)).json()}catch(le){throw Rr.create("token-subscribe-failed",{errorInfo:le?.toString()})}if(Z.error)throw Rr.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Rr.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Wd(){return(Wd=(0,P.Z)(function*(I,b){const M=yield gc(I),O=Zd(b.subscriptionOptions),$={method:"PATCH",headers:M,body:JSON.stringify(O)};let Z;try{Z=yield(yield fetch(`${_u(I.appConfig)}/${b.token}`,$)).json()}catch(le){throw Rr.create("token-update-failed",{errorInfo:le?.toString()})}if(Z.error)throw Rr.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Rr.create("token-update-no-token");return Z.token})).apply(this,arguments)}function fc(I,b){return pc.apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(I,b){const O={method:"DELETE",headers:yield gc(I)};try{const Z=yield(yield fetch(`${_u(I.appConfig)}/${b}`,O)).json();if(Z.error)throw Rr.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch($){throw Rr.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function _u({projectId:I}){return`${Gd}/projects/${I}/registrations`}function gc(I){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*({appConfig:I,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Zd({p256dh:I,auth:b,endpoint:M,vapidKey:O}){const $={web:{endpoint:M,auth:b,p256dh:I}};return O!==ps&&($.web.applicationPubKey=O),$}const ji=6048e5;function wu(){return wu=(0,P.Z)(function*(I){const b=yield function Ma(I,b){return Hr.apply(this,arguments)}(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:Ns(b.getKey("auth")),p256dh:Ns(b.getKey("p256dh"))},O=yield yu(I.firebaseDependencies);if(O){if(function ll(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}(O.subscriptionOptions,M))return Date.now()>=O.createTime+ji?function ul(I,b){return Ir.apply(this,arguments)}(I,{token:O.token,createTime:Date.now(),subscriptionOptions:M}):O.token;try{yield fc(I.firebaseDependencies,O.token)}catch($){console.warn($)}return jf(I.firebaseDependencies,M)}return jf(I.firebaseDependencies,M)}),wu.apply(this,arguments)}function Kd(){return Kd=(0,P.Z)(function*(I){const b=yield yu(I.firebaseDependencies);b&&(yield fc(I.firebaseDependencies,b.token),yield function pm(I){return cc.apply(this,arguments)}(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Kd.apply(this,arguments)}function Ir(){return Ir=(0,P.Z)(function*(I,b){try{const M=yield function hc(I,b){return Wd.apply(this,arguments)}(I.firebaseDependencies,b),O=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield vu(I.firebaseDependencies,O),M}catch(M){throw yield function wn(I){return Kd.apply(this,arguments)}(I),M}}),Ir.apply(this,arguments)}function jf(I,b){return oo.apply(this,arguments)}function oo(){return(oo=(0,P.Z)(function*(I,b){const O={token:yield qd(I,b),createTime:Date.now(),subscriptionOptions:b};return yield vu(I,O),O.token})).apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sl(b)})})).apply(this,arguments)}function Eu(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function mc(I,b){if(!b.notification)return;I.notification={};const M=b.notification.title;M&&(I.notification.title=M);const O=b.notification.body;O&&(I.notification.body=O);const $=b.notification.image;$&&(I.notification.image=$);const Z=b.notification.icon;Z&&(I.notification.icon=Z)}(b,I),function $i(I,b){b.data&&(I.data=b.data)}(b,I),function $f(I,b){var M,O,$,Z,le;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const ze=null!==($=null===(O=b.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==$?$:null===(Z=b.notification)||void 0===Z?void 0:Z.click_action;ze&&(I.fcmOptions.link=ze);const $e=null===(le=b.fcmOptions)||void 0===le?void 0:le.analytics_label;$e&&(I.fcmOptions.analyticsLabel=$e)}(b,I),b}function vc(I,b){const M=[];for(let O=0;O<I.length;O++)M.push(I.charAt(O)),O<b.length&&M.push(b.charAt(O));return M.join("")}function _c(I){return Rr.create("missing-app-config-values",{valueName:I})}vc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qd{constructor(b,M,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function Yd(I){if(!I||!I.options)throw _c("App Configuration Object");if(!I.name)throw _c("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const O of b)if(!M[O])throw _c(O);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:$,installations:M,analyticsProvider:O}}_delete(){return Promise.resolve()}}function cl(){return(cl=(0,P.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Hd,{scope:oc}),I.swRegistration.update().catch(()=>{})}catch(b){throw Rr.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function Na(){return(Na=(0,P.Z)(function*(I,b){if(!b&&!I.swRegistration&&(yield function Tt(I){return cl.apply(this,arguments)}(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Rr.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=ps)})).apply(this,arguments)}function ao(){return ao=(0,P.Z)(function*(I,b){if(!navigator)throw Rr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rr.create("permission-blocked");return yield function xs(I,b){return Po.apply(this,arguments)}(I,b?.vapidKey),yield function Hf(I,b){return Na.apply(this,arguments)}(I,b?.serviceWorkerRegistration),function Bf(I){return wu.apply(this,arguments)}(I)}),ao.apply(this,arguments)}function Jd(){return(Jd=(0,P.Z)(function*(I,b,M){const O=function zf(I){switch(I){case Oo.NOTIFICATION_CLICKED:return"notification_open";case Oo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:M[ac],message_name:M[bn],message_time:M[uc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Iu(){return Iu=(0,P.Z)(function*(I,b){const M=b.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Oo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Eu(M)):I.onMessageHandler.next(Eu(M)));const O=M.data;(function yc(I){return"object"==typeof I&&!!I&&ac in I})(O)&&"1"===O["google.c.a.e"]&&(yield function Gf(I,b,M){return Jd.apply(this,arguments)}(I,M.messageType,O))}),Iu.apply(this,arguments)}const be="@firebase/messaging",ko=I=>{const b=new Qd(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function qf(I,b){return Iu.apply(this,arguments)}(b,M)),b},wc=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:O=>function dl(I,b){return ao.apply(this,arguments)}(b,O)}};function hl(){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Or(){(0,ie._registerComponent)(new ne.wA("messaging",ko,"PUBLIC")),(0,ie._registerComponent)(new ne.wA("messaging-internal",wc,"PRIVATE")),(0,ie.registerVersion)(be,"0.12.4"),(0,ie.registerVersion)(be,"0.12.4","esm2017")}();const Mn="analytics",Vo="firebase_id",gs="origin",Wf=6e4,pl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ec="https://www.googletagmanager.com/gtag/js",nr=new ye.Yd("@firebase/analytics"),Dr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function xa(I){if(!I.startsWith(Ec)){const b=Dr.create("invalid-gtag-resource",{gtagURL:I});return nr.warn(b.message),""}return I}function Ra(I){return Promise.all(I.map(b=>b.catch(M=>M)))}function Du(){return(Du=(0,P.Z)(function*(I,b,M,O,$,Z){const le=O[$];try{if(le)yield b[le];else{const $e=(yield Ra(M)).find(dt=>dt.measurementId===$);$e&&(yield b[$e.appId])}}catch(ze){nr.error(ze)}I("config",$,Z)})).apply(this,arguments)}function bu(){return(bu=(0,P.Z)(function*(I,b,M,O,$){try{let Z=[];if($&&$.send_to){let le=$.send_to;Array.isArray(le)||(le=[le]);const ze=yield Ra(M);for(const $e of le){const dt=ze.find(St=>St.measurementId===$e),Ct=dt&&b[dt.appId];if(!Ct){Z=[];break}Z.push(Ct)}}0===Z.length&&(Z=Object.values(b)),yield Promise.all(Z),I("event",O,$||{})}catch(Z){nr.error(Z)}})).apply(this,arguments)}const Cr=30,Kf=new class hn{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function gm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function th(){return(th=(0,P.Z)(function*(I){var b;const{appId:M,apiKey:O}=I,$={method:"GET",headers:gm(O)},Z=pl.replace("{app-id}",M),le=yield fetch(Z,$);if(200!==le.status&&304!==le.status){let ze="";try{const $e=yield le.json();null!==(b=$e.error)&&void 0!==b&&b.message&&(ze=$e.error.message)}catch{}throw Dr.create("config-fetch-failed",{httpStatus:le.status,responseMessage:ze})}return le.json()})).apply(this,arguments)}function Pa(){return(Pa=(0,P.Z)(function*(I,b=Kf,M){const{appId:O,apiKey:$,measurementId:Z}=I.options;if(!O)throw Dr.create("no-app-id");if(!$){if(Z)return{measurementId:Z,appId:O};throw Dr.create("no-api-key")}const le=b.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new vl;return setTimeout((0,P.Z)(function*(){ze.abort()}),void 0!==M?M:Wf),yl({appId:O,apiKey:$,measurementId:Z},le,ze,b)})).apply(this,arguments)}function yl(I,b,M){return Os.apply(this,arguments)}function Os(){return Os=(0,P.Z)(function*(I,{throttleEndTimeMillis:b,backoffCount:M},O,$=Kf){var Z;const{appId:le,measurementId:ze}=I;try{yield function mm(I,b){return new Promise((M,O)=>{const $=Math.max(b-Date.now(),0),Z=setTimeout(M,$);I.addEventListener(()=>{clearTimeout(Z),O(Dr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(O,b)}catch($e){if(ze)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${$e?.message}]`),{appId:le,measurementId:ze};throw $e}try{const $e=yield function Yf(I){return th.apply(this,arguments)}(I);return $.deleteThrottleMetadata(le),$e}catch($e){const dt=$e;if(!function Bo(I){if(!(I instanceof se.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(dt)){if($.deleteThrottleMetadata(le),ze)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:le,measurementId:ze};throw $e}const Ct=503===Number(null===(Z=dt?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,se.$s)(M,$.intervalMillis,Cr):(0,se.$s)(M,$.intervalMillis),St={throttleEndTimeMillis:Date.now()+Ct,backoffCount:M+1};return $.setThrottleMetadata(le,St),nr.debug(`Calling attemptFetch again in ${Ct} millis`),yl(I,St,O,$)}}),Os.apply(this,arguments)}class vl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let jo,$o;function Cc(){return(Cc=(0,P.Z)(function*(I,b,M,O,$){if($&&$.global)I("event",M,O);else{const Z=yield b;I("event",M,Object.assign(Object.assign({},O),{send_to:Z}))}})).apply(this,arguments)}function Sc(){return(Sc=(0,P.Z)(function*(){if(!(0,se.hl)())return nr.warn(Dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return nr.warn(Dr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ps(){return Ps=(0,P.Z)(function*(I,b,M,O,$,Z,le){var ze;const $e=function Qf(I){return Pa.apply(this,arguments)}(I);$e.then(Rn=>{M[Rn.measurementId]=Rn.appId,I.options.measurementId&&Rn.measurementId!==I.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>nr.error(Rn)),b.push($e);const dt=function Pr(){return Sc.apply(this,arguments)}().then(Rn=>{if(Rn)return O.getId()}),[Ct,St]=yield Promise.all([$e,dt]);(function Zf(I){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(Ec)&&M.src.includes(I))return M;return null})(Z)||function ml(I,b){const M=function Oa(I,b){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(I,b)),M}("firebase-js-sdk-policy",{createScriptURL:xa}),O=document.createElement("script"),$=`${Ec}?l=${I}&id=${b}`;O.src=M?M?.createScriptURL($):$,O.async=!0,document.head.appendChild(O)}(Z,Ct.measurementId),$o&&($("consent","default",$o),function Dt(I){$o=I}(void 0)),$("js",new Date);const Fr=null!==(ze=le?.config)&&void 0!==ze?ze:{};return Fr[gs]="firebase",Fr.update=!0,null!=St&&(Fr[Vo]=St),$("config",Ct.measurementId,Fr),jo&&($("set",jo),function Zn(I){jo=I}(void 0)),Ct.measurementId}),Ps.apply(this,arguments)}class ms{constructor(b){this.app=b}_delete(){return delete Gi[this.app.options.appId],Promise.resolve()}}let Gi={},Ac=[];const Ho={};let Mc,si,Ut="dataLayer",La=!1;function Go(I,b,M){!function Nc(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const b=I.map((O,$)=>`(${$+1}) ${O}`).join(" "),M=Dr.create("invalid-analytics-context",{errorInfo:b});nr.warn(M.message)}}();const O=I.options.appId;if(!O)throw Dr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Dr.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gi[O])throw Dr.create("already-exists",{id:O});if(!La){!function Ic(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(Ut);const{wrappedGtag:Z,gtagCore:le}=function eh(I,b,M,O,$){let Z=function(...le){window[O].push(arguments)};return window[$]&&"function"==typeof window[$]&&(Z=window[$]),window[$]=function Hi(I,b,M,O){function Z(){return Z=(0,P.Z)(function*(le,...ze){try{if("event"===le){const[$e,dt]=ze;yield function Cu(I,b,M,O,$){return bu.apply(this,arguments)}(I,b,M,$e,dt)}else if("config"===le){const[$e,dt]=ze;yield function Dc(I,b,M,O,$,Z){return Du.apply(this,arguments)}(I,b,M,O,$e,dt)}else if("consent"===le){const[$e]=ze;I("consent","update",$e)}else if("get"===le){const[$e,dt,Ct]=ze;I("get",$e,dt,Ct)}else if("set"===le){const[$e]=ze;I("set",$e)}else I(le,...ze)}catch($e){nr.error($e)}}),Z.apply(this,arguments)}return function $(le){return Z.apply(this,arguments)}}(Z,I,b,M),{gtagCore:Z,wrappedGtag:window[$]}}(Gi,Ac,Ho,Ut,"gtag");si=Z,Mc=le,La=!0}return Gi[O]=function Fa(I,b,M,O,$,Z,le){return Ps.apply(this,arguments)}(I,Ac,Ho,b,Mc,Ut,M),new ms(I)}function wl(){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Tr="@firebase/analytics";!function rh(){(0,ie._registerComponent)(new ne.wA(Mn,(b,{options:M})=>Go(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new ne.wA("analytics-internal",function I(b){try{const M=b.getProvider(Mn).getImmediate();return{logEvent:(O,$,Z)=>function Gr(I,b,M,O){I=(0,se.m9)(I),function _l(I,b,M,O,$){return Cc.apply(this,arguments)}(si,Gi[I.app.options.appId],b,M,O).catch($=>nr.error($))}(M,O,$,Z)}}catch(M){throw Dr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(Tr,"0.10.0"),(0,ie.registerVersion)(Tr,"0.10.0","esm2017")}();var Kn=F(4408),Fs=F(7565);const Yn=new class hr extends Fs.v{}(class ho extends Kn.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(b,M,O):(b.flush(this),0)}});var Ua=F(4986),Ba=F(8505),Ls=F(9468),fo=F(5363);const kr=new d.GfV("7.6.1"),Vs="__angularfire_symbol__analyticsIsSupportedValue",Il="__angularfire_symbol__analyticsIsSupported",Mu="__angularfire_symbol__remoteConfigIsSupportedValue",Nu="__angularfire_symbol__remoteConfigIsSupported",Oc="__angularfire_symbol__messagingIsSupportedValue",po="__angularfire_symbol__messagingIsSupported";function ys(I,b,M){if(b){if(1===b.length)return b[0];const Z=b.filter(le=>le.app===M);if(1===Z.length)return Z[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Il]||(globalThis[Il]=wl().then(I=>globalThis[Vs]=I).catch(()=>globalThis[Vs]=!1)),globalThis[po]||(globalThis[po]=hl().then(I=>globalThis[Oc]=I).catch(()=>globalThis[Oc]=!1)),globalThis[Nu]||(globalThis[Nu]=ni().then(I=>globalThis[Mu]=I).catch(()=>globalThis[Mu]=!1));const ep=(I,b)=>{const M=b?[b]:(0,K.C6)(),O=[];return M.forEach($=>{$.container.getProvider(I).instances.forEach(le=>{O.includes(le)||O.push(le)})}),O};function rr(){}class zr{constructor(b,M=Yn){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,O){const $=this.zone;return this.delegate.schedule(function(le){$.runGuarded(()=>{b.apply(this,[le])})},M,O)}}class Pc{constructor(b){this.zone=b,this.task=null}call(b,M){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr)),M.pipe((0,Ba.b)({next:O,complete:O,error:O})).subscribe(b).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ja=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new zr(Zone.current)),this.insideAngular=M.run(()=>new zr(Zone.current,Ua.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function fr(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function qr(I){return fr(),function kc(I){return function(M){return(M=M.lift(new Pc(I.ngZone))).pipe((0,Ls.R)(I.outsideAngular),(0,fo.Q)(I.insideAngular))}}(fr())(I)}},2090:(wt,Ae,F)=>{F.d(Ae,{$s:()=>yi,BH:()=>ge,G6:()=>Ce,L:()=>pe,LL:()=>jt,Pz:()=>_e,Sg:()=>Ne,UG:()=>re,US:()=>ne,ZB:()=>W,ZR:()=>at,aH:()=>Pe,b$:()=>vr,eu:()=>qe,hl:()=>xe,jU:()=>Ke,m9:()=>Li,ne:()=>mi,pd:()=>Et,r3:()=>Sn,ru:()=>en,tV:()=>z,uI:()=>je,vZ:()=>gt,w1:()=>Zs,xO:()=>lr,xb:()=>Ys,z$:()=>Ee,zI:()=>ke,zd:()=>nn});const ie=function(B){const V=[];let q=0;for(let me=0;me<B.length;me++){let X=B.charCodeAt(me);X<128?V[q++]=X:X<2048?(V[q++]=X>>6|192,V[q++]=63&X|128):55296==(64512&X)&&me+1<B.length&&56320==(64512&B.charCodeAt(me+1))?(X=65536+((1023&X)<<10)+(1023&B.charCodeAt(++me)),V[q++]=X>>18|240,V[q++]=X>>12&63|128,V[q++]=X>>6&63|128,V[q++]=63&X|128):(V[q++]=X>>12|224,V[q++]=X>>6&63|128,V[q++]=63&X|128)}return V},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let X=0;X<B.length;X+=3){const Qe=B[X],Ye=X+1<B.length,Wt=Ye?B[X+1]:0,Jn=X+2<B.length,kn=Jn?B[X+2]:0;let Xn=(15&Wt)<<2|kn>>6,Xi=63&kn;Jn||(Xi=64,Ye||(Xn=64)),me.push(q[Qe>>2],q[(3&Qe)<<4|Wt>>4],q[Xn],q[Xi])}return me.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(ie(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let q=0,me=0;for(;q<B.length;){const X=B[q++];if(X<128)V[me++]=String.fromCharCode(X);else if(X>191&&X<224){const Qe=B[q++];V[me++]=String.fromCharCode((31&X)<<6|63&Qe)}else if(X>239&&X<365){const Jn=((7&X)<<18|(63&B[q++])<<12|(63&B[q++])<<6|63&B[q++])-65536;V[me++]=String.fromCharCode(55296+(Jn>>10)),V[me++]=String.fromCharCode(56320+(1023&Jn))}else{const Qe=B[q++],Ye=B[q++];V[me++]=String.fromCharCode((15&X)<<12|(63&Qe)<<6|63&Ye)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let X=0;X<B.length;){const Qe=q[B.charAt(X++)],Wt=X<B.length?q[B.charAt(X)]:0;++X;const kn=X<B.length?q[B.charAt(X)]:64;++X;const Vt=X<B.length?q[B.charAt(X)]:64;if(++X,null==Qe||null==Wt||null==kn||null==Vt)throw new ye;me.push(Qe<<2|Wt>>4),64!==kn&&(me.push(Wt<<4&240|kn>>2),64!==Vt&&me.push(kn<<6&192|Vt))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(B){return function(B){const V=ie(B);return ne.encodeByteArray(V,!0)}(B).replace(/\./g,"")},z=function(B){try{return ne.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function W(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!Be(q)||(B[q]=W(B[q],V[q]));return B}function Be(B){return"__proto__"!==B}const Le=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=B&&z(B[1]);return V&&JSON.parse(V)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Pe=()=>{var B;return null===(B=Le())||void 0===B?void 0:B.config},_e=B=>{var V;return null===(V=Le())||void 0===V?void 0:V[`_${B}`]};class ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,me)=>{q?this.reject(q):this.resolve(me),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,me))}}}function Ne(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=V||"demo-project",X=B.iat||0,Qe=B.sub||B.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:X,exp:X+3600,auth_time:X,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},B);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ye)),""].join(".")}function Ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function re(){var B;const V=null===(B=Le())||void 0===B?void 0:B.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function en(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function vr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Zs(){const B=Ee();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ce(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){try{return"object"==typeof indexedDB}catch{return!1}}function qe(){return new Promise((B,V)=>{try{let q=!0;const me="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(me);X.onsuccess=()=>{X.result.close(),q||self.indexedDB.deleteDatabase(me),B(!0)},X.onupgradeneeded=()=>{q=!1},X.onerror=()=>{var Qe;V((null===(Qe=X.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(q){V(q)}})}function ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class at extends Error{constructor(V,q,me){super(q),this.code=V,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(V,q,me){this.service=V,this.serviceName=q,this.errors=me}create(V,...q){const me=q[0]||{},X=`${this.service}/${V}`,Qe=this.errors[V],Ye=Qe?function vt(B,V){return B.replace(Rt,(q,me)=>{const X=V[me];return null!=X?String(X):`<${me}?>`})}(Qe,me):"Error";return new at(X,`${this.serviceName}: ${Ye} (${X}).`,me)}}const Rt=/\{\$([^}]+)}/g;function Sn(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function Ys(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function gt(B,V){if(B===V)return!0;const q=Object.keys(B),me=Object.keys(V);for(const X of q){if(!me.includes(X))return!1;const Qe=B[X],Ye=V[X];if(gi(Qe)&&gi(Ye)){if(!gt(Qe,Ye))return!1}else if(Qe!==Ye)return!1}for(const X of me)if(!q.includes(X))return!1;return!0}function gi(B){return null!==B&&"object"==typeof B}function lr(B){const V=[];for(const[q,me]of Object.entries(B))Array.isArray(me)?me.forEach(X=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(X))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(me));return V.length?"&"+V.join("&"):""}function nn(B){const V={};return B.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[X,Qe]=me.split("=");V[decodeURIComponent(X)]=decodeURIComponent(Qe)}}),V}function Et(B){const V=B.indexOf("?");if(!V)return"";const q=B.indexOf("#",V);return B.substring(V,q>0?q:void 0)}function mi(B,V){const q=new Pn(B,V);return q.subscribe.bind(q)}class Pn{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(me=>{this.error(me)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,me){let X;if(void 0===V&&void 0===q&&void 0===me)throw new Error("Missing Observer.");X=function jr(B,V){if("object"!=typeof B||null===B)return!1;for(const q of V)if(q in B&&"function"==typeof B[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:me},void 0===X.next&&(X.next=Bn),void 0===X.error&&(X.error=Bn),void 0===X.complete&&(X.complete=Bn);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Qe}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(me){typeof console<"u"&&console.error&&console.error(me)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bn(){}const Ms=1e3,dn=2,$n=144e5,kt=.5;function yi(B,V=Ms,q=dn){const me=V*Math.pow(q,B),X=Math.round(kt*me*(Math.random()-.5)*2);return Math.min($n,me+X)}function Li(B){return B&&B._delegate?B._delegate:B}},193:(wt,Ae,F)=>{var d=F(2223);let K=null;function P(){return K}class se{}const ne=new d.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(pe)},providedIn:"platform"}),n})();const De=new d.OlP("Location Initialized");let pe=(()=>{class n extends ye{constructor(){super(),this._doc=(0,d.f3M)(ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function z(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function W(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(rt)},providedIn:"root"}),n})();const Te=new d.OlP("appBaseHref");let rt=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return z(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+W(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+W(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+W(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(Te,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=z(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+W(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+W(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(Te,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Pe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(Ge(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+W(r))}normalize(t){return n.stripTrailingSlash(function Oe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+W(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+W(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=W,n.joinWithSlash=z,n.stripTrailingSlash=j,n.\u0275fac=function(t){return new(t||n)(d.LFG(Be))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Le(){return new ue((0,d.LFG)(Be))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}class Ju{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ju(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Fd(g,i)}});for(let i=0,u=r.length;i<u;i++){const g=r.get(i).context;g.index=i,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Fd(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Fd(n,e){n.context.$implicit=e.item}let Xs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Of("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Of("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class cm{constructor(){this.$implicit=null,this.ngIf=null}}function Of(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Fn=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),l=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class el{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Er{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Ea=new Er,tl=new el;let au=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Ea;if((0,d.F4k)(t))return tl;throw function In(n,e){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Vi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function lu(n){return"server"===n}let Ii=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Ln((0,d.LFG)(ne),window)}),n})();class Ln{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ni(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=so(this.window.history)||so(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function so(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Eu extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mc extends Eu{static makeCurrent(){!function ie(n){K||(K=n)}(new mc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $f(){return $i=$i||document.querySelector("base"),$i?$i.getAttribute("href"):null}();return null==t?null:function vc(n){yc=yc||document.createElement("a"),yc.setAttribute("href",n);const e=yc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$i=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yc,$i=null,_c=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Qd=new d.OlP("EventManagerPlugins");let Tt=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qd),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class cl{constructor(e){this._doc=e}}const Hf="ng-app-id";let Na=(()=>{class n{constructor(t,r,i,u={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lu(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Hf}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const u=i.get(t);return u.usage+=r,u.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,u=i?.get(r);if(u?.parentNode===t)return i.delete(r),u.removeAttribute(Hf),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Hf,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(i):u.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const xs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Po=/%COMP%/g,zf=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function be(n,e){return e.map(t=>t.replace(Po,n))}let Qt=(()=>{class n{constructor(t,r,i,u,l,g,_,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=lu(g),this.defaultRenderer=new ko(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Rs?i.applyToHost(t):i instanceof ns&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,D=this.sharedStylesHost,T=this.removeStylesOnCompDestory,N=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:u=new Rs(_,D,r,this.appId,T,l,g,N);break;case d.ifc.ShadowDom:return new Fo(_,D,t,r,l,g,this.nonce,N);default:u=new ns(_,D,r,T,l,g,N)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tt),d.LFG(Na),d.LFG(d.AFp),d.LFG(zf),d.LFG(ne),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=xs[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fo extends ko{constructor(e,t,r,i,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=be(i.id,i.styles);for(const T of D){const N=document.createElement("style");g&&N.setAttribute("nonce",g),N.textContent=T,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ns extends ko{constructor(e,t,r,i,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=_?be(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Rs extends ns{constructor(e,t,r,i,u,l,g,_){const D=i+"-"+r.id;super(e,t,r,u,l,g,_,D),this.contentAttr=function qf(n){return"_ngcontent-%COMP%".replace(Po,n)}(D),this.hostAttr=function Iu(n){return"_nghost-%COMP%".replace(Po,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Xd=(()=>{class n extends cl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const uo=["alt","control","meta","shift"],i_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dr=(()=>{class n extends cl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),uo.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=i_[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),uo.forEach(l=>{l!==i&&(0,fl[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Wf(){mc.makeCurrent()},multi:!0},{provide:ne,useFactory:function Ec(){return(0,d.RDi)(document),document},deps:[]}]),Dr=new d.OlP(""),xa=[{provide:d.rWj,useClass:class Yd{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new d.vHH(5103,!1);return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};i.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Ra=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function pl(){return new d.qLn},deps:[]},{provide:Qd,useClass:Xd,multi:!0,deps:[ne,d.R0b,d.Lbi]},{provide:Qd,useClass:dr,multi:!0,deps:[ne]},Qt,Na,Tt,{provide:d.FYo,useExisting:Qt},{provide:class rl{},useClass:_c,deps:[]},[]];let Oa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dr,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Ra,...xa],imports:[Vi,d.hGG]}),n})(),Cu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Du(){return new Cu((0,d.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(jo),r},providedIn:"root"}),n})(),jo=(()=>{class n extends Bo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new d.vHH(5200,!1);case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new d.vHH(5201,!1);default:throw new d.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function vl(n){return new jo(n.get(ne))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var rs=F(9751),lo=F(576),fn=F(8996),$o=F(7669);function Dt(...n){const e=(0,$o.yG)(n);return(0,fn.D)(n,e)}var Zn=F(7579);class Pr extends Zn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Sc}=Array,{getPrototypeOf:Fa,prototype:Ps,keys:ms}=Object;function Gi(n){if(1===n.length){const e=n[0];if(Sc(e))return{args:e,keys:null};if(function Ac(n){return n&&"object"==typeof n&&Fa(n)===Ps}(e)){const t=ms(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ho=F(4671),Ut=F(4004);const{isArray:Ci}=Array;function si(n){return(0,Ut.U)(e=>function Mc(n,e){return Ci(e)?n(...e):n(e)}(n,e))}function La(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var br=F(5403),Nc=F(9672);function Go(...n){const e=(0,$o.yG)(n),t=(0,$o.jO)(n),{args:r,keys:i}=Gi(n);if(0===r.length)return(0,fn.D)([],e);const u=new rs.y(function vm(n,e,t=Ho.y){return r=>{Su(e,()=>{const{length:i}=n,u=new Array(i);let l=i,g=i;for(let _=0;_<i;_++)Su(e,()=>{const D=(0,fn.D)(n[_],e);let T=!1;D.subscribe((0,br.x)(r,N=>{u[_]=N,T||(T=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>La(i,l):Ho.y));return t?u.pipe(si(t)):u}function Su(n,e,t){n?(0,Nc.f)(t,n,e):e()}const zo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ks=F(8189);function co(...n){return function _m(){return(0,ks.J)(1)}()((0,fn.D)(n,(0,$o.yG)(n)))}var is=F(8421);function xc(n){return new rs.y(e=>{(0,is.Xf)(n()).subscribe(e)})}var Rc=F(9635);function Au(n,e){const t=(0,lo.m)(n)?n:()=>n,r=i=>i.error(t());return new rs.y(e?i=>e.schedule(r,0,i):r)}var Gr=F(515),nh=F(727),Tr=F(4482);function Va(){return(0,Tr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,br.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class rh extends rs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Tr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,br.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nh.w0.EMPTY)}return e}refCount(){return Va()(this)}}function Kn(n,e){return(0,Tr.e)((t,r)=>{let i=null,u=0,l=!1;const g=()=>l&&!i&&r.complete();t.subscribe((0,br.x)(r,_=>{i?.unsubscribe();let D=0;const T=u++;(0,is.Xf)(n(_,T)).subscribe(i=(0,br.x)(r,N=>r.next(e?e(_,N,T,D++):N),()=>{i=null,g()}))},()=>{l=!0,g()}))})}function ho(n){return n<=0?()=>Gr.E:(0,Tr.e)((e,t)=>{let r=0;e.subscribe((0,br.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fs(...n){const e=(0,$o.yG)(n);return(0,Tr.e)((t,r)=>{(e?co(n,t,e):co(n,t)).subscribe(r)})}function hr(n,e){return(0,Tr.e)((t,r)=>{let i=0;t.subscribe((0,br.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Yn=F(5577);function El(n){return(0,Tr.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ua(n=Ba){return(0,Tr.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ba(){return new zo}function Ls(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((i,u)=>n(i,u,r)):Ho.y,ho(1),t?El(e):Ua(()=>new zo))}function fo(n,e){return(0,lo.m)(e)?(0,Yn.z)(n,e,1):(0,Yn.z)(n,1)}var kr=F(8505);function Vs(n){return(0,Tr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,br.x)(t,void 0,void 0,l=>{u=(0,is.Xf)(n(l,Vs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Mu(n,e){return(0,Tr.e)(function Il(n,e,t,r,i){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,br.x)(l,T=>{const N=D++;_=g?n(_,T,N):(g=!0,T),r&&l.next(_)},i&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Nu(n){return n<=0?()=>Gr.E:(0,Tr.e)((e,t)=>{let r=[];e.subscribe((0,br.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dl(n){return(0,Tr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Tn=Symbol("RouteTitle");class wm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ys(n){return new wm(n)}function ep(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))i[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Pc(n[i],e[i]))return!1;return!0}function Pc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function ja(n){return n.length>0?n[n.length-1]:null}function fr(n){return function Xf(n){return!!n&&(n instanceof rs.y||(0,lo.m)(n.lift)&&(0,lo.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,fn.D)(Promise.resolve(n)):Dt(n)}const Cl={exact:function qr(n,e,t){if(!Z(n.segments,e.segments)||!I(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qr(n.children[r],e.children[r],t))return!1;return!0},subset:Wo},qo={exact:function s_(n,e){return zr(n,e)},subset:function kc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pc(n[t],e[t]))},ignored:()=>!0};function tp(n,e,t){return Cl[t.paths](n.root,e.root,t.matrixParams)&&qo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Wo(n,e,t){return Em(n,e,e.segments,t)}function Em(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Z(i,t)||e.hasChildren()||!I(i,t,r))}if(n.segments.length===t.length){if(!Z(n.segments,t)||!I(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Wo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Z(n.segments,i)&&I(n.segments,i,r)&&n.children[Gt])&&Em(n.children[Gt],e,u,r)}}function I(n,e,t){return e.every((r,i)=>qo[t](n[i].parameters,r.parameters))}class b{constructor(e=new M([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ys(this.queryParams)),this._queryParamMap}toString(){return dt.serialize(this)}}class M{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ct(this)}}class O{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ys(this.parameters)),this._parameterMap}toString(){return vs(this)}}function Z(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new $e},providedIn:"root"}),n})();class $e{parse(e){const t=new u_(e);return new b(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${St(e.root,!0)}`,r=function $a(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Rn(t)}=${Rn(i)}`).join("&"):`${Rn(t)}=${Rn(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Zo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dt=new $e;function Ct(n){return n.segments.map(e=>vs(e)).join("/")}function St(n,e){if(!n.hasChildren())return Ct(n);if(e){const t=n.children[Gt]?St(n.children[Gt],!1):"",r=[];return Object.entries(n.children).forEach(([i,u])=>{i!==Gt&&r.push(`${i}:${St(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function le(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Gt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Gt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Gt?[St(n.children[Gt],!1)]:[`${i}:${St(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Ct(n)}/${t[0]}`:`${Ct(n)}/(${t.join("//")})`}}function Fr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rn(n){return Fr(n).replace(/%3B/gi,";")}function Ko(n){return Fr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bi(n){return decodeURIComponent(n)}function Ti(n){return bi(n.replace(/\+/g,"%20"))}function vs(n){return`${Ko(n.path)}${function ih(n){return Object.keys(n).map(e=>`;${Ko(e)}=${Ko(n[e])}`).join("")}(n.parameters)}`}const Fc=/^[^\/()?;#]+/;function Im(n){const e=n.match(Fc);return e?e[0]:""}const Dm=/^[^\/()?;=#]+/,sh=/^[^=?&#]+/,Cm=/^[^&#]+/;class u_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new M([],{}):new M([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new M(e,t)),r}parseSegment(){const e=Im(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new O(bi(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function np(n){const e=n.match(Dm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Im(this.remaining);i&&(r=i,this.capture(r))}e[bi(t)]=bi(r)}parseQueryParam(e){const t=function o_(n){const e=n.match(sh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function a_(n){const e=n.match(Cm);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ti(t),u=Ti(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Im(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Gt]:new M([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Lc(n){return n.segments.length>0?new M([],{[Gt]:n}):n}function rp(n){const e={};for(const r of Object.keys(n.children)){const u=rp(n.children[r]);if(r===Gt&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function l_(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new M(n.segments.concat(e.segments),e.children)}return n}(new M(n.segments,e))}function Yo(n){return n instanceof b}function bm(n){let e;const i=Lc(function t(u){const l={};for(const _ of u.children){const D=t(_);l[_.outlet]=D}const g=new M(u.url,l);return u===n&&(e=g),g}(n.root));return e??i}function xu(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Ru(i,i,i,t,r);const u=function sp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ip(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,D])=>{g[_]="string"==typeof D?D.split("/"):D}),[...i,{outlets:g}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,u]},[]);return new ip(t,e,r)}(e);if(u.toRoot())return Ru(i,i,new M([],{}),t,r);const l=function Tm(n,e,t){if(n.isAbsolute)return new op(e,!0,0);if(!t)return new op(e,!1,NaN);if(null===t.parent)return new op(t,!0,0);const r=oh(n.commands[0])?0:1;return function bE(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new op(r,!1,i-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,i,n),g=l.processChildren?Uc(l.segmentGroup,l.index,u.commands):ap(l.segmentGroup,l.index,u.commands);return Ru(i,l.segmentGroup,g,t,r)}function oh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vc(n){return"object"==typeof n&&null!=n&&n.outlets}function Ru(n,e,t,r,i){let l,u={};r&&Object.entries(r).forEach(([_,D])=>{u[_]=Array.isArray(D)?D.map(T=>`${T}`):`${D}`}),l=n===e?t:c_(n,e,t);const g=Lc(rp(l));return new b(g,u,i)}function c_(n,e,t){const r={};return Object.entries(n.children).forEach(([i,u])=>{r[i]=u===e?t:c_(u,e,t)}),new M(n.segments,r)}class ip{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oh(r[0]))throw new d.vHH(4003,!1);const i=r.find(Vc);if(i&&i!==ja(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class op{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ap(n,e,t){if(n||(n=new M([],{})),0===n.segments.length&&n.hasChildren())return Uc(n,e,t);const r=function ah(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],g=t[r];if(Vc(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!uh(_,D,l))return u;r+=2}else{if(!uh(_,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new M(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new M(n.segments.slice(r.pathIndex),n.children),Uc(u,0,i)}return r.match&&0===i.length?new M(n.segments,{}):r.match&&!n.hasChildren()?Bc(n,e,t):r.match?Uc(n,0,i):Bc(n,e,t)}function Uc(n,e,t){if(0===t.length)return new M(n.segments,{});{const r=function TE(n){return Vc(n[0])?n[0].outlets:{[Gt]:n}}(t),i={};if(!r[Gt]&&n.children[Gt]&&1===n.numberOfChildren&&0===n.children[Gt].segments.length){const u=Uc(n.children[Gt],e,t);return new M(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[u]=ap(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(i[u]=l)}),new M(n.segments,i)}}function Bc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Vc(u)){const _=Sm(u.outlets);return new M(r,_)}if(0===i&&oh(t[0])){r.push(new O(n.segments[e].path,up(t[0]))),i++;continue}const l=Vc(u)?u.outlets[Gt]:`${u}`,g=i<t.length-1?t[i+1]:null;l&&g&&oh(g)?(r.push(new O(l,up(g))),i+=2):(r.push(new O(l,{})),i++)}return new M(r,{})}function Sm(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Bc(new M([],{}),0,r))}),e}function up(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function uh(n,e,t){return n==t.path&&zr(e,t.parameters)}const _s="imperative";class Us{constructor(e,t){this.id=e,this.url=t}}class bl extends Us{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ws extends Us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Si extends Us{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jc extends Us{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class lp extends Us{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lh extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Am extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cp extends Us{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d_ extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mm extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nm{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lr{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dp{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ch{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qo,this.attachRef=null}}let Qo=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new oi,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$c(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$c(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Hc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hc(e,this._root).map(t=>t.value)}}function $c(n,e){if(n===e.value)return e;for(const t of e.children){const r=$c(n,t);if(r)return r}return null}function Hc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Hc(n,t);if(r.length)return r.unshift(e),r}return[]}class Es{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ou(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fp extends hp{constructor(e,t){super(e),this.snapshot=t,Jo(this,e)}toString(){return this.snapshot.toString()}}function dh(n,e){const t=function Rm(n,e){const l=new Sl([],{},{},"",{},Gt,e,null,{});return new fh("",new Es(l,[]))}(0,e),r=new Pr([new O("",{})]),i=new Pr({}),u=new Pr({}),l=new Pr({}),g=new Pr(""),_=new Vr(r,i,l,g,u,Gt,e,t.root);return _.snapshot=t.root,new fp(new Es(_,[]),t)}class Vr{constructor(e,t,r,i,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Ut.U)(D=>D[Tn]))??Dt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.U)(e=>ys(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.U)(e=>ys(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function hh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Sl{get title(){return this.data?.[Tn]}constructor(e,t,r,i,u,l,g,_,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ys(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ys(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fh extends hp{constructor(e,t){super(t),this.url=e,Jo(this,t)}toString(){return Om(this._root)}}function Jo(n,e){e.value._routerState=n,e.children.forEach(t=>Jo(n,t))}function Om(n){const e=n.children.length>0?` { ${n.children.map(Om).join(", ")} } `:"";return`${n.value}${e}`}function ph(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zr(e.params,t.params)||n.paramsSubject.next(t.params),function rr(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),zr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Gc(n,e){const t=zr(n.params,e.params)&&function $(n,e){return Z(n,e)&&n.every((t,r)=>zr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Gc(n.parent,e.parent))}let Is=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Qo),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Xo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new pp(t,g,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class pp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vr?this.route:e===Qo?this.childContexts:this.parent.get(e,t)}}const Xo=new d.OlP("");let zc=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Go([r.queryParams,r.params,r.data]).pipe(Kn(([u,l,g],_)=>(g={...u,...l,...g},0===_?Dt(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ha(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Wr(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ha(n,r,i);return Ha(n,r)})}(n,e,t);return new Es(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Ha(n,g)),l}}const r=function gp(n){return new Vr(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ha(n,u));return new Es(r,i)}}const qc="ngNavigationCancelingError";function km(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Yo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=go(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function go(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Al(n){return mp(n)&&Yo(n.url)}function mp(n){return n&&n[qc]}let gh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Is],encapsulation:2}),n})();function w(n){const e=n.children&&n.children.map(w),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=gh),t}function S(n){return n.outlet||Gt}function U(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class He{constructor(e,t,r,i,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ph(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ou(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),Object.values(i).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ou(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ou(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ou(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new dp(u.value.snapshot))}),e.children.length&&this.forwardEvent(new p_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(ph(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),ph(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=U(i.snapshot);l.attachRef=null,l.route=i,l.injector=g,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ot{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class it{constructor(e,t){this.component=e,this.route=t}}function On(n,e,t){const r=n._root;return Pu(r,e?e._root:null,t,[r.value])}function ss(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Pu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ou(e);return n.children.forEach(l=>{(function Wc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function Zc(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Z(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Z(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gc(n,e)||!zr(n.queryParams,e.queryParams);default:return!Gc(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new ot(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Pu(n,e,u.component?g?g.children:null:t,r,i),_&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new it(g.outlet.component,l))}else l&&ku(e,g,i),i.canActivateChecks.push(new ot(r)),Pu(n,null,u.component?g?g.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>ku(g,t.getContext(l),i)),i}function ku(n,e,t){const r=Ou(n),i=n.value;Object.entries(r).forEach(([u,l])=>{ku(l,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new it(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ea(n){return"function"==typeof n}function Ep(n){return n instanceof zo||"EmptyError"===n?.name}const yh=Symbol("INITIAL_VALUE");function ta(){return Kn(n=>Go(n.map(e=>e.pipe(ho(1),Fs(yh)))).pipe((0,Ut.U)(e=>{for(const t of e)if(!0!==t){if(t===yh)return yh;if(!1===t||t instanceof b)return t}return!0}),hr(e=>e!==yh),ho(1)))}function __(n){return(0,Rc.z)((0,kr.b)(e=>{if(Yo(e))throw km(0,e)}),(0,Ut.U)(e=>!0===e))}class Dp{constructor(e){this.segmentGroup=e||null}}class Nl{constructor(e){this.urlTree=e}}function vh(n){return Au(new Dp(n))}function xE(n){return Au(new Nl(n))}class IT{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Dt(r);if(i.numberOfChildren>1||!i.children[Gt])return Au(new d.vHH(4e3,!1));i=i.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new b(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[i]=t[g]}else r[i]=u}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,i)}),new M(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const na={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _h(n,e,t,r,i){const u=w_(n,e,t);return u.matched?(r=function yp(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function NE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Dt(i.map(l=>{const g=ss(l,n);return fr(function wp(n){return n&&ea(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(ta(),__()):Dt(!0)}(r,e,t).pipe((0,Ut.U)(l=>!0===l?u:{...na}))):Dt(u)}function w_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...na}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ep)(t,n,e);if(!i)return{...na};const u={};Object.entries(i.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function RE(n,e,t,r){return t.length>0&&function bT(n,e,t){return t.some(r=>Cp(n,e,r)&&S(r)!==Gt)}(n,t,r)?{segmentGroup:new M(e,CT(r,new M(t,n.children))),slicedSegments:[]}:0===t.length&&function TT(n,e,t){return t.some(r=>Cp(n,e,r))}(n,t,r)?{segmentGroup:new M(n.segments,DT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new M(n.segments,n.children),slicedSegments:t}}function DT(n,e,t,r,i){const u={};for(const l of r)if(Cp(n,t,l)&&!i[S(l)]){const g=new M([],{});u[S(l)]=g}return{...i,...u}}function CT(n,e){const t={};t[Gt]=e;for(const r of n)if(""===r.path&&S(r)!==Gt){const i=new M([],{});t[S(r)]=i}return t}function Cp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class NT{constructor(e,t,r,i,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new IT(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=RE(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe(Vs(t=>{if(t instanceof Nl)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dp?this.noMatchError(t):t}),(0,Ut.U)(t=>{const r=new Sl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,{}),i=new Es(r,t),u=new fh("",i),l=function CE(n,e,t=null,r=null){return xu(bm(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Gt).pipe(Vs(r=>{throw r instanceof Dp?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Tl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,fn.D)(i).pipe(fo(u=>{const l=r.children[u],g=function x(n,e){const t=n.filter(r=>S(r)===e);return t.push(...n.filter(r=>S(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),Mu((u,l)=>(u.push(...l),u)),El(null),function Oc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((i,u)=>n(i,u,r)):Ho.y,Nu(1),t?El(e):Ua(()=>new zo))}(),(0,Yn.z)(u=>{if(null===u)return vh(r);const l=wh(u);return function Bm(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),Dt(l)}))}processSegment(e,t,r,i,u,l){return(0,fn.D)(t).pipe(fo(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,i,u,l).pipe(Vs(_=>{if(_ instanceof Dp)return Dt(null);throw _}))),Ls(g=>!!g),Vs(g=>{if(Ep(g))return function AT(n,e,t){return 0===e.length&&!n.children[t]}(r,i,u)?Dt([]):vh(r);throw g}))}processSegmentAgainstRoute(e,t,r,i,u,l,g){return function ST(n,e,t,r){return!!(S(n)===r||r!==Gt&&Cp(e,t,n))&&("**"===n.path||w_(e,n,t).matched)}(r,i,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,u,l):vh(i):vh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xE(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Yn.z)(l=>{const g=new M(l,{});return this.processSegment(e,t,g,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:T}=w_(t,i,u);if(!g)return vh(t);const N=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?xE(N):this.applyRedirects.lineralizeSegments(i,N).pipe((0,Yn.z)(L=>this.processSegment(e,r,t,L.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u,l){let g;if("**"===r.path){const _=i.length>0?ja(i).parameters:{};g=Dt({snapshot:new Sl(i,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,E_(r),S(r),r.component??r._loadedComponent??null,r,I_(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else g=_h(t,r,i,e).pipe((0,Ut.U)(({matched:_,consumedSegments:D,remainingSegments:T,parameters:N})=>_?{snapshot:new Sl(D,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,E_(r),S(r),r.component??r._loadedComponent??null,r,I_(r)),consumedSegments:D,remainingSegments:T}:null));return g.pipe(Kn(_=>null===_?vh(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Kn(({routes:D})=>{const T=r._loadedInjector??e,{snapshot:N,consumedSegments:L,remainingSegments:H}=_,{segmentGroup:Y,slicedSegments:ae}=RE(t,L,H,D);if(0===ae.length&&Y.hasChildren())return this.processChildren(T,D,Y).pipe((0,Ut.U)(Je=>null===Je?null:[new Es(N,Je)]));if(0===D.length&&0===ae.length)return Dt([new Es(N,[])]);const Ie=S(r)===u;return this.processSegment(T,D,Y,ae,Ie?Gt:u,!0).pipe((0,Ut.U)(Je=>[new Es(N,Je)]))}))))}getChildConfig(e,t,r){return t.children?Dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function v_(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Dt(!0):Dt(i.map(l=>{const g=ss(l,n);return fr(function Lm(n){return n&&ea(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(ta(),__())}(e,t,r).pipe((0,Yn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,kr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function ET(n){return Au(go(!1,3))}())):Dt({routes:[],injector:e})}}function Fu(n){const e=n.value.routeConfig;return e&&""===e.path}function wh(n){const e=[],t=new Set;for(const r of n){if(!Fu(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=wh(r.children);e.push(new Es(r.value,i))}return e.filter(r=>!t.has(r))}function E_(n){return n.data||{}}function I_(n){return n.resolve||{}}function RT(n){return"string"==typeof n.title||null===n.title}function jm(n){return Kn(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,Ut.U)(()=>e)):Dt(e)})}const Eh=new d.OlP("ROUTES");let b_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fr(t.loadComponent()).pipe((0,Ut.U)(OE),(0,kr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Dl(()=>{this.componentLoaders.delete(t)})),i=new rh(r,()=>new Zn.x).pipe(Va());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ut.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D;return Array.isArray(g)?D=g:(_=g.create(t).injector,D=_.get(Eh,[],d.XFs.Self|d.XFs.Optional).flat()),{routes:D.map(w),injector:_}}),Dl(()=>{this.childrenLoaders.delete(r)})),l=new rh(u,()=>new Zn.x).pipe(Va());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return fr(t()).pipe((0,Ut.U)(OE),(0,Yn.z)(r=>r instanceof d.YKP||Array.isArray(r)?Dt(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OE(n){return function OT(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let bp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Zn.x,this.configLoader=(0,d.f3M)(b_),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(ze),this.rootContexts=(0,d.f3M)(Qo),this.inputBindingEnabled=null!==(0,d.f3M)(Xo,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Dt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Nm(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new h_(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Pr({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_s,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hr(r=>0!==r.id),(0,Ut.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Kn(r=>{let i=!1,u=!1;return Dt(r).pipe((0,kr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new jc(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Gr.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Tp(l.source)&&(t.browserUrlTree=l.extractedUrl),Dt(l).pipe(Kn(T=>{const N=this.transitions?.getValue();return this.events.next(new bl(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),N!==this.transitions?.getValue()?Gr.E:Promise.resolve(T)}),function Kx(n,e,t,r,i,u){return(0,Yn.z)(l=>function MT(n,e,t,r,i,u,l="emptyOnly"){return new NT(n,e,t,r,i,l,u).recognize()}(n,e,t,r,l.extractedUrl,i,u).pipe((0,Ut.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,kr.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,r.urlAfterRedirects=T.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const L=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(L,T)}t.browserUrlTree=T.urlAfterRedirects}const N=new lh(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(N)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:N,source:L,restoredState:H,extras:Y}=l,ae=new bl(T,this.urlSerializer.serialize(N),L,H);this.events.next(ae);const Ie=dh(0,this.rootComponentType).snapshot;return Dt(r={...l,targetSnapshot:Ie,urlAfterRedirects:N,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new jc(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Gr.E}}),(0,kr.b)(l=>{const g=new Am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,Ut.U)(l=>r={...l,guards:On(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function mT(n,e){return(0,Yn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Dt({...t,guardsResult:!0}):function yT(n,e,t,r){return(0,fn.D)(n).pipe((0,Yn.z)(i=>function Um(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Dt(u.map(g=>{const _=U(e)??i,D=ss(g,_);return fr(function g_(n){return n&&ea(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(Ls())})).pipe(ta()):Dt(!0)}(i.component,i.route,t,e,r)),Ls(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Yn.z)(g=>g&&function Ml(n){return"boolean"==typeof n}(g)?function Zx(n,e,t,r){return(0,fn.D)(e).pipe(fo(i=>co(function y_(n,e){return null!==n&&e&&e(new f_(n)),Dt(!0)}(i.route.parent,r),function vT(n,e){return null!==n&&e&&e(new Lr(n)),Dt(!0)}(i.route,r),function Ip(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function zi(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xc(()=>Dt(l.guards.map(_=>{const D=U(l.node)??t,T=ss(_,D);return fr(function Vm(n){return n&&ea(n.canActivateChild)}(T)?T.canActivateChild(r,n):D.runInContext(()=>T(r,n))).pipe(Ls())})).pipe(ta())));return Dt(u).pipe(ta())}(n,i.path,t),function _T(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Dt(!0);const i=r.map(u=>xc(()=>{const l=U(e)??t,g=ss(u,l);return fr(function mh(n){return n&&ea(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(Ls())}));return Dt(i).pipe(ta())}(n,i.route,t))),Ls(i=>!0!==i,!0))}(r,u,n,e):Dt(g)),(0,Ut.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,kr.b)(l=>{if(r.guardsResult=l.guardsResult,Yo(l.guardsResult))throw km(0,l.guardsResult);const g=new cp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),hr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),jm(l=>{if(l.guards.canActivateChecks.length)return Dt(l).pipe((0,kr.b)(g=>{const _=new d_(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Kn(g=>{let _=!1;return Dt(g).pipe(function Yx(n,e){return(0,Yn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Dt(t);let u=0;return(0,fn.D)(i).pipe(fo(l=>function Qx(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!RT(i)&&(u[Tn]=i.title),function D_(n,e,t,r){const i=function C_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Dt({});const u={};return(0,fn.D)(i).pipe((0,Yn.z)(l=>function Jx(n,e,t,r){const i=U(e)??r,u=ss(n,i);return fr(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Ls(),(0,kr.b)(g=>{u[l]=g}))),Nu(1),function po(n){return(0,Ut.U)(()=>n)}(u),Vs(l=>Ep(l)?Gr.E:Au(l)))}(u,n,e,r).pipe((0,Ut.U)(l=>(n._resolvedData=l,n.data=Tl(n,t).resolve,i&&RT(i)&&(n.data[Tn]=i.title),null)))}(l.route,r,n,e)),(0,kr.b)(()=>u++),Nu(1),(0,Yn.z)(l=>u===i.length?Dt(t):Gr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,kr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,kr.b)(g=>{const _=new Mm(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),jm(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,kr.b)(T=>{_.component=T}),(0,Ut.U)(()=>{})));for(const T of _.children)D.push(...g(T));return D};return Go(g(l.targetSnapshot.root)).pipe(El(),ho(1))}),jm(()=>this.afterPreactivation()),(0,Ut.U)(l=>{const g=function Pm(n,e,t){const r=Ha(n,e._root,t?t._root:void 0);return new fp(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,kr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Ut.U)(i=>(new He(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ho(1),(0,kr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ws(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Dl(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Vs(l=>{if(u=!0,mp(l)){Al(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),Al(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Tp(r.source)};t.scheduleNavigation(_,_s,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new lp(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Gr.E}))}))}cancelNavigationTransition(t,r,i){const u=new Si(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tp(n){return n!==_s}let T_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Tn]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(S_)},providedIn:"root"}),n})(),S_=(()=>{class n extends T_{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(PE)},providedIn:"root"}),n})();class Sr{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let PE=(()=>{class n extends Sr{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $m=new d.OlP("",{providedIn:"root",factory:()=>({})});let kE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(FE)},providedIn:"root"}),n})(),FE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Bs=(()=>((Bs=Bs||{})[Bs.COMPLETE=0]="COMPLETE",Bs[Bs.FAILED=1]="FAILED",Bs[Bs.REDIRECTING=2]="REDIRECTING",Bs))();function LE(n,e){n.events.pipe(hr(t=>t instanceof ws||t instanceof Si||t instanceof lp||t instanceof jc),(0,Ut.U)(t=>t instanceof ws||t instanceof jc?Bs.COMPLETE:t instanceof Si&&(0===t.code||1===t.code)?Bs.REDIRECTING:Bs.FAILED),hr(t=>t!==Bs.REDIRECTING),ho(1)).subscribe(()=>{e()})}function kT(n){throw n}function FT(n,e,t){return e.parse("/")}const VE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)($m,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||kT,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||FT,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(kE),this.routeReuseStrategy=(0,d.f3M)(PT),this.titleStrategy=(0,d.f3M)(T_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(Eh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(bp),this.urlSerializer=(0,d.f3M)(ze),this.location=(0,d.f3M)(ue),this.componentInputBindingEnabled=!!(0,d.f3M)(Xo,{optional:!0}),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new b,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dh(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_s,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(w),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let N,T=null;switch(g){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}null!==T&&(T=this.removeEmptyProps(T));try{N=bm(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return xu(N,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Yo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,_s,null,r)}navigate(t,r={skipLocationChange:!1}){return function Sp(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...VE}:!1===r?{...Xx}:r,Yo(t))return tp(this.currentUrlTree,t,i);const u=this.parseUrl(t);return tp(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D;l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((N,L)=>{g=N,_=L});const T=this.pendingTasks.add();return LE(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(T))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xt=(()=>{class n{constructor(t,r,i,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this.locationStrategy=g,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Zn.x;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof ws&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(os),d.Y36(Vr),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Be))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class A_{}let VT=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(hr(t=>t instanceof ws),fo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,fn.D)(i).pipe((0,ks.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Dt(null);const u=i.pipe((0,Yn.z)(l=>null===l?Dt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([u,l]).pipe((0,ks.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(os),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(A_),d.LFG(b_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hm=new d.OlP("");let M_=(()=>{class n{constructor(t,r,i,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ws?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof jc&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ch&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ch(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ra(n,e){return{\u0275kind:n,\u0275providers:e}}function xl(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(os),i=n.get(HE);1===n.get(Mp)&&r.initialNavigation(),n.get(Np,null,d.XFs.Optional)?.setUpPreloading(),n.get(Hm,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const HE=new d.OlP("",{factory:()=>new Zn.x}),Mp=new d.OlP("",{providedIn:"root",factory:()=>1}),Np=new d.OlP("");function Kc(n){return ra(0,[{provide:Np,useExisting:VT},{provide:A_,useExisting:n}])}const Yc=new d.OlP("ROUTER_FORROOT_GUARD"),qT=[ue,{provide:ze,useClass:$e},os,Qo,{provide:Vr,useFactory:function UT(n){return n.routerState.root},deps:[os]},b_,[]];function WT(){return new d.PXZ("Router",os)}let WE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[qT,[],{provide:Eh,multi:!0,useValue:t},{provide:Yc,useFactory:KE,deps:[[os,new d.FiY,new d.tp0]]},{provide:$m,useValue:r||{}},r?.useHash?{provide:Be,useClass:pt}:{provide:Be,useClass:rt},{provide:Hm,useFactory:()=>{const n=(0,d.f3M)(Ii),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)($m),r=(0,d.f3M)(bp),i=(0,d.f3M)(ze);return t.scrollOffset&&n.setOffset(t.scrollOffset),new M_(i,r,n,e,t)}},r?.preloadingStrategy?Kc(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:WT},r?.initialNavigation?x_(r):[],r?.bindToComponentInputs?ra(8,[zc,{provide:Xo,useExisting:zc}]).\u0275providers:[],[{provide:KT,useFactory:xl},{provide:d.tb,multi:!0,useExisting:KT}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Eh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yc,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function KE(n){return"guarded"}function x_(n){return["disabled"===n.initialNavigation?ra(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(os);return()=>{e.setUpLocationChangeListener()}}},{provide:Mp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ra(2,[{provide:Mp,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(De,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(os),u=e.get(HE);LE(i,()=>{r(!0)}),e.get(bp).afterPreactivation=()=>(r(!0),u.closed?Dt(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const KT=new d.OlP("");let zm=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ia=(()=>{class n extends zm{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const mo=new d.OlP("NgValueAccessor"),qm={provide:mo,useExisting:(0,d.Gpc)(()=>Ga),multi:!0},YE=new d.OlP("CompositionEventMode");let Ga=(()=>{class n extends zm{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xp(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(YE,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([qm]),d.qOj]}),n})();function sa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function QT(n){return null!=n&&"number"==typeof n.length}const ai=new d.OlP("NgValidators"),za=new d.OlP("NgAsyncValidators"),QE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rl{static min(e){return function JE(n){return e=>{if(sa(e.value)||sa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function k_(n){return e=>{if(sa(e.value)||sa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function F_(n){return sa(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function XE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function eI(n){return sa(n.value)||QE.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function JT(n){return e=>sa(e.value)||!QT(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function tI(n){return e=>QT(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return Wm(e)}static nullValidator(e){return null}static compose(e){return rI(e)}static composeAsync(e){return eS(e)}}function Wm(n){if(!n)return Dh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(sa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Dh(n){return null}function nI(n){return null!=n}function L_(n){return(0,d.QGY)(n)?(0,fn.D)(n):n}function Zm(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rp(n,e){return e.map(t=>t(n))}function V_(n){return n.map(e=>function XT(n){return!n.validate}(e)?e:t=>e.validate(t))}function rI(n){if(!n)return null;const e=n.filter(nI);return 0==e.length?null:function(t){return Zm(Rp(t,e))}}function Km(n){return null!=n?rI(V_(n)):null}function eS(n){if(!n)return null;const e=n.filter(nI);return 0==e.length?null:function(t){return function O_(...n){const e=(0,$o.jO)(n),{args:t,keys:r}=Gi(n),i=new rs.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let T=0;T<l;T++){let N=!1;(0,is.Xf)(t[T]).subscribe((0,br.x)(u,L=>{N||(N=!0,D--),g[T]=L},()=>_--,void 0,()=>{(!_||!N)&&(D||u.next(r?La(r,g):g),u.complete())}))}});return e?i.pipe(si(e)):i}(Rp(t,e).map(L_)).pipe((0,Ut.U)(Zm))}}function U_(n){return null!=n?eS(V_(n)):null}function Ch(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iI(n){return n._rawValidators}function Qc(n){return n._rawAsyncValidators}function Jc(n){return n?Array.isArray(n)?n:[n]:[]}function Ym(n,e){return Array.isArray(n)?n.includes(e):n===e}function B_(n,e){const t=Jc(e);return Jc(n).forEach(i=>{Ym(t,i)||t.push(i)}),t}function sI(n,e){return Jc(e).filter(t=>!Ym(n,t))}class oI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Km(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class as extends oI{get formDirective(){return null}get path(){return null}}class Lu extends oI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class j_{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xc=(()=>{class n extends j_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lu,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Ol=(()=>{class n extends j_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(as,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const ey="VALID",$_="INVALID",ed="PENDING",Th="DISABLED";function lI(n){return(Pp(n)?n.validators:n)||null}function Sh(n,e){return(Pp(e)?e.asyncValidators:n)||null}function Pp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function H_(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function zt(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class kp{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ey}get invalid(){return this.status===$_}get pending(){return this.status==ed}get disabled(){return this.status===Th}get enabled(){return this.status!==Th}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sI(e,this._rawAsyncValidators))}hasValidator(e){return Ym(this._rawValidators,e)}hasAsyncValidator(e){return Ym(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ed,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Th,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ey,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ey||this.status===ed)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Th:ey}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ed,this._hasOwnPendingAsyncValidator=!0;const t=L_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Th:this.errors?$_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ed)?ed:this._anyControlsHaveStatus($_)?$_:ey}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cI(n){return Array.isArray(n)?Km(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dI(n){return Array.isArray(n)?U_(n):n||null}(this._rawAsyncValidators)}}class Pl extends kp{constructor(e,t,r){super(lI(t),Sh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zt(this,0,e),Object.keys(e).forEach(r=>{H_(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class G_ extends Pl{}const td=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ah}),Ah="always";function Mh(n,e,t=Ah){iy(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function kl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&z_(n,e)})}(n,e),function rS(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Nh(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&z_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ny(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Fp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ry(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iy(n,e){const t=iI(n);null!==e.validator?n.setValidators(Ch(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Qc(n);null!==e.asyncValidator?n.setAsyncValidators(Ch(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ry(e._rawValidators,i),ry(e._rawAsyncValidators,i)}function Fp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=iI(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=Qc(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ry(e._rawValidators,r),ry(e._rawAsyncValidators,r),t}function z_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Up(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function q_(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Ga?t=u:function gI(n){return Object.getPrototypeOf(n.constructor)===ia}(u)?r=u:i=u}),i||r||t||null}function yI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yo=class extends kp{constructor(e=null,t,r){super(lI(t),Sh(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Wa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const uS={provide:mo,useExisting:(0,d.Gpc)(()=>Y_),multi:!0};let Y_=(()=>{class n extends ia{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([uS]),d.qOj]}),n})(),II=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const jp=new d.OlP("NgModelWithFormControlWarning"),dS={provide:Lu,useExisting:(0,d.Gpc)(()=>ay)};let ay=(()=>{class n extends Lu{set isDisabled(t){}constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=u,this.callSetDisabledState=l,this.update=new d.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=q_(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&ny(r,this,!1),Mh(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Up(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ny(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ai,10),d.Y36(za,10),d.Y36(mo,10),d.Y36(jp,8),d.Y36(td,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[d._Bn([dS]),d.qOj,d.TTD]}),n})();const hS={provide:as,useExisting:(0,d.Gpc)(()=>Fl)};let Fl=(()=>{class n extends as{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Mh(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ny(t.control||null,t,!1),function iS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function oy(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ny(r||null,t),(n=>n instanceof yo)(i)&&(Mh(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Lp(n,e){iy(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xh(n,e){return Fp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iy(this.form,this),this._oldForm&&Fp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ai,10),d.Y36(za,10),d.Y36(td,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([hS]),d.qOj,d.TTD]}),n})();const TI={provide:Lu,useExisting:(0,d.Gpc)(()=>nd)};let nd=(()=>{class n extends Lu{set isDisabled(t){}constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=q_(0,u)}ngOnChanges(t){this._added||this._setUpControl(),Up(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ty(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(as,13),d.Y36(ai,10),d.Y36(za,10),d.Y36(mo,10),d.Y36(jp,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([TI]),d.qOj,d.TTD]}),n})(),aa=(()=>{class n{constructor(){this._validator=Dh}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const ES={provide:ai,useExisting:(0,d.Gpc)(()=>rd),multi:!0};let rd=(()=>{class n extends aa{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>Wm(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[d._Bn([ES]),d.qOj]}),n})(),PI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[II]}),n})();class kI extends kp{constructor(e,t,r){super(lI(t),Sh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zt(this,0,e),e.forEach((r,i)=>{H_(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function FI(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let s0=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return FI(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Pl(i,u)}record(t,r=null){const i=this._reduceControls(t);return new G_(i,r)}control(t,r,i){let u={};return this.useNonNullable?(FI(r)?u=r:(u.validators=r,u.asyncValidators=i),new yo(t,{...u,nonNullable:!0})):new yo(t,r,i)}array(t,r,i){const u=t.map(l=>this._createControl(l));return new kI(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof yo||t instanceof kp?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),o0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:td,useValue:t.callSetDisabledState??Ah}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[PI]}),n})(),VI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jp,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:td,useValue:t.callSetDisabledState??Ah}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[PI]}),n})();var DS=F(6451),dy=F(5363),CS=F(6063);class bS extends Zn.x{constructor(e=1/0,t=1/0,r=CS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var TS=F(3099);function UI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,TS.B)({connector:()=>new bS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function a0(n,e){return(0,lo.m)(e)?Kn(()=>n,e):Kn(()=>n)}var hy=F(9468),qi=F(4976),Za=F(2011);F(259);var he=F(5861),_o=F(6881),ju=F(4859),tn=F(2090),js=F(1877);const py=new Map,d0={activated:!1,tokenObservers:[]},jI={initialized:!1,enabled:!1};function ir(n){return py.get(n)||Object.assign({},d0)}function Yp(){return jI}const gy="https://content-firebaseappcheck.googleapis.com/v1",h0="exchangeDebugToken",zI={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class SR{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new tn.BH,yield function AS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new tn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Zi=new tn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qI(n){if(!ir(n).activated)throw Zi.create("use-before-activation",{appName:n.name})}function vy(n,e){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const N=yield i.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(N){throw Zi.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw Zi.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(N){throw Zi.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}})).apply(this,arguments)}function Xp(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${gy}/projects/${t}/apps/${r}:${h0}?key=${i}`,body:{debug_token:e}}}const WI="firebase-app-check-database",eg=1,kh="firebase-app-check-store";let Ll=null;function Fh(){return(Fh=(0,he.Z)(function*(n,e){const r=(yield function KI(){return Ll||(Ll=new Promise((n,e)=>{try{const t=indexedDB.open(WI,eg);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Zi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kh,{keyPath:"compositeKey"})}}catch(t){e(Zi.create("storage-open",{originalErrorMessage:t?.message}))}}),Ll)}()).transaction(kh,"readwrite"),u=r.objectStore(kh).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(Zi.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const id=new js.Yd("@firebase/app-check");function y0(n,e){return(0,tn.hl)()?function xS(n,e){return function tg(n,e){return Fh.apply(this,arguments)}(function YI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{id.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ey(){return Yp().enabled}function Iy(){return v0.apply(this,arguments)}function v0(){return(v0=(0,he.Z)(function*(){const n=Yp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const LS={error:"UNKNOWN_ERROR"};function VS(n){return tn.US.encodeString(JSON.stringify(n),!1)}function Lh(n){return ng.apply(this,arguments)}function ng(){return(ng=(0,he.Z)(function*(n,e=!1){const t=n.app;qI(t);const r=ir(t);let u,i=r.token;if(i&&!Bh(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Bh(_)?i=_:yield y0(t,void 0))}if(!e&&i&&Bh(i))return{token:i.token};let g,l=!1;if(Ey()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vy(Xp(t,yield Iy()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield y0(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ir(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?id.warn(_.message):id.error(_),u=_}return i?u?g=Bh(i)?{token:i.token,internalError:u}:ig(u):(g={token:i.token},r.token=i,yield y0(t,i)):g=ig(u),l&&function JI(n,e){const t=ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g})).apply(this,arguments)}function QI(n){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,he.Z)(function*(n){const e=n.app;qI(e);const{provider:t}=ir(e);if(Ey()){const r=yield Iy(),{token:i}=yield vy(Xp(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function rg(n,e){const t=ir(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _0(n){const{app:e}=n,t=ir(e);let r=t.tokenRefresher;r||(r=function US(n){const{app:e}=n;return new SR((0,he.Z)(function*(){let r;if(r=ir(e).token?yield Lh(n,!0):yield Lh(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},zI.RETRIAL_MIN_WAIT,zI.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Bh(n){return n.expireTimeMillis-Date.now()>0}function ig(n){return{token:VS(LS),error:n}}class Dy{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ir(this.app);for(const t of e)rg(this.app,t.next);return Promise.resolve()}}const $u="app-check-internal";!function ZS(){(0,_o._registerComponent)(new ju.wA("app-check",n=>function XI(n,e){return new Dy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($u).initialize()})),(0,_o._registerComponent)(new ju.wA($u,n=>function eD(n){return{getToken:e=>Lh(n,e),getLimitedUseToken:()=>QI(n),addTokenListener:e=>function Uh(n,e,t,r){const{app:i}=n,u=ir(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Bh(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),_0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>_0(n))}(n,"INTERNAL",e),removeTokenListener:e=>rg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_o.registerVersion)("@firebase/app-check","0.8.0")}();class Hu{constructor(){return(0,qi.vb)("app-check")}}typeof window<"u"&&window;var Vl=F(9260);const sd=new d.OlP("angularfire2.auth.use-emulator"),fD=new d.OlP("angularfire2.auth.settings"),pD=new d.OlP("angularfire2.auth.tenant-id"),T0=new d.OlP("angularfire2.auth.langugage-code"),gD=new d.OlP("angularfire2.auth.use-device-language"),S0=new d.OlP("angularfire.auth.persistence"),eA=(n,e,t,r,i,u,l,g)=>(0,Za.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),l)for(const[D,T]of Object.entries(l))_.settings[D]=T;return g&&_.setPersistence(g),_},[t,r,i,u,l,g]);let jh=(()=>{class n{constructor(t,r,i,u,l,g,_,D,T,N,L,H){const Y=new Zn.x,ae=Dt(void 0).pipe((0,dy.Q)(l.outsideAngular),Kn(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2644)))),(0,Ut.U)(()=>(0,Za.on)(t,u,r)),(0,Ut.U)(Ie=>eA(Ie,u,g,D,T,N,_,L)),UI({bufferSize:1,refCount:!1}));if(lu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dt(null);else{ae.pipe(Ls()).subscribe();const Je=ae.pipe(Kn(ht=>ht.getRedirectResult().then(Ft=>Ft,()=>null)),qi.iC,UI({bufferSize:1,refCount:!1})),ct=ae.pipe(Kn(ht=>new rs.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>ht.onAuthStateChanged(qt=>Ft.next(qt),qt=>Ft.error(qt),()=>Ft.complete()))})))),lt=ae.pipe(Kn(ht=>new rs.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>ht.onIdTokenChanged(qt=>Ft.next(qt),qt=>Ft.error(qt),()=>Ft.complete()))}))));this.authState=Je.pipe(a0(ct),(0,hy.R)(l.outsideAngular),(0,dy.Q)(l.insideAngular)),this.user=Je.pipe(a0(lt),(0,hy.R)(l.outsideAngular),(0,dy.Q)(l.insideAngular)),this.idToken=this.user.pipe(Kn(ht=>ht?(0,fn.D)(ht.getIdToken()):Dt(null))),this.idTokenResult=this.user.pipe(Kn(ht=>ht?(0,fn.D)(ht.getIdTokenResult()):Dt(null))),this.credential=(0,DS.T)(Je,Y,this.authState.pipe(hr(ht=>!ht))).pipe((0,Ut.U)(ht=>ht?.user?ht:null),(0,hy.R)(l.outsideAngular),(0,dy.Q)(l.insideAngular))}return(0,Za.pX)(this,ae,u,{spy:{apply:(Ie,Je,ct)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&ct.then(lt=>Y.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Za.Dh),d.LFG(Za.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qi.HU),d.LFG(sd,8),d.LFG(fD,8),d.LFG(pD,8),d.LFG(T0,8),d.LFG(gD,8),d.LFG(S0,8),d.LFG(Hu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ds(n){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Ve(n,e,t){return(e=function yD(n){var e=function tA(n,e){if("object"!==Ds(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!==Ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===Ds(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class wo{}class la{}const Ka="*";function vD(n,e){return{type:7,name:n,definitions:e,options:{}}}function _D(n,e=null){return{type:4,styles:e,timings:n}}function wD(n,e=null){return{type:2,steps:n,options:e}}function ug(n){return{type:6,styles:n,offset:null}}function lg(n,e,t){return{type:0,name:n,styles:e,options:t}}function ED(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cg(n){Promise.resolve().then(n)}class dg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cg(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class A0{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?cg(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==u&&this._onFinish()}),l.onDestroy(()=>{++r==u&&this._onDestroy()}),l.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((l,g)=>Math.max(l,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Ay="!",M0=["toast-component",""];function sA(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function oA(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function N0(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,oA,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function My(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function ID(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function DD(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class uA{constructor(e,t){Ve(this,"_attachedHost",void 0),Ve(this,"component",void 0),Ve(this,"viewContainerRef",void 0),Ve(this,"injector",void 0),this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lA{constructor(){Ve(this,"_attachedPortal",void 0),Ve(this,"_disposeFn",void 0)}attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class cA{constructor(e){Ve(this,"_overlayRef",void 0),Ve(this,"componentInstance",void 0),Ve(this,"duplicatesCount",0),Ve(this,"_afterClosed",new Zn.x),Ve(this,"_activate",new Zn.x),Ve(this,"_manualClose",new Zn.x),Ve(this,"_resetTimeout",new Zn.x),Ve(this,"_countDuplicate",new Zn.x),this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Ny{constructor(e,t,r,i,u,l){Ve(this,"toastId",void 0),Ve(this,"config",void 0),Ve(this,"message",void 0),Ve(this,"title",void 0),Ve(this,"toastType",void 0),Ve(this,"toastRef",void 0),Ve(this,"_onTap",new Zn.x),Ve(this,"_onAction",new Zn.x),this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const xD=new d.OlP("ToastConfig");class dA extends lA{constructor(e,t,r){super(),Ve(this,"_hostDomElement",void 0),Ve(this,"_componentFactoryResolver",void 0),Ve(this,"_appRef",void 0),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let hA=(()=>{class n{constructor(){Ve(this,"_document",(0,d.f3M)(ne)),Ve(this,"_containerElement",void 0)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return Ve(n,"\u0275fac",function(t){return new(t||n)}),Ve(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();class fA{constructor(e){Ve(this,"_portalHost",void 0),this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let pA=(()=>{class n{constructor(){Ve(this,"_overlayContainer",(0,d.f3M)(hA)),Ve(this,"_componentFactoryResolver",(0,d.f3M)(d._Vd)),Ve(this,"_appRef",(0,d.f3M)(d.z2F)),Ve(this,"_document",(0,d.f3M)(ne)),Ve(this,"_paneElements",new Map)}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new dA(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new fA(this._createPortalHost(t))}}return Ve(n,"\u0275fac",function(t){return new(t||n)}),Ve(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})(),$h=(()=>{class n{constructor(t,r,i,u,l){Ve(this,"overlay",void 0),Ve(this,"_injector",void 0),Ve(this,"sanitizer",void 0),Ve(this,"ngZone",void 0),Ve(this,"toastrConfig",void 0),Ve(this,"currentlyActive",0),Ve(this,"toasts",[]),Ve(this,"overlayContainer",void 0),Ve(this,"previousToastMessage",void 0),Ve(this,"index",0),this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=l,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:l}=this.toastrConfig;for(const g of this.toasts)if((!l||l&&g.title===t)&&g.message===r)return g.toastRef.onDuplicate(i,u),g;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let g=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(g=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let D=r;r&&u.enableHtml&&(D=this.sanitizer.sanitize(d.q3G.HTML,r));const T=new cA(_),N=new Ny(this.index,u,D,i,t,T),H=d.zs3.create({providers:[{provide:Ny,useValue:N}],parent:this._injector}),Y=new uA(u.toastComponent,H),ae=_.attach(Y,u.newestOnTop);T.componentInstance=ae.instance;const Ie={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:N.onTap(),onAction:N.onAction(),portal:ae};return g||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ie.toastRef.activate()})),this.toasts.push(Ie),Ie}}return Ve(n,"\u0275fac",function(t){return new(t||n)(d.LFG(xD),d.LFG(pA),d.LFG(d.zs3),d.LFG(Bo),d.LFG(d.R0b))}),Ve(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();const gA={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){Ve(this,"toastrService",void 0),Ve(this,"toastPackage",void 0),Ve(this,"ngZone",void 0),Ve(this,"message",void 0),Ve(this,"title",void 0),Ve(this,"options",void 0),Ve(this,"duplicatesCount",void 0),Ve(this,"originalTimeout",void 0),Ve(this,"width",-1),Ve(this,"toastClasses",""),Ve(this,"state",void 0),Ve(this,"timeout",void 0),Ve(this,"intervalId",void 0),Ve(this,"hideTime",void 0),Ve(this,"sub",void 0),Ve(this,"sub1",void 0),Ve(this,"sub2",void 0),Ve(this,"sub3",void 0),this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return Ve(n,"\u0275fac",function(t){return new(t||n)(d.Y36($h),d.Y36(Ny),d.Y36(d.R0b))}),Ve(n,"\u0275cmp",d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},standalone:!0,features:[d.jDz],attrs:M0,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,sA,3,0,"button",0),d.YNc(1,N0,3,5,"div",1),d.YNc(2,My,1,3,"div",2),d.YNc(3,ID,2,4,"div",3),d.YNc(4,DD,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[Xs],encapsulation:2,data:{animation:[vD("flyInOut",[lg("inactive",ug({opacity:0})),lg("active",ug({opacity:1})),lg("removed",ug({opacity:0})),ED("inactive => active",_D("{{ easeTime }}ms {{ easing }}")),ED("active => removed",_D("{{ easeTime }}ms {{ easing }}"))])]}})),n})()},mA=(n={})=>(0,d.MR2)([{provide:xD,useValue:{default:gA,config:n}}]);let yA=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[mA(t)]}}}return Ve(n,"\u0275fac",function(t){return new(t||n)}),Ve(n,"\u0275mod",d.oAB({type:n})),Ve(n,"\u0275inj",d.cJS({})),n})(),RD=(()=>{class n{constructor(t,r,i,u){this.fb=t,this.afAuth=r,this.toastr=i,this.router=u,this.cargando=!1,this.loginU=this.fb.group({email:["",Rl.required],contra:["",Rl.required]})}login(){const t=this.loginU.value.email,r=this.loginU.value.contra;this.cargando=!0,this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{console.log(i),this.toastr.success("Login exitoso","Mensaje"),this.router.navigate(["/dashboard"]),this.cargando=!1}).catch(i=>{this.toastr.error("Login fall\xf3","Mensaje"),console.log(i),this.cargando=!1})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(s0),d.Y36(jh),d.Y36($h),d.Y36(os))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:1,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/email.png","alt","login",1,"loginImg"],[1,"titulo","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","placeholder","name@example.com",1,"form-control"],[1,"form-floating"],["type","password","formControlName","contra","placeholder","Password",1,"form-control","mb-3"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg"],["routerLink","/"],["routerLink","/recuperacion",1,"mt-3"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Login"),d.qZA(),d.TgZ(5,"form",4),d.NdJ("ngSubmit",function(){return r.login()}),d.TgZ(6,"div",5),d._UZ(7,"input",6),d.TgZ(8,"label"),d._uU(9,"Email address"),d.qZA()(),d.TgZ(10,"div",7),d._UZ(11,"input",8),d.TgZ(12,"label"),d._uU(13,"Password"),d.qZA()(),d.TgZ(14,"div",9)(15,"button",10),d._uU(16,"Ingresar"),d.qZA()(),d.TgZ(17,"a",11),d._uU(18,"Men\xfa principal"),d.qZA(),d._UZ(19,"br"),d.TgZ(20,"a",12),d._uU(21,"Olvid\xe9 mi contrase\xf1a"),d.qZA()()()()),2&t&&(d.xp6(5),d.Q6J("formGroup",r.loginU))},dependencies:[Xt,Wa,Ga,Xc,Ol,Fl,nd]}),n})(),OD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-recuperar-contra"]],decls:15,vars:0,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/password.png","alt","password",1,"loginImg"],[1,"titulo","mb-3"],[1,"form-floating","mb-3"],["type","email","placeholder","name@example.com",1,"form-control"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg"],["routerLink","/login"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Recuperaci\xf3n de contrase\xf1a"),d.qZA(),d.TgZ(5,"form")(6,"div",4),d._UZ(7,"input",5),d.TgZ(8,"label"),d._uU(9,"Email address"),d.qZA()(),d.TgZ(10,"div",6)(11,"button",7),d._uU(12,"Recuperar"),d.qZA()(),d.TgZ(13,"a",8),d._uU(14,"Volver"),d.qZA()()()())},dependencies:[Xt,Wa,Ol]}),n})();F(2644);var PD=F(4986);function xy(){return(0,Tr.e)((n,e)=>{let t,r=!1;n.subscribe((0,br.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function FD(n,e){return n===e}var st,LD=F(3942),x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ai={},R0=R0||{},Ot=x0||self;function O0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function od(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ry="closure_uid_"+(1e9*Math.random()>>>0),VD=0;function BR(n,e,t){return n.call.apply(n.bind,arguments)}function Mt(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ki(n,e,t){return(Ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?BR:Mt).apply(null,arguments)}function Oy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[i].apply(r,l)}}function $s(){this.s=this.s,this.o=this.o}$s.prototype.s=!1,$s.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function UR(n){Object.prototype.hasOwnProperty.call(n,Ry)&&n[Ry]||(n[Ry]=++VD)}(this)},$s.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Hh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function sr(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(O0(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function us(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}us.prototype.h=function(){this.defaultPrevented=!0};var UD=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",()=>{},e),Ot.removeEventListener("test",()=>{},e)}catch{}return n}();function Gh(n){return/^[\s\xa0]*$/.test(n)}function Py(){var n=Ot.navigator;return n&&(n=n.userAgent)?n:""}function ca(n){return-1!=Py().indexOf(n)}function ky(n){return ky[" "](n),n}ky[" "]=function(){};var k0,n,jD=ca("Opera"),zh=ca("Trident")||ca("MSIE"),$D=ca("Edge"),P0=$D||zh,qh=ca("Gecko")&&!(-1!=Py().toLowerCase().indexOf("webkit")&&!ca("Edge"))&&!(ca("Trident")||ca("MSIE"))&&!ca("Edge"),IA=-1!=Py().toLowerCase().indexOf("webkit")&&!ca("Edge");function HD(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Wh="",Fy=(n=Py(),qh?/rv:([^\);]+)(\)|;)/.exec(n):$D?/Edge\/([\d\.]+)/.exec(n):zh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IA?/WebKit\/(\S+)/.exec(n):jD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fy&&(Wh=Fy?Fy[1]:""),zh){var Ly=HD();if(null!=Ly&&Ly>parseFloat(Wh)){k0=String(Ly);break e}}k0=Wh}var fg=Ot.document&&zh&&(HD()||parseInt(k0,10))||void 0;function Gu(n,e){if(us.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qh){e:{try{ky(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:DA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gu.$.h.call(this)}}ui(Gu,us);var DA={2:"touch",3:"pen",4:"mouse"};Gu.prototype.h=function(){Gu.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pg="closure_listenable_"+(1e6*Math.random()|0),CA=0;function zD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++CA,this.fa=this.ia=!1}function gg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Uy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function F0(n){const e={};for(const t in n)e[t]=n[t];return e}const qD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<qD.length;u++)t=qD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function L0(n){this.src=n,this.g={},this.h=0}function ZD(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=hg(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(gg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function KD(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}L0.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=KD(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new zD(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var YD="closure_lm_"+(1e6*Math.random()|0),By={};function mg(n,e,t,r,i){if(r&&r.once)return V0(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)mg(n,e[u],t,r,i);return null}return t=j0(t),n&&n[pg]?n.O(e,t,od(r)?!!r.capture:!!r,i):QD(n,e,t,!1,r,i)}function QD(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=od(i)?!!i.capture:!!i,g=B0(n);if(g||(n[YD]=g=new L0(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function TA(){const e=SA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)UD||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(JD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function V0(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)V0(n,e[u],t,r,i);return null}return t=j0(t),n&&n[pg]?n.P(e,t,od(r)?!!r.capture:!!r,i):QD(n,e,t,!0,r,i)}function Zh(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Zh(n,e[u],t,r,i);else r=od(r)?!!r.capture:!!r,t=j0(t),n&&n[pg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=KD(u=n.g[e],t,r,i))&&(gg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=B0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=KD(e,t,r,i)),(t=-1<n?e[n]:null)&&U0(t))}function U0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[pg])ZD(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(JD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=B0(e))?(ZD(t,n),0==t.h&&(t.src=null,e[YD]=null)):gg(n)}}}function JD(n){return n in By?By[n]:By[n]="on"+n}function SA(n,e){if(n.fa)n=!0;else{e=new Gu(e,this);var t=n.listener,r=n.la||n.src;n.ia&&U0(n),n=t.call(r,e)}return n}function B0(n){return(n=n[YD])instanceof L0?n:null}var XD="__closure_events_fn_"+(1e9*Math.random()>>>0);function j0(n){return"function"==typeof n?n:(n[XD]||(n[XD]=function(e){return n.handleEvent(e)}),n[XD])}function Kr(){$s.call(this),this.i=new L0(this),this.S=this,this.J=null}function Mi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new us(e,n);else if(e instanceof us)e.target=e.target||n;else{var i=e;WD(e=new us(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=jy(l,r,!0,e)&&i}if(i=jy(l=e.g=n,r,!0,e)&&i,i=jy(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=jy(l=e.g=t[u],r,!1,e)&&i}function jy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&ZD(n.i,l),i=!1!==g.call(_,r)&&i}}return i&&!r.defaultPrevented}ui(Kr,$s),Kr.prototype[pg]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){Zh(this,n,e,t,r)},Kr.prototype.N=function(){if(Kr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gg(t[r]);delete n.g[e],n.h--}}this.J=null},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ad=Ot.JSON.stringify;function eC(){var n=$y;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $0=new class AA{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new NA,n=>n.reset());class NA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xA(n){Ot.setTimeout(()=>{throw n},0)}let ud,yg=!1,$y=new class MA{constructor(){this.h=this.g=null}add(e,t){const r=$0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},H0=()=>{const n=Ot.Promise.resolve(void 0);ud=()=>{n.then(RA)}};var RA=()=>{for(var n;n=eC();){try{n.h.call(n.g)}catch(t){xA(t)}var e=$0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yg=!1};function Hy(n,e){Kr.call(this),this.h=n||1,this.g=e||Ot,this.j=Ki(this.qb,this),this.l=Date.now()}function G0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vg(n,e,t){if("function"==typeof n)t&&(n=Ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function nC(n){n.g=vg(()=>{n.g=null,n.i&&(n.i=!1,nC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(Hy,Kr),(st=Hy.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mi(this,"tick"),this.ga&&(G0(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){Hy.$.N.call(this),G0(this),delete this.g};class rC extends $s{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nC(this)}N(){super.N(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _g(n){$s.call(this),this.h=n,this.g={}}ui(_g,$s);var iC=[];function sC(n,e,t,r){Array.isArray(t)||(t&&(iC[0]=t.toString()),t=iC);for(var i=0;i<t.length;i++){var u=mg(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function oC(n){Uy(n.g,function(e,t){this.g.hasOwnProperty(t)&&U0(e)},n),n.g={}}function Gy(){this.g=!0}function Kh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return ad(t)}catch{return e}}(n,t)+(r?" "+r:"")})}_g.prototype.N=function(){_g.$.N.call(this),oC(this)},_g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gy.prototype.Ea=function(){this.g=!1},Gy.prototype.info=function(){};var ld={},lC=null;function wg(){return lC=lC||new Kr}function cC(n){us.call(this,ld.Ta,n)}function Eg(n){const e=wg();Mi(e,new cC(e))}function dC(n,e){us.call(this,ld.STAT_EVENT,n),this.stat=e}function Ni(n){const e=wg();Mi(e,new dC(e,n))}function zy(n,e){us.call(this,ld.Ua,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}ld.Ta="serverreachability",ui(cC,us),ld.STAT_EVENT="statevent",ui(dC,us),ld.Ua="timingevent",ui(zy,us);var Qh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function z0(){}function fC(){}z0.prototype.h=null;var q0,Jh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ul(){us.call(this,"d")}function Wy(){us.call(this,"c")}function W0(){}function cd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new _g(this),this.P=kA,this.V=new Hy(n=P0?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Zy}function Zy(){this.i=null,this.g="",this.h=!1}ui(Ul,us),ui(Wy,us),ui(W0,z0),W0.prototype.g=function(){return new XMLHttpRequest},W0.prototype.i=function(){return{}},q0=new W0;var kA=45e3,Ky={},Ig={};function Z0(n,e,t){n.L=1,n.v=ev(zu(e)),n.s=t,n.S=!0,K0(n,null)}function K0(n,e){n.G=Date.now(),Xh(n),n.A=zu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),nw(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Zy,n.g=RC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new rC(Ki(n.Pa,n,n.g),n.O)),sC(n.U,n.g,"readystatechange",n.nb),e=n.I?F0(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Eg(),function OA(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var T=D[0];D=D[1];var N=T.split("_");l=2<=N.length&&"type"==N[1]?l+(T+"=")+D+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Yy(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Y0(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=pC(n,t),i==Ig){4==e&&(n.o=4,Ni(14),r=!1),Kh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ky){n.o=4,Ni(15),Kh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Kh(n.j,n.m,i,null),J0(n,i)}Yy(n)&&i!=Ig&&i!=Ky&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ni(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),kg(e),e.M=!0,Ni(11))):(Kh(n.j,n.m,t,"[Invalid Chunked Response]"),dd(n),Dg(n))}function pC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ig:(t=Number(e.substring(t,r)),isNaN(t)?Ky:(r+=1)+t>e.length?Ig:(e=e.slice(r,r+t),n.C=r+t,e))}function Xh(n){n.Y=Date.now()+n.P,Q0(n,n.P)}function Q0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(Ki(n.lb,n),e)}function Qy(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Dg(n){0==n.l.H||n.J||hw(n.l,n)}function dd(n){Qy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,G0(n.V),oC(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function J0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||hd(t.i,n)))if(!n.K&&hd(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ov(t),rf(t)}sv(t),Ni(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Yh(Ki(t.ib,t),6e3));if(1>=DC(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else gd(t,11)}else if((n.K||t.g==n)&&ov(t),!Gh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const T=D[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const L=D[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const Y=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;u.g||-1==Y.indexOf("spdy")&&-1==Y.indexOf("quic")&&-1==Y.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(rw(u,u.h),u.h=null))}if(r.F){const ae=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.Da=ae,Vn(r.I,r.F,ae))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=gw(r,r.J?r.pa:null,r.Y),l.K){tv(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(Qy(g),Xh(g)),r.g=l}else xC(r);0<t.j.length&&sf(t)}else"stop"!=D[0]&&"close"!=D[0]||gd(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?gd(t,7):Og(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}Eg()}catch{}}function X0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(O0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function jR(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(O0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function gC(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(O0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(st=cd.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Eo(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const T=Eo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||P0||this.g&&(this.h.h||this.g.ja()||aw(this.g)))){this.J||4!=T||7==e||Eg(),Qy(this);var t=this.g.da();this.ca=t;t:if(Yy(this)){var r=aw(this.g);n="";var i=r.length,u=4==Eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){dd(this),Dg(this);var l="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function PA(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gh(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ni(12),dd(this),Dg(this);break e}Kh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,J0(this,t)}this.S?(Y0(this,T,l),P0&&this.i&&3==T&&(sC(this.U,this.V,"tick",this.mb),this.V.start())):(Kh(this.j,this.m,l,null),J0(this,l)),4==T&&dd(this),this.i&&!this.J&&(4==T?hw(this.l,this):(this.i=!1,Xh(this)))}else(function qA(n){const e={};n=(n.g&&2<=Eo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Gh(n[r]))continue;var t=tC(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function bA(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ni(12)):(this.o=0,Ni(13)),dd(this),Dg(this)}}}catch{}},st.mb=function(){if(this.g){var n=Eo(this.g),e=this.g.ja();this.C<e.length&&(Qy(this),Y0(this,n,e),this.i&&4!=n&&Xh(this))}},st.cancel=function(){this.J=!0,dd(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function aC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Eg(),Ni(17)),dd(this),this.o=2,Dg(this)):Q0(this,this.Y-n)};var mC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ef(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ef){this.h=n.h,Jy(this,n.j),this.s=n.s,this.g=n.g,Xy(this,n.m),this.l=n.l;var e=n.i,t=new tf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),yC(this,t),this.o=n.o}else n&&(e=String(n).match(mC))?(this.h=!1,Jy(this,e[1]||"",!0),this.s=Cg(e[2]||""),this.g=Cg(e[3]||"",!0),Xy(this,e[4]),this.l=Cg(e[5]||"",!0),yC(this,e[6]||"",!0),this.o=Cg(e[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}function zu(n){return new ef(n)}function Jy(n,e,t){n.j=t?Cg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function yC(n,e,t){e instanceof tf?(n.i=e,function $R(n,e){e&&!n.j&&(qu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ew(this,r),nw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bg(e,Tg)),n.i=new tf(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function ev(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,LA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function LA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ef.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bg(e,vC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bg(e,vC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bg(t,"/"==t.charAt(0)?UA:VA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bg(t,_C)),n.join("")};var vC=/[#\/\?@]/g,VA=/[#\?:]/g,UA=/[#\?]/g,Tg=/[#\?@]/g,_C=/#/g;function tf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qu(n){n.g||(n.g=new Map,n.h=0,n.i&&function FA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ew(n,e){qu(n),e=nf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function tw(n,e){return qu(n),e=nf(n,e),n.g.has(e)}function nw(n,e,t){ew(n,e),0<t.length&&(n.i=null,n.g.set(nf(n,e),Hh(t)),n.h+=t.length)}function nf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function EC(n){this.l=n||BA,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ka&&Ot.g.Ka()&&Ot.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=tf.prototype).add=function(n,e){qu(this),this.i=null,n=nf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){qu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.ta=function(){qu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},st.Z=function(n){qu(this);let e=[];if("string"==typeof n)tw(this,n)&&(e=e.concat(this.g.get(nf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return qu(this),this.i=null,tw(this,n=nf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var BA=10;function IC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DC(n){return n.h?1:n.g?n.g.size:0}function hd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rw(n,e){n.g?n.g.add(e):n.h=e}function tv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function da(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Hh(n.i)}EC.prototype.cancel=function(){if(this.i=da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var jA=class{stringify(n){return Ot.JSON.stringify(n,void 0)}parse(n){return Ot.JSON.parse(n,void 0)}};function iw(){this.g=new jA}function Sg(n,e,t){const r=t||"";try{X0(n,function(i,u){let l=i;od(i)&&(l=ad(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ag(n){this.l=n.fc||null,this.j=n.ob||!1}function fd(n,e){Kr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui(Ag,z0),Ag.prototype.g=function(){return new fd(this.l,this.j)},Ag.prototype.i=function(n){return function(){return n}}({}),ui(fd,Kr);var rv=0;function CC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Mg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pd(n)}function pd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=fd.prototype).open=function(n,e){if(this.readyState!=rv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pd(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mg(this)),this.readyState=rv},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pd(this)),this.g&&(this.readyState=3,pd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mg(this):pd(this),3==this.readyState&&CC(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,Mg(this))},st.Ya=function(n){this.g&&(this.response=n,Mg(this))},st.ka=function(){this.g&&Mg(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HA=Ot.JSON.parse;function pr(n){Kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sw,this.L=this.M=!1}ui(pr,Kr);var sw="",GA=/^https?$/i,zA=["POST","PUT"];function Ng(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,TC(n),xg(n)}function TC(n){n.F||(n.F=!0,Mi(n,"complete"),Mi(n,"error"))}function SC(n){if(n.h&&typeof R0<"u"&&(!n.C[1]||4!=Eo(n)||2!=n.da()))if(n.v&&4==Eo(n))vg(n.La,0,n);else if(Mi(n,"readystatechange"),4==Eo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(mC)[1]||null;!i&&Ot.self&&Ot.self.location&&(i=Ot.self.location.protocol.slice(0,-1)),r=!GA.test(i?i.toLowerCase():"")}t=r}if(t)Mi(n,"complete"),Mi(n,"success");else{n.m=6;try{var u=2<Eo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",TC(n)}}finally{xg(n)}}}function xg(n,e){if(n.g){ow(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Mi(n,"ready");try{t.onreadystatechange=r}catch{}}}function ow(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Eo(n){return n.g?n.g.readyState:0}function aw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case sw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function uw(n){let e="";return Uy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function iv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=uw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function Rg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function AC(n){this.Ga=0,this.j=[],this.l=new Gy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rg("baseRetryDelayMs",5e3,n),this.hb=Rg("retryDelaySeedMs",1e4,n),this.eb=Rg("forwardChannelMaxRetries",2,n),this.xa=Rg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new EC(n&&n.concurrentRequestLimit),this.Ja=new iw,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Og(n){if(lw(n),3==n.H){var e=n.W++,t=zu(n.I);if(Vn(t,"SID",n.K),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Pg(n,t),(e=new cd(n,n.l,e)).L=2,e.v=ev(zu(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon)try{t=Ot.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=RC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Xh(e)}pw(n)}function rf(n){n.g&&(kg(n),n.g.cancel(),n.g=null)}function lw(n){rf(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),ov(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function sf(n){if(!IC(n.i)&&!n.m){n.m=!0;var e=n.Na;ud||H0(),yg||(ud(),yg=!0),$y.add(e,n),n.C=0}}function MC(n,e){var t;t=e?e.m:n.W++;const r=zu(n.I);Vn(r,"SID",n.K),Vn(r,"RID",t),Vn(r,"AID",n.V),Pg(n,r),n.o&&n.s&&iv(r,n.o,n.s),t=new cd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=NC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),rw(n.i,t),Z0(t,r,e)}function Pg(n,e){n.na&&Uy(n.na,function(t,r){Vn(e,r,t)}),n.h&&X0({},function(t,r){Vn(e,r,t)})}function NC(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ki(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=i[_].g;const T=i[_].map;if(D-=u,0>D)u=Math.max(0,i[_].g-100),g=!1;else try{Sg(T,l,"req"+D+"_")}catch{r&&r(T)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function xC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ud||H0(),yg||(ud(),yg=!0),$y.add(e,n),n.A=0}}function sv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Yh(Ki(n.Ma,n),fw(n,n.A)),n.A++,0))}function kg(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function dw(n){n.g=new cd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=zu(n.wa);Vn(e,"RID","rpc"),Vn(e,"SID",n.K),Vn(e,"AID",n.V),Vn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Vn(e,"TO",n.qa),Vn(e,"TYPE","xmlhttp"),Pg(n,e),n.o&&n.s&&iv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=ev(zu(e)),t.s=null,t.S=!0,K0(t,n)}function ov(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function hw(n,e){var t=null;if(n.g==e){ov(n),kg(n),n.g=null;var r=2}else{if(!hd(n.i,e))return;t=e.F,tv(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Mi(r=wg(),new zy(r,t)),sf(n)}else xC(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function cw(n,e){return!(DC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Yh(Ki(n.Na,n,e),fw(n,n.C)),n.C++,0)))}(n,e)||2==r&&sv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:gd(n,5);break;case 4:gd(n,10);break;case 3:gd(n,6);break;default:gd(n,2)}}function fw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function gd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ki(n.pb,n);t||(t=new ef("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Jy(t,"https"),ev(t)),function $A(n,e){const t=new Gy;if(Ot.Image){const r=new Image;r.onload=Oy(nv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Oy(nv,t,r,"TestLoadImage: error",!1,e),r.onabort=Oy(nv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oy(nv,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ni(2);n.H=0,n.h&&n.h.za(e),pw(n),lw(n)}function pw(n){if(n.H=0,n.ma=[],n.h){const e=da(n.i);(0!=e.length||0!=n.j.length)&&(sr(n.ma,e),sr(n.ma,n.j),n.i.i.length=0,Hh(n.j),n.j.length=0),n.h.ya()}}function gw(n,e,t){var r=t instanceof ef?zu(t):new ef(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Xy(r,r.m);else{var i=Ot.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new ef(null);r&&Jy(u,r),e&&(u.g=e),i&&Xy(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Vn(r,t,e),Vn(r,"VER",n.ra),Pg(n,r),r}function RC(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ha&&!n.va?new Ag({ob:!0}):n.va)).Oa(n.J),e}function mw(){}function av(){if(zh&&!(10<=Number(fg)))throw Error("Environmental error: no available transport.")}function Nn(n,e){Kr.call(this),this.g=new AC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Gh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new af(this)}function md(n){Ul.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function OC(){Wy.call(this),this.status=1}function af(n){this.g=n}function Ya(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function uv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=u+((l=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function pn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(st=pr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():q0.g(),this.C=function qy(n){return n.h||(n.h=n.i())}(this.u?this.u:q0),this.g.onreadystatechange=Ki(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Ng(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Ot.FormData&&n instanceof Ot.FormData,!(0<=hg(zA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ow(this),0<this.B&&((this.L=function bC(n){return zh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ki(this.ua,this)):this.A=vg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ng(this,u)}},st.ua=function(){typeof R0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mi(this,"complete"),Mi(this,"abort"),xg(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xg(this,!0)),pr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?SC(this):this.kb())},st.kb=function(){SC(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<Eo(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HA(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=AC.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new cd(this,this.l,n);let u=this.s;if(this.U&&(u?(u=F0(u),WD(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=NC(this,i,e),Vn(t=zu(this.I),"RID",n),Vn(t,"CVER",22),this.F&&Vn(t,"X-HTTP-Session-Id",this.F),Pg(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(uw(u)))+"&"+e:this.o&&iv(t,this.o,u)),rw(this.i,i),this.bb&&Vn(t,"TYPE","init"),this.P?(Vn(t,"$req",e),Vn(t,"SID","null"),i.aa=!0,Z0(i,t,null)):Z0(i,t,e),this.H=2}}else 3==this.H&&(n?MC(this,n):0==this.j.length||IC(this.i)||MC(this))},st.Ma=function(){if(this.u=null,dw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Yh(Ki(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ni(10),rf(this),dw(this))},st.ib=function(){null!=this.v&&(this.v=null,rf(this),sv(this),Ni(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ni(2)):(this.l.info("Failed to ping google.com"),Ni(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=mw.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},av.prototype.g=function(n,e){return new Nn(n,e)},ui(Nn,Kr),Nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ni(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=gw(n,null,n.Y),sf(n)},Nn.prototype.close=function(){Og(this.g)},Nn.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ad(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&sf(e)},Nn.prototype.N=function(){this.g.h=null,delete this.j,Og(this.g),delete this.g,Nn.$.N.call(this)},ui(md,Ul),ui(OC,Wy),ui(af,mw),af.prototype.Ba=function(){Mi(this.g,"a")},af.prototype.Aa=function(n){Mi(this.g,new md(n))},af.prototype.za=function(n){Mi(this.g,new OC)},af.prototype.ya=function(){Mi(this.g,"b")},ui(Ya,function HR(){this.blockSize=-1}),Ya.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ya.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)uv(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){uv(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){uv(this,r),i=0;break}}this.h=i,this.i+=e},Ya.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Fg={};function yw(n){return-128<=n&&128>n?function BD(n,e){var t=Fg;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new pn([0|e],0>e?-1:0)}):new pn([0|n],0>n?-1:0)}function Io(n){if(isNaN(n)||!isFinite(n))return uf;if(0>n)return xi(Io(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=lv;return new pn(e,0)}var lv=4294967296,uf=yw(0),vw=yw(1),kC=yw(16777216);function ha(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hs(n){return-1==n.h}function xi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new pn(t,~n.h).add(vw)}function yd(n,e){return n.add(xi(e))}function lf(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function cv(n,e){this.g=n,this.h=e}function Lg(n,e){if(ha(e))throw Error("division by zero");if(ha(n))return new cv(uf,uf);if(Hs(n))return e=Lg(xi(n),e),new cv(xi(e.g),xi(e.h));if(Hs(e))return e=Lg(n,xi(e)),new cv(xi(e.g),e.h);if(30<n.g.length){if(Hs(n)||Hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=vw,r=e;0>=r.X(n);)t=FC(t),r=FC(r);var i=vd(t,1),u=vd(r,1);for(r=vd(r,2),t=vd(t,2);!ha(r);){var l=u.add(r);0>=l.X(n)&&(i=i.add(t),u=l),r=vd(r,1),t=vd(t,1)}return e=yd(n,i.R(e)),new cv(i,e)}for(i=uf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Io(t)).R(e);Hs(l)||0<l.X(n);)l=(u=Io(t-=r)).R(e);ha(u)&&(u=vw),i=i.add(u),n=yd(n,l)}return new cv(i,n)}function FC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new pn(t,n.h)}function vd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new pn(i,n.h)}(st=pn.prototype).ea=function(){if(Hs(this))return-xi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:lv+r)*e,e*=lv}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ha(this))return"0";if(Hs(this))return"-"+xi(this).toString(n);for(var e=Io(Math.pow(n,6)),t=this,r="";;){var i=Lg(t,e).g,u=((0<(t=yd(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ha(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return Hs(n=yd(this,n))?-1:ha(n)?0:1},st.abs=function(){return Hs(this)?xi(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),l=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(u&=65535)}return new pn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(ha(this)||ha(n))return uf;if(Hs(this))return Hs(n)?xi(this).R(xi(n)):xi(xi(this).R(n));if(Hs(n))return xi(this.R(xi(n)));if(0>this.X(kC)&&0>n.X(kC))return Io(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=l*_,lf(t,2*r+2*i),t[2*r+2*i+1]+=u*_,lf(t,2*r+2*i+1),t[2*r+2*i+1]+=l*g,lf(t,2*r+2*i+1),t[2*r+2*i+2]+=u*g,lf(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new pn(t,0)},st.gb=function(n){return Lg(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new pn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new pn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new pn(t,this.h^n.h)},av.prototype.createWebChannel=av.prototype.g,Nn.prototype.send=Nn.prototype.u,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Qh.NO_ERROR=0,Qh.TIMEOUT=8,Qh.HTTP_ERROR=6,hC.COMPLETE="complete",fC.EventType=Jh,Jh.OPEN="a",Jh.CLOSE="b",Jh.ERROR="c",Jh.MESSAGE="d",Kr.prototype.listen=Kr.prototype.O,pr.prototype.listenOnce=pr.prototype.P,pr.prototype.getLastError=pr.prototype.Sa,pr.prototype.getLastErrorCode=pr.prototype.Ia,pr.prototype.getStatus=pr.prototype.da,pr.prototype.getResponseJson=pr.prototype.Wa,pr.prototype.getResponseText=pr.prototype.ja,pr.prototype.send=pr.prototype.ha,pr.prototype.setWithCredentials=pr.prototype.Oa,Ya.prototype.digest=Ya.prototype.l,Ya.prototype.reset=Ya.prototype.reset,Ya.prototype.update=Ya.prototype.j,pn.prototype.add=pn.prototype.add,pn.prototype.multiply=pn.prototype.R,pn.prototype.modulo=pn.prototype.gb,pn.prototype.compare=pn.prototype.X,pn.prototype.toNumber=pn.prototype.ea,pn.prototype.toString=pn.prototype.toString,pn.prototype.getBits=pn.prototype.D,pn.fromNumber=Io,pn.fromString=function PC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return xi(PC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Io(Math.pow(e,8)),r=uf,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+u),e);8>u?(u=Io(Math.pow(e,u)),r=r.R(u).add(Io(l))):r=(r=r.R(t)).add(Io(l))}return r};var cf=Ai.createWebChannelTransport=function(){return new av},WA=Ai.getStatEventTarget=function(){return wg()},dv=Ai.ErrorCode=Qh,_w=Ai.EventType=hC,GR=Ai.Event=ld,LC=Ai.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zR=Ai.FetchXmlHttpFactory=Ag,hv=Ai.WebChannel=fC,ZA=Ai.XhrIo=pr,KA=Ai.Md5=Ya,_d=Ai.Integer=pn;const ww="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let wd="9.22.1";const Wu=new js.Yd("@firebase/firestore");function Ew(){return Wu.logLevel}function Ue(n,...e){if(Wu.logLevel<=js.in.DEBUG){const t=e.map(fv);Wu.debug(`Firestore (${wd}): ${n}`,...t)}}function Ar(n,...e){if(Wu.logLevel<=js.in.ERROR){const t=e.map(fv);Wu.error(`Firestore (${wd}): ${n}`,...t)}}function Gs(n,...e){if(Wu.logLevel<=js.in.WARN){const t=e.map(fv);Wu.warn(`Firestore (${wd}): ${n}`,...t)}}function fv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+n;throw Ar(e),new Error(e)}function mt(n,e){n||ut()}function nt(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class JA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZR{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let l=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ci,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,he.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ci)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new JA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new li(e)}}class KR{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=li.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class YR{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new KR(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.T=t.token,new XA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Iw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Dw{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Iw(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[u]%62))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Zu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VC(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new or(0,0))}static max(){return new It(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pv{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===pv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends pv{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const tM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gr extends pv{construct(e,t,r){return new gr(e,t,r)}static isValidIdentifier(e){return tM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Se(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new Se(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Se(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===g?(l=!l,i++):"."!==g||l?(r+=g,i++):(u(),i++)}if(u(),l)throw new Se(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gr(t)}static emptyPath(){return new gr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(un.fromString(e))}static fromName(e){return new et(un.fromString(e).popFirst(5))}static empty(){return new et(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new un(e.slice()))}}class gv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mv(n){return n.fields.find(e=>2===e.kind)}function Bl(n){return n.fields.filter(e=>2!==e.kind)}gv.UNKNOWN_ID=-1;class Cs{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ed{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ed(0,Do.min())}}function Cw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new Do(i,et.empty(),e)}function UC(n){return new Do(n.readTime,n.key,-1)}class Do{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Do(It.min(),et.empty(),-1)}static max(){return new Do(It.max(),et.empty(),-1)}}function di(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const BC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jl(n){return bw.apply(this,arguments)}function bw(){return bw=(0,he.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==BC)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),bw.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,u=0,l=!1;e.forEach(g=>{++i,g.next(()=>{++u,l&&u===i&&t()},_=>r(_))}),l=!0,u===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(T=>{l[D]=T,++g,g===u&&r(l)},T=>i(T))}})}static doWhile(e,t){return new te((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Vg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ci,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new df(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=vv(r.target.error);this.v.reject(new df(e,i))}}static open(e,t,r,i){try{return new Vg(t,e.transaction(i,r))}catch(u){throw new df(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jC(t)}}class Co{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Co.S((0,tn.z$)())&&Ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),$l(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tn.hl)())return!1;if(Co.C())return!0;const e=(0,tn.z$)(),t=Co.S(e),r=0<t&&t<10,i=Co.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,he.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new df(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;i("VersionError"===g.name?new Se(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Se(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new df(e,g))},u.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,he.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=Vg.open(u.db,e,l?"readonly":"readwrite",r),D=i(_).next(T=>(_.P(),T)).catch(T=>(_.abort(T),te.reject(T))).toPromise();return D.catch(()=>{}),yield _.R,D}catch(_){const D=_,T="FirebaseError"!==D.name&&g<3;if(Ue("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rM{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $l(this.L.delete())}}class df extends Se{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ku(n){return"IndexedDbTransactionError"===n.name}class jC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$l(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),$l(this.store.add(e))}get(e){return $l(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),$l(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),$l(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(l,g)=>{u.push(g)}).next(()=>u)}{const i=this.store.getAll(r.range);return new te((u,l)=>{i.onerror=g=>{l(g.target.error)},i.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=u=>{const l=vv(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void i();const _=new rM(g),D=t(g.primaryKey,g.value,_);if(D instanceof te){const T=D.catch(N=>(_.done(),te.reject(N)));r.push(T)}_.isDone?i():null===_.K?g.continue():g.continue(_.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $l(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vv(r.target.error);t(i)}})}let $C=!1;function vv(n){const e=Co.S((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $C||($C=!0,setTimeout(()=>{throw r},0)),r}}return n}class iM{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ku(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield jl(r)}yield t.et(6e4)}))}}class Tw{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return te.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(g=>{i-=g,r.add(l)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,u)).next(g=>(Ue("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=UC(u);di(l,r)>0&&(r=l)}),new Do(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ur=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function hf(n){return null==n}function Id(n){return 0===n&&1/n==-1/0}function _v(n){return"number"==typeof n&&Number.isInteger(n)&&!Id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sw(e)),e=XR(n.get(t),e);return Sw(e)}function XR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Sw(n){return n+"\x01\x01"}function Qa(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===i.length?_=g:(i+=g,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:ut()}u=l+2}return new un(r)}const HC=["userId","batchId"];function wv(n,e){return[n,Yi(e)]}function GC(n,e,t){return[n,Yi(e),t]}const zC={},e1=["prefixPath","collectionGroup","readTime","documentId"],qC=["prefixPath","collectionGroup","documentId"],sM=["collectionGroup","readTime","prefixPath","documentId"],WC=["canonicalId","targetId"],t1=["targetId","path"],Aw=["path","targetId"],ZC=["collectionId","parent"],KC=["indexId","uid"],oM=["uid","sequenceNumber"],YC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QC=["indexId","uid","orderedDocumentKey"],ff=["userId","collectionPath","documentId"],Ev=["userId","collectionPath","largestBatchId"],JC=["userId","collectionGroup","largestBatchId"],Mw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aM=[...Mw,"documentOverlays"],XC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uM=XC,eb=[...uM,"indexConfiguration","indexState","indexEntries"];class Nw extends yv{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function hi(n,e){const t=nt(n);return Co.M(t.ht,e)}function lM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Iv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Iv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Iv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Iv(this.root,e,this.comparator,!0)}}class Iv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ri{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Ri.RED,this.left=i??Ri.EMPTY,this.right=u??Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ri(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dM(this.data.getIterator())}getIteratorFrom(e){return new dM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class dM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ug(n){return n.hasNext()?n.getNext():void 0}class zs{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new zs([])}unionWith(e){let t=new Un(gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hM("Invalid base64 string: "+i):i}}(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const Dv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(n){if(mt(!!n),"string"==typeof n){let e=0;const t=Dv.exec(n);if(mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ja(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function Xa(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Bg(n){const e=n.mapValue.fields.__previous_value__;return Xa(e)?Bg(e):e}function Cd(n){const e=Hl(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class xw{constructor(e,t,r,i,u,l,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}const eu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pf={nullValue:"NULL_VALUE"};function fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xa(n)?4:Av(n)?9007199254740991:10:ut()}function Yu(n,e){if(n===e)return!0;const t=fa(n);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cd(n).isEqual(Cd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Hl(r.timestampValue),l=Hl(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ja(n.bytesValue).isEqual(Ja(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return mr(r.geoPointValue.latitude)===mr(i.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mr(r.integerValue)===mr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=mr(r.doubleValue),l=mr(i.doubleValue);return u===l?Id(u)===Id(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Zu(n.arrayValue.values||[],e.arrayValue.values||[],Yu);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(lM(u)!==lM(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Yu(u[g],l[g])))return!1;return!0}(n,e);default:return ut()}var i}function Cv(n,e){return void 0!==(n.values||[]).find(t=>Yu(t,e))}function bd(n,e){if(n===e)return 0;const t=fa(n),r=fa(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=mr(i.integerValue||i.doubleValue),g=mr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return Rw(n.timestampValue,e.timestampValue);case 4:return Rw(Cd(n),Cd(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Ja(i),g=Ja(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=Bt(l[_],g[_]);if(0!==D)return D}return Bt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Bt(mr(i.latitude),mr(u.latitude));return 0!==l?l:Bt(mr(i.longitude),mr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=bd(l[_],g[_]);if(D)return D}return Bt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===eu.mapValue&&u===eu.mapValue)return 0;if(i===eu.mapValue)return 1;if(u===eu.mapValue)return-1;const l=i.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let T=0;T<g.length&&T<D.length;++T){const N=Bt(g[T],D[T]);if(0!==N)return N;const L=bd(l[g[T]],_[D[T]]);if(0!==L)return L}return Bt(g.length,D.length)}(n.mapValue,e.mapValue);default:throw ut()}}function Rw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Hl(n),r=Hl(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function gf(n){return Ow(n)}function Ow(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Hl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ja(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=Ow(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of i)l?l=!1:u+=",",u+=`${g}:${Ow(r.fields[g])}`;return u+"}"}(n.mapValue):ut();var e}function Td(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tv(n){return!!n&&"integerValue"in n}function mf(n){return!!n&&"arrayValue"in n}function Pw(n){return!!n&&"nullValue"in n}function tb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sv(n){return!!n&&"mapValue"in n}function yf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Av(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function r1(n){return"nullValue"in n?pf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Td(Gl.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function nb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Td(Gl.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?eu:ut()}function Mv(n,e){const t=bd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rb(n,e){const t=bd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=g.popLast()}l?r[g.lastSegment()]=yf(l):i.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Sv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dd(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Oi(yf(this.value))}}function fM(n){const e=[];return Dd(n.fields,(t,r)=>{const i=new gr([t]);if(Sv(r)){const u=fM(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new zs(e)}class Qn{constructor(e,t,r,i,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Qn(e,0,It.min(),It.min(),It.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new Qn(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new Qn(e,2,t,It.min(),It.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,It.min(),It.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zl{constructor(e,t){this.position=e,this.inclusive=t}}function ib(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):bd(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function sb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yu(n.position[t],e.position[t]))return!1;return!0}class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function ob(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kw{}class on extends kw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new cb(e,t,r):"array-contains"===t?new Rv(e,r):"in"===t?new pM(e,r):"not-in"===t?new gM(e,r):"array-contains-any"===t?new s1(e,r):new on(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new db(e,r):new i1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bd(t,this.value)):null!==t&&fa(this.value)===fa(t)&&this.matchesComparison(bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends kw{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new En(e,t)}matches(e){return ql(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ql(n){return"and"===n.op}function Nv(n){return"or"===n.op}function xv(n){return ab(n)&&ql(n)}function ab(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function jg(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+gf(n.value);if(xv(n))return n.filters.map(e=>jg(e)).join(",");{const e=n.filters.map(t=>jg(t)).join(",");return`${n.op}(${e})`}}function ub(n,e){return n instanceof on?(t=n,(r=e)instanceof on&&t.op===r.op&&t.field.isEqual(r.field)&&Yu(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,l)=>i&&ub(u,r.filters[l]),!0)}(n,e):void ut();var t,r}function lb(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function Fw(n){return n instanceof on?`${(e=n).field.canonicalString()} ${e.op} ${gf(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(Fw).join(" ,")+"}"}(n):"Filter";var e}class cb extends on{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class db extends on{constructor(e,t){super(e,"in",t),this.keys=hb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class i1 extends on{constructor(e,t){super(e,"not-in",t),this.keys=hb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class Rv extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mf(t)&&Cv(t.arrayValue,this.value)}}class pM extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cv(this.value.arrayValue,t)}}class gM extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cv(this.value.arrayValue,t)}}class s1 extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cv(this.value.arrayValue,r))}}class o1{constructor(e,t=null,r=[],i=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function Lw(n,e=null,t=[],r=[],i=null,u=null,l=null){return new o1(n,e,t,r,i,u,l)}function _f(n){const e=nt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gf(r)).join(",")),e.dt=t}return e.dt}function Ov(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ob(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ub(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sb(n.startAt,e.startAt)&&sb(n.endAt,e.endAt)}function Vw(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Uw(n,e){return n.filters.filter(t=>t instanceof on&&t.field.isEqual(e))}function fb(n,e,t){let r=pf,i=!0;for(const u of Uw(n,e)){let l=pf,g=!0;switch(u.op){case"<":case"<=":l=r1(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=pf}Mv({value:r,inclusive:i},{value:l,inclusive:g})<0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Mv({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function mM(n,e,t){let r=eu,i=!0;for(const u of Uw(n,e)){let l=eu,g=!0;switch(u.op){case">=":case">":l=nb(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=eu}rb({value:r,inclusive:i},{value:l,inclusive:g})>0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];rb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Wl{constructor(e,t=null,r=[],i=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function yM(n,e,t,r,i,u,l,g){return new Wl(n,e,t,r,i,u,l,g)}function $g(n){return new Wl(n)}function vM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Bw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jw(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function s(n){return null!==n.collectionGroup}function o(n){const e=nt(n);if(null===e.wt){e.wt=[];const t=jw(e),r=Bw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new vf(t)),e.wt.push(new vf(gr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vf(gr.keyField(),u))}}}return e.wt}function a(n){const e=nt(n);if(!e._t)if("F"===e.limitType)e._t=Lw(e.path,e.collectionGroup,o(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of o(e))t.push(new vf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new zl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zl(e.startAt.position,e.startAt.inclusive):null;e._t=Lw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function c(n,e){e.getFirstInequalityField(),jw(n);const t=n.filters.concat([e]);return new Wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function h(n,e,t){return new Wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function p(n,e){return Ov(a(n),a(e))&&n.limitType===e.limitType}function y(n){return`${_f(a(n))}|lt:${n.limitType}`}function E(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Fw(r)).join(", ")}]`),hf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gf(r)).join(",")),`Target(${t})`}(a(n))}; limitType=${n.limitType})`}function C(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of o(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const g=ib(i,u,l);return i.inclusive?g<=0:g<0}(t.startAt,o(t),r)||t.endAt&&!function(i,u,l){const g=ib(i,u,l);return i.inclusive?g>=0:g>0}(t.endAt,o(t),r)));var t,r}function A(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R(n){return(e,t)=>{let r=!1;for(const i of o(n)){const u=k(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function k(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,u,l){const g=u.data.field(i),_=l.data.field(i);return null!==g&&null!==_?bd(g,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}class G{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dd(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return cM(this.inner)}size(){return this.innerSize}}const Q=new xn(et.comparator);function fe(){return Q}const Fe=new xn(et.comparator);function We(...n){let e=Fe;for(const t of n)e=e.insert(t.key,t);return e}function yt(n){let e=Fe;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function we(){return Zt()}function At(){return Zt()}function Zt(){return new G(n=>n.toString(),(n,e)=>n.isEqual(e))}const yn=new xn(et.comparator),pa=new Un(et.comparator);function Kt(...n){let e=pa;for(const t of n)e=e.add(t);return e}const Vk=new Un(Bt);function _M(){return Vk}function a1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function u1(n){return{integerValue:""+n}}function l1(n,e){return _v(e)?u1(e):a1(n,e)}class pb{constructor(){this._=void 0}}function Uk(n,e,t){return n instanceof Pv?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Xa(i)&&(i=Bg(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Hg?d1(n,e):n instanceof Gg?h1(n,e):function(r,i){const u=c1(r,i),l=f1(u)+f1(r.gt);return Tv(u)&&Tv(r.gt)?u1(l):a1(r.serializer,l)}(n,e)}function Bk(n,e,t){return n instanceof Hg?d1(n,e):n instanceof Gg?h1(n,e):t}function c1(n,e){return n instanceof kv?Tv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Pv extends pb{}class Hg extends pb{constructor(e){super(),this.elements=e}}function d1(n,e){const t=p1(e);for(const r of n.elements)t.some(i=>Yu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gg extends pb{constructor(e){super(),this.elements=e}}function h1(n,e){let t=p1(e);for(const r of n.elements)t=t.filter(i=>!Yu(i,r));return{arrayValue:{values:t}}}class kv extends pb{constructor(e,t){super(),this.serializer=e,this.gt=t}}function f1(n){return mr(n.integerValue||n.doubleValue)}function p1(n){return mf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $w{constructor(e,t){this.field=e,this.transform=t}}class $k{constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mb{}function g1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Lv(n.key,yr.none()):new Fv(n.key,n.data,yr.none());{const t=n.data,r=Oi.empty();let i=new Un(gr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Sd(n.key,r,new zs(i.toArray()),yr.none())}}function Hk(n,e,t){n instanceof Fv?function(r,i,u){const l=r.value.clone(),g=v1(r.fieldTransforms,i,u.transformResults);l.setAll(g),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Sd?function(r,i,u){if(!gb(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=v1(r.fieldTransforms,i,u.transformResults),g=i.data;g.setAll(y1(r)),g.setAll(l),i.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hw(n,e,t,r){return n instanceof Fv?function(i,u,l,g){if(!gb(i.precondition,u))return l;const _=i.value.clone(),D=_1(i.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sd?function(i,u,l,g){if(!gb(i.precondition,u))return l;const _=_1(i.fieldTransforms,g,u),D=u.data;return D.setAll(y1(i)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,gb(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Gk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=c1(r.transform,i||null);null!=u&&(null===t&&(t=Oi.empty()),t.set(r.field,u))}return t||null}function m1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zu(t,r,(i,u)=>function jk(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hg&&r instanceof Hg||t instanceof Gg&&r instanceof Gg?Zu(t.elements,r.elements,Yu):t instanceof kv&&r instanceof kv?Yu(t.gt,r.gt):t instanceof Pv&&r instanceof Pv);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Fv extends mb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sd extends mb{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function y1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function v1(n,e,t){const r=new Map;mt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,g=e.data.field(u.field);r.set(u.field,Bk(l,g,t[i]))}return r}function _1(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,Uk(u,l,e))}return r}class Lv extends mb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wM extends mb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Hk(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=At();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(i.key)?null:g;const _=g1(l,g);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&Zu(this.mutations,e.mutations,(t,r)=>m1(t,r))&&Zu(this.baseMutations,e.baseMutations,(t,r)=>m1(t,r))}}class IM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length);let i=yn;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new IM(e,t,r,i)}}class DM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qk{constructor(e,t){this.count=e,this.unchangedNames=t}}var fi,cn;function w1(n){switch(n){default:return ut();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function E1(n){if(void 0===n)return Ar("GRPC error has no .code"),oe.UNKNOWN;switch(n){case fi.OK:return oe.OK;case fi.CANCELLED:return oe.CANCELLED;case fi.UNKNOWN:return oe.UNKNOWN;case fi.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case fi.INTERNAL:return oe.INTERNAL;case fi.UNAVAILABLE:return oe.UNAVAILABLE;case fi.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case fi.NOT_FOUND:return oe.NOT_FOUND;case fi.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case fi.ABORTED:return oe.ABORTED;case fi.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case fi.DATA_LOSS:return oe.DATA_LOSS;default:return ut()}}(cn=fi||(fi={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class CM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return yb}static getOrCreateInstance(){return null===yb&&(yb=new CM),yb}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let yb=null;function I1(){return new TextEncoder}const Wk=new _d([4294967295,4294967295],0);function D1(n){const e=I1().encode(n),t=new KA;return t.update(e),new Uint8Array(t.digest())}function C1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _d([t,r],0),new _d([i,u],0)]}class bM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gw(`Invalid padding: ${t}`);if(r<0)throw new Gw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Gw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Gw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=_d.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(_d.fromNumber(r)));return 1===i.compare(Wk)&&(i=new _d([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=D1(e),[r,i]=C1(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new bM(u,i,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=D1(e),[r,i]=C1(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Gw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zw(It.min(),i,new xn(Bt),fe(),Kt())}}class qw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qw(r,t,Kt(),Kt(),Kt())}}class vb{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class b1{constructor(e,t){this.targetId=e,this.Vt=t}}class T1{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class S1{constructor(){this.St=0,this.Dt=M1(),this.Ct=Yr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Kt(),t=Kt(),r=Kt();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new qw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=M1()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Zk{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=A1(),this.Wt=new xn(Bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Vw(l))if(0===i){const g=new et(l.path);this.Yt(r,g,Qn.newNoDocument(g,It.min()))}else mt(1===i);else{const g=this.ie(r);if(g!==i){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=CM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,T,N){var L,H,Y,ae,Ie,Je;const ct={localCacheCount:T,existenceFilterCount:N.count},lt=N.unchangedNames;return lt&&(ct.bloomFilter={applied:0===D,hashCount:null!==(L=lt?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ae=null===(Y=null===(H=lt?.bits)||void 0===H?void 0:H.bitmap)||void 0===Y?void 0:Y.length)&&void 0!==ae?ae:0,padding:null!==(Je=null===(Ie=lt?.bits)||void 0===Ie?void 0:Ie.padding)&&void 0!==Je?Je:0}),ct}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,D;try{_=Ja(u).toUint8Array()}catch(T){if(T instanceof hM)return Gs("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new bM(_,l,g)}catch(T){return Gs(T instanceof Gw?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:i!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&Vw(g.target)){const _=new et(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,Qn.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Kt();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.se(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const i=new zw(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=A1(),this.Wt=new xn(Bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new S1,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Un(Bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new S1),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function A1(){return new xn(et.comparator)}function M1(){return new xn(et.comparator)}const Kk={asc:"ASCENDING",desc:"DESCENDING"},Yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TM(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function Vv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xk(n,e){return Vv(n,e.toTimestamp())}function Qr(n){return mt(!!n),It.fromTimestamp(function(e){const t=Hl(e);return new or(t.seconds,t.nanos)}(n))}function SM(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function x1(n){const e=un.fromString(n);return mt(B1(e)),e}function Ww(n,e){return SM(n.databaseId,e.path)}function Zl(n,e){const t=x1(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(O1(t))}function AM(n,e){return SM(n.databaseId,e)}function R1(n){const e=x1(n);return 4===e.length?un.emptyPath():O1(e)}function Zw(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O1(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function P1(n,e,t){return{name:Ww(n,e),fields:t.value.mapValue.fields}}function k1(n,e,t){const r=Zl(n,e.name),i=Qr(e.updateTime),u=e.createTime?Qr(e.createTime):It.min(),l=new Oi({mapValue:{fields:e.fields}}),g=Qn.newFoundDocument(r,i,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Kw(n,e){let t;if(e instanceof Fv)t={update:P1(n,e.key,e.value)};else if(e instanceof Lv)t={delete:Ww(n,e.key)};else if(e instanceof Sd)t={update:P1(n,e.key,e.data),updateMask:aF(e.fieldMask)};else{if(!(e instanceof wM))return ut();t={verify:Ww(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Pv)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hg)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gg)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof kv)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Xk(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function MM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?yr.updateTime(Qr(i.updateTime)):void 0!==i.exists?yr.exists(i.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let g=null;"setToServerValue"in l?(mt("REQUEST_TIME"===l.setToServerValue),g=new Pv):"appendMissingElements"in l?g=new Hg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Gg(l.removeAllFromArray.values||[]):"increment"in l?g=new kv(u,l.increment):ut();const _=gr.fromServerFormat(l.fieldPath);return new $w(_,g)}(n,i)):[];var i;if(e.update){const i=Zl(n,e.update.name),u=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new zs((e.updateMask.fieldPaths||[]).map(D=>gr.fromServerFormat(D)));return new Sd(i,u,l,t,r)}return new Fv(i,u,t,r)}if(e.delete){const i=Zl(n,e.delete);return new Lv(i,t)}if(e.verify){const i=Zl(n,e.verify);return new wM(i,t)}return ut()}function F1(n,e){return{documents:[AM(n,e.path)]}}function NM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=AM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=AM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return U1(En.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:wf((T=D).field),direction:iF(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=TM(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function L1(n){let e=R1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const N=V1(T);return N instanceof En&&xv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new vf(Uv((N=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(T){let N;return N="object"==typeof T?T.value:T,hf(N)?null:N}(t.limit));let _=null;var T;t.startAt&&(_=new zl((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new zl(T.values||[],!T.before)}(t.endAt)),yM(e,i,l,u,g,"F",_,D)}function V1(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uv(e.unaryFilter.field);return on.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Uv(e.unaryFilter.field);return on.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Uv(e.unaryFilter.field);return on.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Uv(e.unaryFilter.field);return on.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?on.create(Uv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>V1(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function iF(n){return Kk[n]}function sF(n){return Yk[n]}function oF(n){return Qk[n]}function wf(n){return{fieldPath:n.canonicalString()}}function Uv(n){return gr.fromServerFormat(n.fieldPath)}function U1(n){return n instanceof on?function(e){if("=="===e.op){if(tb(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NAN"}};if(Pw(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tb(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NOT_NAN"}};if(Pw(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wf(e.field),op:sF(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>U1(r));return 1===t.length?t[0]:{compositeFilter:{op:oF(e.op),filters:t}}}(n):ut()}function aF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ad{constructor(e,t,r,i,u=It.min(),l=It.min(),g=Yr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Ad(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class j1{constructor(e){this.fe=e}}function $1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_b(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ww(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vv(i,u.version.toTimestamp()),createTime:Vv(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zg(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:zg(e.version)}}var i,u;return r}function _b(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qg(n){const e=new or(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Wg(n,e){const t=(e.baseMutations||[]).map(u=>MM(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>MM(n.fe,u)),i=or.fromMillis(e.localWriteTimeMs);return new EM(e.batchId,i,t,r)}function Yw(n){const e=qg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qg(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(mt(1===(i=n.query).documents.length),r=a($g(R1(i.documents[0])))):r=a(L1(n.query)),new Ad(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function H1(n,e){const t=zg(e.snapshotVersion),r=zg(e.lastLimboFreeSnapshotVersion);let i;i=Vw(e.target)?F1(n.fe,e.target):NM(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_f(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xM(n){const e=L1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?h(e,e.limit,"L"):e}function RM(n,e){return new DM(e.largestBatchId,MM(n.fe,e.overlayMutation))}function G1(n,e){const t=e.path.lastSegment();return[n,Yi(e.path.popLast()),t]}function z1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:zg(r.readTime),documentKey:Yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class lF{getBundleMetadata(e,t){return q1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:qg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return q1(e).put({bundleId:(r=t).id,createTime:zg(Qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return W1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xM(i.bundledQuery),readTime:qg(i.readTime)};var i})}saveNamedQuery(e,t){return W1(e).put({name:(r=t).name,readTime:zg(Qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function q1(n){return hi(n,"bundles")}function W1(n){return hi(n,"namedQueries")}class wb{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new wb(e,t.uid||"")}getOverlay(e,t){return Qw(e).get(G1(this.userId,t)).next(r=>r?RM(this.serializer,r):null)}getOverlays(e,t){const r=we();return te.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const g=new DM(t,l);i.push(this.we(e,g))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Yi(l.getCollectionPath())));const u=[];return i.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Qw(e).J("collectionPathOverlayIndex",g))}),te.waitFor(u)}getOverlaysForCollection(e,t,r){const i=we(),u=Yi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Qw(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=RM(this.serializer,_);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=we();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qw(e).X({index:"collectionGroupOverlayIndex",range:g},(_,D,T)=>{const N=RM(this.serializer,D);u.size()<i||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):T.done()}).next(()=>u)}we(e,t){return Qw(e).put(function(r,i,u){const[l,g,_]=G1(i,u.mutation.key);return{userId:i,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Kw(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Qw(n){return hi(n,"documentOverlays")}class Zg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Id(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ja(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Av(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ut()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function cF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Z1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=cF(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Zg.Ve=new Zg;class dF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=Z1(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=Z1(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class hF{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class fF{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Jw{constructor(){this.je=new dF,this.ze=new hF(this.je),this.We=new fF(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Kg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kg(this.indexId,this.documentKey,this.arrayValue,r)}}function Ef(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=K1(n.arrayValue,e.arrayValue),0!==t?t:(t=K1(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function K1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){mt(e.collectionGroup===this.collectionId);const t=mv(e);if(void 0!==t&&!this.en(t))return!1;const r=Bl(e);let i=0,u=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const l=r[i];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[u++],l))return!1;++i}for(;i<r.length;++i)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Y1(n){var e,t;if(mt(n instanceof on||n instanceof En),n instanceof on){if(n instanceof pM){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>on.create(n.field,"==",u)))||[];return En.create(i,"or")}return n}const r=n.filters.map(i=>Y1(i));return En.create(r,n.op)}function gF(n){if(0===n.getFilters().length)return[];const e=kM(Y1(n));return mt(Q1(e)),OM(e)||PM(e)?[e]:e.getFilters()}function OM(n){return n instanceof on}function PM(n){return n instanceof En&&xv(n)}function Q1(n){return OM(n)||PM(n)||function(e){if(e instanceof En&&Nv(e)){for(const t of e.getFilters())if(!OM(t)&&!PM(t))return!1;return!0}return!1}(n)}function kM(n){if(mt(n instanceof on||n instanceof En),n instanceof on)return n;if(1===n.filters.length)return kM(n.filters[0]);const e=n.filters.map(r=>kM(r));let t=En.create(e,n.op);return t=Eb(t),Q1(t)?t:(mt(t instanceof En),mt(ql(t)),mt(t.filters.length>1),t.filters.reduce((r,i)=>FM(r,i)))}function FM(n,e){let t;return mt(n instanceof on||n instanceof En),mt(e instanceof on||e instanceof En),t=n instanceof on?e instanceof on?En.create([n,e],"and"):J1(n,e):e instanceof on?J1(e,n):function(r,i){if(mt(r.filters.length>0&&i.filters.length>0),ql(r)&&ql(i))return lb(r,i.getFilters());const u=Nv(r)?r:i,l=Nv(r)?i:r,g=u.filters.map(_=>FM(_,l));return En.create(g,"or")}(n,e),Eb(t)}function J1(n,e){if(ql(e))return lb(e,n.getFilters());{const t=e.filters.map(r=>FM(n,r));return En.create(t,"or")}}function Eb(n){if(mt(n instanceof on||n instanceof En),n instanceof on)return n;const e=n.getFilters();if(1===e.length)return Eb(e[0]);if(ab(n))return n;const t=e.map(i=>Eb(i)),r=[];return t.forEach(i=>{i instanceof on?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:En.create(r,n.op)}class mF{constructor(){this.rn=new LM}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Do.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class LM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Un(un.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(un.comparator)).toArray()}}const Ib=new Uint8Array(0);class yF{constructor(e,t){this.user=e,this.databaseId=t,this.on=new LM,this.un=new G(r=>_f(r),(r,i)=>Ov(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Yi(i)};return X1(e).put(u)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[VC(t),""],!1,!0);return X1(e).j(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Qa(l.parent))}return r})}addFieldIndex(e,t){const r=Db(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=eE(e);return u.next(g=>{l.put(z1(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Db(e),i=eE(e),u=Xw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xw(e);let i=!0;const u=new Map;return te.forEach(this.cn(t),l=>this.an(e,l).next(g=>{i&&(i=!!g),u.set(l,g)})).next(()=>{if(i){let l=Kt();const g=[];return te.forEach(u,(_,D)=>{var T;Ue("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${_f(t)}`);const N=function(lt,ht){const Ft=mv(ht);if(void 0===Ft)return null;for(const qt of Uw(lt,Ft.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(D,_),L=function(lt,ht){const Ft=new Map;for(const qt of Bl(ht))for(const vn of Uw(lt,qt.fieldPath))switch(vn.op){case"==":case"in":Ft.set(qt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Ft.set(qt.fieldPath.canonicalString(),vn.value),Array.from(Ft.values())}return null}(D,_),H=function(lt,ht){const Ft=[];let qt=!0;for(const vn of Bl(ht)){const cs=0===vn.kind?fb(lt,vn.fieldPath,lt.startAt):mM(lt,vn.fieldPath,lt.startAt);Ft.push(cs.value),qt&&(qt=cs.inclusive)}return new zl(Ft,qt)}(D,_),Y=function(lt,ht){const Ft=[];let qt=!0;for(const vn of Bl(ht)){const cs=0===vn.kind?mM(lt,vn.fieldPath,lt.endAt):fb(lt,vn.fieldPath,lt.endAt);Ft.push(cs.value),qt&&(qt=cs.inclusive)}return new zl(Ft,qt)}(D,_),ae=this.hn(_,D,H),Ie=this.hn(_,D,Y),Je=this.ln(_,D,L),ct=this.fn(_.indexId,N,ae,H.inclusive,Ie,Y.inclusive,Je);return te.forEach(ct,lt=>r.H(lt,t.limit).next(ht=>{ht.forEach(Ft=>{const qt=et.fromSegments(Ft.documentKey);l.has(qt)||(l=l.add(qt),g.push(qt))})}))}).next(()=>g)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:gF(En.create(e.filters,"and")).map(r=>Lw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),T=[];for(let N=0;N<_;++N){const L=t?this.dn(t[N/D]):Ib,H=this.wn(e,L,r[N%D],i),Y=this._n(e,L,u[N%D],l),ae=g.map(Ie=>this.wn(e,L,Ie,!0));T.push(...this.createRange(H,Y,ae))}return T}wn(e,t,r,i){const u=new Kg(e,et.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new Kg(e,et.empty(),t,r);return i?u.Je():u}an(e,t){const r=new pF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Un(gr.comparator),D=!1;for(const T of g.filters)for(const N of T.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:_=_.add(N.field));for(const T of g.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Jw;for(const i of Bl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.He(i.kind);Zg.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Jw;return Zg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Jw;return Zg.Ve._e(Td(this.databaseId,t),r.He(function(i){const u=Bl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Jw);let u=0;for(const l of Bl(e)){const g=r[u++];for(const _ of i)if(this.yn(t,l.fieldPath)&&mf(g))i=this.pn(i,l,g);else{const D=_.He(l.kind);Zg.Ve._e(g,D)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of i){const _=new Jw;_.seed(g.Qe()),Zg.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof on&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Db(e),i=eE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return te.forEach(u,g=>i.get([g.indexId,this.uid]).next(_=>{l.push(function(D,T){const N=T?new Ed(T.sequenceNumber,new Do(qg(T.readTime),new et(Qa(T.documentKey)),T.largestBatchId)):Ed.empty(),L=D.fields.map(([H,Y])=>new Cs(gr.fromServerFormat(H),Y));return new gv(D.indexId,D.collectionGroup,L,N)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Db(e),u=eE(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>te.forEach(g,_=>u.put(z1(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),te.forEach(g,_=>this.En(e,i,_).next(D=>{const T=this.An(u,_);return D.isEqual(T)?te.resolve():this.vn(e,u,_,D,T)}))))})}Rn(e,t,r,i){return Xw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Xw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Xw(e);let u=new Un(Ef);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new Kg(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Un(Ef);const i=this.mn(t,e);if(null==i)return r;const u=mv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(mf(l))for(const g of l.arrayValue.values||[])r=r.add(new Kg(t.indexId,e.key,this.dn(g),i))}else r=r.add(new Kg(t.indexId,e.key,Ib,i));return r}vn(e,t,r,i,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,T,N){const L=g.getIterator(),H=_.getIterator();let Y=Ug(L),ae=Ug(H);for(;Y||ae;){let Ie=!1,Je=!1;if(Y&&ae){const ct=D(Y,ae);ct<0?Je=!0:ct>0&&(Ie=!0)}else null!=Y?Je=!0:Ie=!0;Ie?(T(ae),ae=Ug(H)):Je?(N(Y),Y=Ug(L)):(Y=Ug(L),ae=Ug(H))}}(i,u,Ef,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),te.waitFor(l)}Tn(e){let t=1;return eE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Ef(l,g)).filter((l,g,_)=>!g||0!==Ef(l,_[g-1]));const i=[];i.push(e);for(const l of r){const g=Ef(l,e),_=Ef(l,t);if(0===g)i[0]=e.Je();else if(g>0&&_<0)i.push(l),i.push(l.Je());else if(_>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Ib,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Ib,[]]))}return u}bn(e,t){return Ef(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eO)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ut())).next(eO)}}function X1(n){return hi(n,"collectionParents")}function Xw(n){return hi(n,"indexEntries")}function Db(n){return hi(n,"indexConfiguration")}function eE(n){return hi(n,"indexState")}function eO(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;di(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Do(e.readTime,e.documentKey,t)}const tO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bs(e,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(T,N,L)=>(g++,L.delete()));u.push(_.next(()=>{mt(1===g)}));const D=[];for(const T of t.mutations){const N=GC(e,T.key.path,t.batchId);u.push(i.delete(N)),D.push(T.key)}return te.waitFor(u).next(()=>D)}function Cb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class bb{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new bb(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return If(e).X({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Bv(e),l=If(e);return l.add({}).next(g=>{mt("number"==typeof g);const _=new EM(g,t,r,i),D=function(L,H,Y){const ae=Y.baseMutations.map(Je=>Kw(L.fe,Je)),Ie=Y.mutations.map(Je=>Kw(L.fe,Je));return{userId:H,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ae,mutations:Ie}}(this.serializer,this.userId,_),T=[];let N=new Un((L,H)=>Bt(L.canonicalString(),H.canonicalString()));for(const L of i){const H=GC(this.userId,L.key.path,g);N=N.add(L.key.path.popLast()),T.push(l.put(D)),T.push(u.put(H,zC))}return N.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),te.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return If(e).get(t).next(r=>r?(mt(r.userId===this.userId),Wg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return If(e).X({index:"userMutationsIndex",range:i},(l,g,_)=>{g.userId===this.userId&&(mt(g.batchId>=r),u=Wg(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return If(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return If(e).j("userMutationsIndex",t).next(r=>r.map(i=>Wg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Bv(e).X({range:i},(l,g,_)=>{const[D,T,N]=l,L=Qa(T);if(D===this.userId&&t.path.isEqual(L))return If(e).get(N).next(H=>{if(!H)throw ut();mt(H.userId===this.userId),u.push(Wg(this.serializer,H))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(Bt);const i=[];return t.forEach(u=>{const l=wv(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Bv(e).X({range:g},(D,T,N)=>{const[L,H,Y]=D,ae=Qa(H);L===this.userId&&u.path.isEqual(ae)?r=r.add(Y):N.done()});i.push(_)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=wv(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Un(Bt);return Bv(e).X({range:l},(_,D,T)=>{const[N,L,H]=_,Y=Qa(L);N===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(g=g.add(H)):T.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(If(e).get(u).next(l=>{if(null===l)throw ut();mt(l.userId===this.userId),r.push(Wg(this.serializer,l))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return nO(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Bv(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=Qa(u[1]);i.push(_)}else g.done()}).next(()=>{mt(0===i.length)})})}containsKey(e,t){return rO(e,this.userId,t)}xn(e){return iO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rO(n,e,t){const r=wv(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Bv(n).X({range:u,Y:!0},(g,_,D)=>{const[T,N,L]=g;T===e&&N===i&&(l=!0),D.done()}).next(()=>l)}function If(n){return hi(n,"mutations")}function Bv(n){return hi(n,"documentMutations")}function iO(n){return hi(n,"mutationQueues")}class Yg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yg(0)}static Mn(){return new Yg(-1)}}class vF{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Yg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>It.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jv(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return jv(e).X((l,g)=>{const _=Yw(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>te.waitFor(u)).next(()=>i)}forEachTarget(e,t){return jv(e).X((r,i)=>{const u=Yw(i);t(u)})}$n(e){return sO(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}On(e,t){return sO(e).put("targetGlobalKey",t)}Fn(e,t){return jv(e).put(H1(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_f(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return jv(e).X({range:i,index:"queryTargetsIndex"},(l,g,_)=>{const D=Yw(g);Ov(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Df(e);return t.forEach(l=>{const g=Yi(l.path);i.push(u.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Df(e);return te.forEach(t,u=>{const l=Yi(u.path);return te.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Df(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Df(e);let u=Kt();return i.X({range:r,Y:!0},(l,g,_)=>{const D=Qa(l[1]),T=new et(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Yi(t.path),i=IDBKeyRange.bound([r],[VC(r)],!1,!0);let u=0;return Df(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return jv(e).get(t).next(r=>r?Yw(r):null)}}function jv(n){return hi(n,"targets")}function sO(n){return hi(n,"targetGlobal")}function Df(n){return hi(n,"targetDocuments")}function oO([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class _F{constructor(e){this.Ln=e,this.buffer=new Un(oO),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ku(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield jl(r)}yield t.Qn(3e5)}))}}class wF{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(Ur.ct);const r=new _F(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(tO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tO):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,l,g,_,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,l=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),Ew()<=js.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(D-_)+`ms\nTotal Duration: ${D-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:N})))}}class EF{constructor(e,t){this.db=e,this.garbageCollector=function uO(n,e){return new wF(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Tb(e,r)}removeReference(e,t,r){return Tb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tb(e,t)}Xn(e,t){return function(r,i){let u=!1;return iO(r).Z(l=>rO(r,l,i).next(g=>(g&&(u=!0),te.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),Df(e).delete([0,Yi(l.path)])))});i.push(_)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tb(e,t)}Yn(e,t){const r=Df(e);let i,u=Ur.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==Ur.ct&&t(new et(Qa(i)),u),u=D,i=_):u=Ur.ct}).next(()=>{u!==Ur.ct&&t(new et(Qa(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tb(n,e){return Df(n).put((r=n.currentSequenceNumber,{targetId:0,path:Yi(e.path),sequenceNumber:r}));var r}class lO{constructor(){this.changes=new G(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qg(e).put(r)}removeEntry(e,t,r){return Qg(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],_b(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Qg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tE(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Qg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tE(t))},(i,u)=>{r={document:this.ts(t,u),size:Cb(u)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,u)=>{const l=this.ts(i,u);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=fe(),i=new xn(et.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),i=i.insert(u,Cb(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new Un(fO);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(tE(i.first()),tE(i.last())),l=i.getIterator();let g=l.getNext();return Qg(e).X({index:"documentKeyIndex",range:u},(_,D,T)=>{const N=et.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&fO(g,N)<0;)r(g,null),g=l.getNext();g&&g.isEqual(N)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?T.G(tE(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),_b(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qg(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=fe();for(const T of _){const N=this.ts(et.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);N.isFoundDocument()&&(C(t,N)||i.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,i){let u=fe();const l=hO(t,r),g=hO(t,Do.max());return Qg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,T)=>{const N=this.ts(et.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new DF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dO(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Zn(e,t){return dO(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function uF(n,e){let t;if(e.document)t=k1(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=qg(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=et.fromSegments(e.unknownDocument.path),i=qg(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Qn.newInvalidDocument(e)}}function cO(n){return new IF(n)}class DF extends lO{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new G(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Un((u,l)=>Bt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=$1(this.os.serializer,l);i=i.add(u.path.popLast());const D=Cb(_);r+=D-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=$1(this.os.serializer,l.convertToNoDocument(It.min()));t.push(this.os.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function dO(n){return hi(n,"remoteDocumentGlobal")}function Qg(n){return hi(n,"remoteDocumentsV14")}function tE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hO(n,e){const t=e.documentKey.path.toArray();return[n,_b(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Bt(t[u],r[u]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class CF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Hw(r.mutation,i,zs.empty(),or.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=we();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=We();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=we();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,i){let u=fe();const l=Zt(),g=Zt();return t.forEach((_,D)=>{const T=r.get(D.key);i.has(D.key)&&(void 0===T||T.mutation instanceof Sd)?u=u.insert(D.key,D):void 0!==T?(l.set(D.key,T.mutation.getFieldMask()),Hw(T.mutation,D,T.mutation.getFieldMask(),or.now())):l.set(D.key,zs.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,T)=>l.set(D,T)),t.forEach((D,T)=>{var N;return g.set(D,new CF(T,null!==(N=l.get(D))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Zt();let i=new xn((l,g)=>l-g),u=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let T=r.get(_)||zs.empty();T=g.applyToLocalView(D,T),r.set(_,T);const N=(i.get(g.batchId)||Kt()).add(_);i=i.insert(g.batchId,N)})}).next(()=>{const l=[],g=i.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,T=_.value,N=At();T.forEach(L=>{if(!u.has(L)){const H=g1(t.get(L),r.get(L));null!==H&&N.set(L,H),u=u.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,N))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):s(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):te.resolve(we());let g=-1,_=u;return l.next(D=>te.forEach(D,(T,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next(L=>{_=_.insert(T,L)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,Kt())).next(T=>({batchId:g,changes:yt(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=We();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=We();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,g=>{const _=(D=t,T=g.child(i),new Wl(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((T,N)=>{u=u.insert(T,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,Qn.newInvalidDocument(D)))});let l=We();return u.forEach((g,_)=>{const D=i.get(g);void 0!==D&&Hw(D.mutation,_,zs.empty(),or.now()),C(t,_)&&(l=l.insert(g,_))}),l})}}class bF{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Qr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:xM(r.bundledQuery),readTime:Qr(r.readTime)}),te.resolve();var r}}class TF{constructor(){this.overlays=new xn(et.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=we();return te.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=we(),u=t.length+1,l=new et(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new xn((D,T)=>D-T);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=we(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const g=we(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,T)=>g.set(D,T)),!(g.size()>=i)););return te.resolve(g)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new DM(t,r));let u=this.ls.get(t);void 0===u&&(u=Kt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class VM{constructor(){this.fs=new Un(Qi.ds),this.ws=new Un(Qi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Qi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Qi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new un([])),r=new Qi(t,e),i=new Qi(t,e+1),u=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new un([])),r=new Qi(t,e),i=new Qi(t,e+1);let u=Kt();return this.ws.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Qi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||Bt(e.As,t.As)}static _s(e,t){return Bt(e.As,t.As)||et.comparator(e.key,t.key)}}class SF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Un(Qi.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const l=new EM(u,t,r,i);this.mutationQueue.push(l);for(const g of i)this.Rs=this.Rs.add(new Qi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qi(t,0),i=new Qi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],l=>{const g=this.Ps(l.As);u.push(g)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(Bt);return t.forEach(i=>{const u=new Qi(i,0),l=new Qi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;et.isDocumentKey(u)||(u=u.child(""));const l=new Qi(new et(u),0);let g=new Un(Bt);return this.Rs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(g=g.add(_.As)),!0)},l),te.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){mt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const u=new Qi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Qi(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AF{constructor(e){this.Ds=e,this.docs=new xn(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Qn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=fe();const l=t.path,g=new et(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:T}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||di(UC(T),r)<=0||(i.has(T.key)||C(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,t,r,i){ut()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MF(this)}getSize(e){return te.resolve(this.size)}}class MF extends lO{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class NF{constructor(e){this.persistence=e,this.xs=new G(t=>_f(t),Ov),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ns=0,this.ks=new VM,this.targetCount=0,this.Ms=Yg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),te.waitFor(u).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class UM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ur(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new NF(this),this.indexManager=new mF,this.remoteDocumentCache=new AF(r=>this.referenceDelegate.Ls(r)),this.serializer=new j1(t),this.qs=new bF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new SF(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new xF(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class xF extends yv{constructor(e){super(),this.currentSequenceNumber=e}}class Sb{constructor(e){this.persistence=e,this.Qs=new VM,this.js=null}static zs(e){return new Sb(e)}get Ws(){if(this.js)return this.js;throw ut()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,It.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class RF{constructor(e){this.serializer=e}O(e,t,r,i){const u=new Vg("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HC,{unique:!0}),g.createObjectStore("documentMutations"),gO(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),gO(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HC,{unique:!0});const T=_.store("mutations"),N=D.map(L=>T.put(L));return te.waitFor(N)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(u))),r<6&&i>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(u))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(u))),r<11&&i>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:ff});_.createIndex("collectionPathOverlayIndex",Ev,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",JC,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:e1});_.createIndex("documentKeyIndex",qC),_.createIndex("collectionGroupIndex",sM)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,u))),r<15&&i>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:KC}).createIndex("sequenceNumberIndex",oM,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:YC}).createIndex("documentKeyIndex",QC,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Cb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>te.forEach(g,_=>{mt(_.userId===u.userId);const D=Wg(this.serializer,_);return nO(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((l,g)=>{const _=new un(l),D=[0,Yi(_)];u.push(t.get(D).next(T=>T?te.resolve():t.put({targetId:0,path:Yi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ZC});const r=t.store("collectionParents"),i=new LM,u=l=>{if(i.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:Yi(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new un(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],D)=>{const T=Qa(g);return u(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=Yw(i),l=H1(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new et(un.fromString(D.document.name).popFirst(5)):D.noDocument?et.fromSegments(D.noDocument.path):D.unknownDocument?et.fromSegments(D.unknownDocument.path):ut()).path.toArray();var D;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(g.put(T))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=cO(this.serializer),u=new UM(Sb.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var D;let T=null!==(D=g.get(_.userId))&&void 0!==D?D:Kt();Wg(this.serializer,_).keys().forEach(N=>T=T.add(N)),g.set(_.userId,T)}),te.forEach(g,(_,D)=>{const T=new li(D),N=wb.de(this.serializer,T),L=u.getIndexManager(T),H=bb.de(T,this.serializer,L,u.referenceDelegate);return new pO(i,H,N,L).recalculateAndSaveOverlaysForDocumentKeys(new Nw(t,Ur.ct),_).next()})})}}function gO(n){n.createObjectStore("targetDocuments",{keyPath:t1}).createIndex("documentTargetsIndex",Aw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WC,{unique:!0}),n.createObjectStore("targetGlobal")}const BM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jM{constructor(e,t,r,i,u,l,g,_,D,T,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=D,this.oi=T,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!jM.D())throw new Se(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EF(this,i),this.di=t+"main",this.serializer=new j1(_),this.wi=new Co(this.di,this.ui,new RF(this.serializer)),this.Bs=new vF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cO(this.serializer),this.qs=new lF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&Ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(oe.FAILED_PRECONDITION,BM);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ur(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ku(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return nE(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return Mb(e).delete(this.clientId)}bi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=hi(r,"clientMetadata");return i.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return te.forEach(g,_=>i.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):nE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(oe.FAILED_PRECONDITION,BM);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mb(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Nw(t,Ur.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Mb(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return bb.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yF(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return wb.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?eb:14===l?uM:13===l?XC:12===l?aM:11===l?Mw:void ut();var l;let g;return this.wi.runTransaction(e,i,u,_=>(g=new Nw(_,this.Os?this.Os.next():Ur.ct),"readwrite-primary"===t?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw Ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Se(oe.FAILED_PRECONDITION,BC);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return nE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(oe.FAILED_PRECONDITION,BM)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nE(e).put("owner",t)}static D(){return Co.D()}Ai(e){const t=nE(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,tn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ar("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nE(n){return hi(n,"owner")}function Mb(n){return hi(n,"clientMetadata")}function $M(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Kt(),i=Kt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new HM(e,t.fromCache,r,i)}}class mO{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(vM(t))return te.resolve(null);let r=a(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=h(t,null,"F"),r=a(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Kt(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.ji(t,g);return this.zi(t,D,l,_.readTime)?this.Ki(e,h(t,null,"F")):this.Wi(e,D,t,_)}))})))}Gi(e,t,r,i){return vM(t)||i.isEqual(It.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,i)?this.Qi(e,t):(Ew()<=js.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),E(t)),this.Wi(e,l,t,Cw(i,-1)))})}ji(e,t){let r=new Un(R(e));return t.forEach((i,u)=>{C(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return Ew()<=js.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",E(t)),this.Ui.getDocumentsMatchingQuery(e,t,Do.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class OF{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new xn(Bt),this.Yi=new G(u=>_f(u),Ov),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function yO(n,e,t,r){return new OF(n,e,t,r)}function vO(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,he.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=Kt();for(const D of i){l.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}for(const D of u){g.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(D=>({er:D,removedBatchIds:l,addedBatchIds:g}))})})}),GM.apply(this,arguments)}function _O(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function wO(n,e,t){let r=Kt(),i=Kt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=fe();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(i=i.add(g)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ue("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{nr:l,sr:i}})}function FF(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $v(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,te.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Ad(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Hv(n,e,t){return zM.apply(this,arguments)}function zM(){return zM=(0,he.Z)(function*(n,e,t){const r=nt(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ku(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),zM.apply(this,arguments)}function Nb(n,e,t){const r=nt(n);let i=It.min(),u=Kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const T=nt(g),N=T.Yi.get(D);return void 0!==N?te.resolve(T.Ji.get(N)):T.Bs.getTargetData(_,D)}(r,l,a(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?u:Kt())).next(g=>(DO(r,A(e),g),{documents:g,ir:u})))}function EO(n,e){const t=nt(n),r=nt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function IO(n,e){const t=nt(n),r=t.Xi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Cw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DO(t,e,i),i))}function DO(n,e,t){let r=n.Xi.get(e)||It.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function qM(){return qM=(0,he.Z)(function*(n,e,t,r){const i=nt(n);let u=Kt(),l=fe();for(const D of t){const T=e.rr(D.metadata.name);D.document&&(u=u.add(T));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(T,N)}const g=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield $v(i,(D=r,a($g(un.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>wO(D,g,l).next(T=>(g.apply(D),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>i.Bs.addMatchingKeys(D,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),qM.apply(this,arguments)}function VF(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,he.Z)(function*(n,e,t=Kt()){const r=yield $v(n,a(xM(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Qr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Yr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(g.targetId,g),i.Bs.updateTargetData(u,g).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),WM.apply(this,arguments)}function CO(n,e){return`firestore_clients_${n}_${e}`}function bO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZM(n,e){return`firestore_targets_${n}_${e}`}class xb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Se(i.error.code,i.error.message))),l?new xb(e,t,i.state,u):(Ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Se(r.error.code,r.error.message))),u?new rE(e,r.state,i):(Ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=_M();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=_v(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new Rb(e,u):(Ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KM{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KM(t.clientId,t.onlineState):(Ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YM{constructor(){this.activeTargetIds=_M()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QM{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xn(Bt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=CO(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new YM),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(CO(e.persistenceKey,i));if(u){const l=Rb.ar(i,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZM(this.persistenceKey,e));if(r){const i=rE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZM(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let l=Ur.ct;if(null!=u)try{const g=JSON.parse(u);mt("number"==typeof g),l=g}catch(g){Ar("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);i!==Ur.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new xb(this.currentUser,e,t,r),u=bO(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=bO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=ZM(this.persistenceKey,e),u=new rE(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Rb.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return xb.ar(new li(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return rE.ar(i,t)}br(e){return KM.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_M();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TO{constructor(){this.Hr=new YM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new YM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UF{Yr(e){}shutdown(){}}class SO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ob=null;function JM(){return null===Ob?Ob=268435456+Math.round(2147483648*Math.random()):Ob++,"0x"+Ob.toString(16)}const BF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jF{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ts="WebChannelConnection";class $F extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const l=JM(),g=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,i,u),this.Ao(e,g,_,r).then(D=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw Gs("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,t,r,i,u,l){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${BF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=JM();return new Promise((l,g)=>{const _=new ZA;_.setWithCredentials(!0),_.listenOnce(_w.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case dv.NO_ERROR:const T=_.getResponseJson();Ue(Ts,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case dv.TIMEOUT:Ue(Ts,`RPC '${e}' ${u} timed out`),g(new Se(oe.DEADLINE_EXCEEDED,"Request time out"));break;case dv.HTTP_ERROR:const N=_.getStatus();if(Ue(Ts,`RPC '${e}' ${u} failed with status:`,N,"response text:",_.getResponseText()),N>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const H=L?.error;if(H&&H.status&&H.message){const Y=function(ae){const Ie=ae.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Ie)>=0?Ie:oe.UNKNOWN}(H.status);g(new Se(Y,H.message))}else g(new Se(oe.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Se(oe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ue(Ts,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(i);Ue(Ts,`RPC '${e}' ${u} sending request:`,i),_.send(t,"POST",D,r,15)})}Ro(e,t,r){const i=JM(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cf(),g=WA(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new zR({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const T=u.join("");Ue(Ts,`Creating RPC '${e}' stream ${i}: ${T}`,_);const N=l.createWebChannel(T,_);let L=!1,H=!1;const Y=new jF({ro:Ie=>{H?Ue(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,Ie):(L||(Ue(Ts,`Opening RPC '${e}' stream ${i} transport.`),N.open(),L=!0),Ue(Ts,`RPC '${e}' stream ${i} sending:`,Ie),N.send(Ie))},oo:()=>N.close()}),ae=(Ie,Je,ct)=>{Ie.listen(Je,lt=>{try{ct(lt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return ae(N,hv.EventType.OPEN,()=>{H||Ue(Ts,`RPC '${e}' stream ${i} transport opened.`)}),ae(N,hv.EventType.CLOSE,()=>{H||(H=!0,Ue(Ts,`RPC '${e}' stream ${i} transport closed`),Y.wo())}),ae(N,hv.EventType.ERROR,Ie=>{H||(H=!0,Gs(Ts,`RPC '${e}' stream ${i} transport errored:`,Ie),Y.wo(new Se(oe.UNAVAILABLE,"The operation could not be completed")))}),ae(N,hv.EventType.MESSAGE,Ie=>{var Je;if(!H){const ct=Ie.data[0];mt(!!ct);const ht=ct.error||(null===(Je=ct[0])||void 0===Je?void 0:Je.error);if(ht){Ue(Ts,`RPC '${e}' stream ${i} received error:`,ht);const Ft=ht.status;let qt=function(cs){const iu=fi[cs];if(void 0!==iu)return E1(iu)}(Ft),vn=ht.message;void 0===qt&&(qt=oe.INTERNAL,vn="Unknown error status: "+Ft+" with message "+ht.message),H=!0,Y.wo(new Se(qt,vn)),N.close()}else Ue(Ts,`RPC '${e}' stream ${i} received:`,ct),Y._o(ct)}}),ae(g,GR.STAT_EVENT,Ie=>{Ie.stat===LC.PROXY?Ue(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):Ie.stat===LC.NOPROXY&&Ue(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Y.fo()},0),Y}}function AO(){return typeof window<"u"?window:null}function Pb(){return typeof document<"u"?document:null}function iE(n){return new Jk(n,!0)}class XM{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class MO{constructor(e,t,r,i,u,l,g,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new XM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,he.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,he.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Se(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,he.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HF extends MO{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function tF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),i=e.targetChange.targetIds||[],u=function(_,D){return _.useProto3Json?(mt(void 0===D||"string"==typeof D),Yr.fromBase64String(D||"")):(mt(void 0===D||D instanceof Uint8Array),Yr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?oe.UNKNOWN:E1(_.code);return new Se(D,_.message||"")}(l);t=new T1(r,i,u,g||null)}else if("documentChange"in e){const r=e.documentChange,i=Zl(n,r.document.name),u=Qr(r.document.updateTime),l=r.document.createTime?Qr(r.document.createTime):It.min(),g=new Oi({mapValue:{fields:r.document.fields}}),_=Qn.newFoundDocument(i,u,l,g);t=new vb(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Zl(n,r.document),u=r.readTime?Qr(r.readTime):It.min(),l=Qn.newNoDocument(i,u);t=new vb([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Zl(n,r.document);t=new vb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,{count:i=0,unchangedNames:u}=r,l=new qk(i,u);t=new b1(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?Qr(u.readTime):It.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Zw(this.serializer),t.addTarget=function(i,u){let l;const g=u.target;if(l=Vw(g)?{documents:F1(i,g)}:{query:NM(i,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=N1(i,u.resumeToken);const _=TM(i,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(It.min())>0){l.readTime=Vv(i,u.snapshotVersion.toTimestamp());const _=TM(i,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function rF(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Zw(this.serializer),t.removeTarget=e,this.Wo(t)}}class GF extends MO{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function nF(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,i){let u=Qr(r.updateTime?r.updateTime:i);return u.isEqual(It.min())&&(u=Qr(i)),new $k(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.cu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Zw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kw(this.serializer,r))};this.Wo(t)}}class zF extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Se(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(oe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(oe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class WF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ar(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ZF{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,he.Z)(function*(){var _;Cf(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,he.Z)(function*(D){const T=nt(D);T.vu.add(4),yield Gv(T),T.bu.set("Unknown"),T.vu.delete(4),yield sE(T)}),function(D){return _.apply(this,arguments)})(l))}))}),this.bu=new WF(r,i)}}function sE(n){return tN.apply(this,arguments)}function tN(){return tN=(0,he.Z)(function*(n){if(Cf(n))for(const e of n.Ru)yield e(!0)}),tN.apply(this,arguments)}function Gv(n){return nN.apply(this,arguments)}function nN(){return nN=(0,he.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),nN.apply(this,arguments)}function kb(n,e){const t=nt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),sN(t)?iN(t):qv(t).Ko()&&rN(t,e))}function oE(n,e){const t=nt(n),r=qv(t);t.Au.delete(e),r.Ko()&&NO(t,e),0===t.Au.size&&(r.Ko()?r.jo():Cf(t)&&t.bu.set("Unknown"))}function rN(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qv(n).su(e)}function NO(n,e){n.Vu.qt(e),qv(n).iu(e)}function iN(n){n.Vu=new Zk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),qv(n).start(),n.bu.gu()}function sN(n){return Cf(n)&&!qv(n).Uo()&&n.Au.size>0}function Cf(n){return 0===nt(n).vu.size}function xO(n){n.Vu=void 0}function KF(n){return oN.apply(this,arguments)}function oN(){return oN=(0,he.Z)(function*(n){n.Au.forEach((e,t)=>{rN(n,e)})}),oN.apply(this,arguments)}function YF(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,he.Z)(function*(n,e){xO(n),sN(n)?(n.bu.Iu(e),iN(n)):n.bu.set("Unknown")}),aN.apply(this,arguments)}function QF(n,e,t){return uN.apply(this,arguments)}function uN(){return uN=(0,he.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof T1&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,u){const l=u.cause;for(const g of u.targetIds)i.Au.has(g)&&(yield i.remoteSyncer.rejectListen(g,l),i.Au.delete(g),i.Vu.removeTarget(g))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fb(n,r)}else if(e instanceof vb?n.Vu.Ht(e):e instanceof b1?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(It.min()))try{const r=yield _O(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=i.Au.get(_);D&&i.Au.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const D=i.Au.get(g);if(!D)return;i.Au.set(g,D.withResumeToken(Yr.EMPTY_BYTE_STRING,D.snapshotVersion)),NO(i,g);const T=new Ad(D.target,g,_,D.sequenceNumber);rN(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield Fb(n,r)}var r}),uN.apply(this,arguments)}function Fb(n,e,t){return lN.apply(this,arguments)}function lN(){return lN=(0,he.Z)(function*(n,e,t){if(!Ku(e))throw e;n.vu.add(1),yield Gv(n),n.bu.set("Offline"),t||(t=()=>_O(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield sE(n)}))}),lN.apply(this,arguments)}function RO(n,e){return e().catch(t=>Fb(n,t,e))}function zv(n){return cN.apply(this,arguments)}function cN(){return cN=(0,he.Z)(function*(n){const e=nt(n),t=bf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;JF(e);)try{const i=yield FF(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,XF(e,i)}catch(i){yield Fb(e,i)}OO(e)&&PO(e)}),cN.apply(this,arguments)}function JF(n){return Cf(n)&&n.Eu.length<10}function XF(n,e){n.Eu.push(e);const t=bf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function OO(n){return Cf(n)&&!bf(n).Uo()&&n.Eu.length>0}function PO(n){bf(n).start()}function eL(n){return dN.apply(this,arguments)}function dN(){return dN=(0,he.Z)(function*(n){bf(n).hu()}),dN.apply(this,arguments)}function tL(n){return hN.apply(this,arguments)}function hN(){return hN=(0,he.Z)(function*(n){const e=bf(n);for(const t of n.Eu)e.uu(t.mutations)}),hN.apply(this,arguments)}function nL(n,e,t){return fN.apply(this,arguments)}function fN(){return fN=(0,he.Z)(function*(n,e,t){const r=n.Eu.shift(),i=IM.from(r,e,t);yield RO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zv(n)}),fN.apply(this,arguments)}function rL(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,he.Z)(function*(n,e){var t;e&&bf(n).ou&&(yield(t=(0,he.Z)(function*(r,i){if(w1(u=i.code)&&u!==oe.ABORTED){const l=r.Eu.shift();bf(r).Qo(),yield RO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield zv(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),OO(n)&&PO(n)}),pN.apply(this,arguments)}function kO(n,e){return gN.apply(this,arguments)}function gN(){return gN=(0,he.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Cf(t);t.vu.add(3),yield Gv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield sE(t)}),gN.apply(this,arguments)}function mN(n,e){return yN.apply(this,arguments)}function yN(){return yN=(0,he.Z)(function*(n,e){const t=nt(n);e?(t.vu.delete(2),yield sE(t)):e||(t.vu.add(2),yield Gv(t),t.bu.set("Unknown"))}),yN.apply(this,arguments)}function qv(n){return n.Su||(n.Su=function(e,t,r){const i=nt(e);return i.fu(),new HF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:KF.bind(null,n),ao:YF.bind(null,n),nu:QF.bind(null,n)}),n.Ru.push(function(){var e=(0,he.Z)(function*(t){t?(n.Su.Qo(),sN(n)?iN(n):n.bu.set("Unknown")):(yield n.Su.stop(),xO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function bf(n){return n.Du||(n.Du=function(e,t,r){const i=nt(e);return i.fu(),new GF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:eL.bind(null,n),ao:rL.bind(null,n),au:tL.bind(null,n),cu:nL.bind(null,n)}),n.Ru.push(function(){var e=(0,he.Z)(function*(t){t?(n.Du.Qo(),yield zv(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class vN{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,g=new vN(e,t,l,i,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wv(n,e){if(Ar("AsyncQueue",`${e}: ${n}`),Ku(n))return new Se(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Zv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=We(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Zv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FO{constructor(){this.Cu=new xn(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ut():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kv{constructor(e,t,r,i,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Kv(e,t,Zv.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class iL{constructor(){this.Nu=void 0,this.listeners=[]}}class sL{constructor(){this.queries=new G(e=>y(e),p),this.onlineState="Unknown",this.ku=new Set}}function _N(n,e){return wN.apply(this,arguments)}function wN(){return wN=(0,he.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new iL),i)try{u.Nu=yield t.onListen(r)}catch(l){const g=Wv(l,`Initialization of query '${E(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&DN(t)}),wN.apply(this,arguments)}function EN(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,he.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),IN.apply(this,arguments)}function oL(n,e){const t=nt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const g of l.listeners)g.$u(i)&&(r=!0);l.Nu=i}}r&&DN(t)}function aL(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function DN(n){n.ku.forEach(e=>{e.next()})}class CN{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Kv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class uL{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class LO{constructor(e){this.serializer=e}rr(e){return Zl(this.serializer,e)}ur(e){return e.metadata.exists?k1(this.serializer,e.document,!1):Qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Qr(e)}}class lL{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VO(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=un.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new LO(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const l of i.metadata.queries){const g=(t.get(l)||Kt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function LF(n,e,t,r){return qM.apply(this,arguments)}(e.localStore,new LO(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield VF(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function VO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class UO{constructor(e){this.key=e}}class BO{constructor(e){this.key=e}}class jO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Kt(),this.mutatedKeys=Kt(),this.tc=R(e),this.ec=new Zv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new FO,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,g=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,D="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,N)=>{const L=i.get(T),H=C(this.query,N)?N:null,Y=!!L&&this.mutatedKeys.has(L.key),ae=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Ie=!1;L&&H?L.data.isEqual(H.data)?Y!==ae&&(r.track({type:3,doc:H}),Ie=!0):this.rc(L,H)||(r.track({type:2,doc:H}),Ie=!0,(_&&this.tc(H,_)>0||D&&this.tc(H,D)<0)&&(g=!0)):!L&&H?(r.track({type:0,doc:H}),Ie=!0):L&&!H&&(r.track({type:1,doc:L}),Ie=!0,(_||D)&&(g=!0)),Ie&&(H?(l=l.add(H),u=ae?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,T)=>function(N,L){const H=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return H(N)-H(L)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Kv(this.query,e.ec,i,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new FO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Kt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new BO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new UO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Kt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Kv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class cL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dL{constructor(e){this.key=e,this.fc=!1}}class hL{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new G(g=>y(g),p),this._c=new Map,this.mc=new Set,this.gc=new xn(et.comparator),this.yc=new Map,this.Ic=new VM,this.Tc={},this.Ec=new Map,this.Ac=Yg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function fL(n,e){return bN.apply(this,arguments)}function bN(){return bN=(0,he.Z)(function*(n,e){const t=ZN(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const l=yield $v(t.localStore,a(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield TN(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&kb(t.remoteStore,l)}return i}),bN.apply(this,arguments)}function TN(n,e,t,r,i){return SN.apply(this,arguments)}function SN(){return SN=(0,he.Z)(function*(n,e,t,r,i){n.Rc=(N,L,H)=>{return(Y=(0,he.Z)(function*(ae,Ie,Je,ct){let lt=Ie.view.sc(Je);lt.zi&&(lt=yield Nb(ae.localStore,Ie.query,!1).then(({documents:qt})=>Ie.view.sc(qt,lt)));const ht=ct&&ct.targetChanges.get(Ie.targetId),Ft=Ie.view.applyChanges(lt,ae.isPrimaryClient,ht);return LN(ae,Ie.targetId,Ft.cc),Ft.snapshot}),function(ae,Ie,Je,ct){return Y.apply(this,arguments)})(n,N,L,H);var Y};const u=yield Nb(n.localStore,e,!0),l=new jO(e,u.ir),g=l.sc(u.documents),_=qw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),D=l.applyChanges(g,n.isPrimaryClient,_);LN(n,t,D.cc);const T=new cL(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),SN.apply(this,arguments)}function pL(n,e){return AN.apply(this,arguments)}function AN(){return AN=(0,he.Z)(function*(n,e){const t=nt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!p(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),oE(t.remoteStore,r.targetId),Yv(t,r.targetId)}).catch(jl))):(Yv(t,r.targetId),yield Hv(t.localStore,r.targetId,!0))}),AN.apply(this,arguments)}function MN(){return MN=(0,he.Z)(function*(n,e,t){const r=KN(n);try{const i=yield function(u,l){const g=nt(u),_=or.now(),D=l.reduce((L,H)=>L.add(H.key),Kt());let T,N;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let H=fe(),Y=Kt();return g.Zi.getEntries(L,D).next(ae=>{H=ae,H.forEach((Ie,Je)=>{Je.isValidDocument()||(Y=Y.add(Ie))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,H)).next(ae=>{T=ae;const Ie=[];for(const Je of l){const ct=Gk(Je,T.get(Je.key).overlayedDocument);null!=ct&&Ie.push(new Sd(Je.key,ct,fM(ct.value.mapValue),yr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,_,Ie,l)}).next(ae=>{N=ae;const Ie=ae.applyToLocalDocumentSet(T,Y);return g.documentOverlayCache.saveOverlays(L,ae.batchId,Ie)})}).then(()=>({batchId:N.batchId,changes:yt(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new xn(Bt)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Md(r,i.changes),yield zv(r.remoteStore)}catch(i){const u=Wv(i,"Failed to persist write");t.reject(u)}}),MN.apply(this,arguments)}function $O(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,he.Z)(function*(n,e){const t=nt(n);try{const r=yield function kF(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const g=[];e.targetChanges.forEach((T,N)=>{const L=i.get(N);if(!L)return;g.push(t.Bs.removeMatchingKeys(u,T.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,T.addedDocuments,N)));let H=L.withSequenceNumber(u.currentSequenceNumber);var Y,ae,Ie;null!==e.targetMismatches.get(N)?H=H.withResumeToken(Yr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):T.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(T.resumeToken,r)),i=i.insert(N,H),ae=H,Ie=T,(0===(Y=L).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,H))});let _=fe(),D=Kt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(wO(u,l,e.documentUpdates).next(T=>{_=T.nr,D=T.sr})),!r.isEqual(It.min())){const T=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(T)}return te.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.yc.get(u);l&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?mt(l.fc):i.removedDocuments.size>0&&(mt(l.fc),l.fc=!1))}),yield Md(t,r,e)}catch(r){yield jl(r)}}),NN.apply(this,arguments)}function HO(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&i.push(g.snapshot)}),function(u,l){const g=nt(u);g.onlineState=l;let _=!1;g.queries.forEach((D,T)=>{for(const N of T.listeners)N.Mu(l)&&(_=!0)}),_&&DN(g)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mL(n,e,t){return xN.apply(this,arguments)}function xN(){return xN=(0,he.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let l=new xn(et.comparator);l=l.insert(u,Qn.newNoDocument(u,It.min()));const g=Kt().add(u),_=new zw(It.min(),new Map,new xn(Bt),l,g);yield $O(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),VN(r)}else yield Hv(r.localStore,e,!1).then(()=>Yv(r,e,t)).catch(jl)}),xN.apply(this,arguments)}function yL(n,e){return RN.apply(this,arguments)}function RN(){return RN=(0,he.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield function PF(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const T=_.batch,N=T.keys();let L=te.resolve();return N.forEach(H=>{L=L.next(()=>D.getEntry(g,H)).next(Y=>{const ae=_.docVersions.get(H);mt(null!==ae),Y.version.compareTo(ae)<0&&(T.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),D.addEntry(Y)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(g,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=Kt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);FN(t,r,null),kN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Md(t,i)}catch(i){yield jl(i)}}),RN.apply(this,arguments)}function vL(n,e,t){return ON.apply(this,arguments)}function ON(){return ON=(0,he.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(u,l){const g=nt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(T=>(mt(null!==T),D=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);FN(r,e,t),kN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Md(r,i)}catch(i){yield jl(i)}}),ON.apply(this,arguments)}function PN(){return PN=(0,he.Z)(function*(n,e){const t=nt(n);Cf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=nt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Wv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),PN.apply(this,arguments)}function kN(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function FN(n,e,t){const r=nt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Yv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||GO(n,r)})}function GO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(oE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),VN(n))}function LN(n,e,t){for(const r of t)r instanceof UO?(n.Ic.addReference(r.key,e),wL(n,r)):r instanceof BO?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||GO(n,r.key)):ut()}function wL(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),VN(n))}function VN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(un.fromString(e)),r=n.Ac.next();n.yc.set(r,new dL(t)),n.gc=n.gc.insert(t,r),kb(n.remoteStore,new Ad(a($g(t.path)),r,"TargetPurposeLimboResolution",Ur.ct))}}function Md(n,e,t){return UN.apply(this,arguments)}function UN(){return UN=(0,he.Z)(function*(n,e,t){const r=nt(n),i=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){i.push(D);const T=HM.Li(_.targetId,D);u.push(T)}}))}),yield Promise.all(l),r.dc.nu(i),yield(g=(0,he.Z)(function*(_,D){const T=nt(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>te.forEach(D,L=>te.forEach(L.Fi,H=>T.persistence.referenceDelegate.addReference(N,L.targetId,H)).next(()=>te.forEach(L.Bi,H=>T.persistence.referenceDelegate.removeReference(N,L.targetId,H)))))}catch(N){if(!Ku(N))throw N;Ue("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const L=N.targetId;if(!N.fromCache){const H=T.Ji.get(L),ae=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);T.Ji=T.Ji.insert(L,ae)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),UN.apply(this,arguments)}function EL(n,e){return BN.apply(this,arguments)}function BN(){return BN=(0,he.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield vO(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Se(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Md(t,r.er)}var i}),BN.apply(this,arguments)}function IL(n,e){const t=nt(n),r=t.yc.get(e);if(r&&r.fc)return Kt().add(r.key);{let i=Kt();const u=t._c.get(e);if(!u)return i;for(const l of u){const g=t.wc.get(l);i=i.unionWith(g.view.nc)}return i}}function DL(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,he.Z)(function*(n,e){const t=nt(n),r=yield Nb(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&LN(t,e.targetId,i.cc),i}),jN.apply(this,arguments)}function CL(n,e){return $N.apply(this,arguments)}function $N(){return $N=(0,he.Z)(function*(n,e){const t=nt(n);return IO(t.localStore,e).then(r=>Md(t,r))}),$N.apply(this,arguments)}function bL(n,e,t,r){return HN.apply(this,arguments)}function HN(){return HN=(0,he.Z)(function*(n,e,t,r){const i=nt(n),u=yield function(l,g){const _=nt(l),D=nt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,g).next(N=>N?_.localDocuments.getDocuments(T,N):te.resolve(null)))}(i.localStore,e);var g;null!==u?("pending"===t?yield zv(i.remoteStore):"acknowledged"===t||"rejected"===t?(FN(i,e,r||null),kN(i,e),g=e,nt(nt(i.localStore).mutationQueue).Cn(g)):ut(),yield Md(i,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),HN.apply(this,arguments)}function GN(){return GN=(0,he.Z)(function*(n,e){const t=nt(n);if(ZN(t),KN(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield zO(t,r.toArray());t.vc=!0,yield mN(t.remoteStore,!0);for(const u of i)kb(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Yv(t,l),Hv(t.localStore,l,!0))),oE(t.remoteStore,l)}),yield i,yield zO(t,r),function(u){const l=nt(u);l.yc.forEach((g,_)=>{oE(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new xn(et.comparator)}(t),t.vc=!1,yield mN(t.remoteStore,!1)}}),GN.apply(this,arguments)}function zO(n,e,t){return zN.apply(this,arguments)}function zN(){return zN=(0,he.Z)(function*(n,e,t){const r=nt(n),i=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield $v(r.localStore,a(_[0]));for(const D of _){const T=r.wc.get(D),N=yield DL(r,T);N.snapshot&&u.push(N.snapshot)}}else{const D=yield EO(r.localStore,l);g=yield $v(r.localStore,D),yield TN(r,qO(D),l,!1,g.resumeToken)}i.push(g)}return r.dc.nu(u),i}),zN.apply(this,arguments)}function qO(n){return yM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SL(n){const e=nt(n);return nt(nt(e.localStore).persistence).$i()}function AL(n,e,t,r){return qN.apply(this,arguments)}function qN(){return qN=(0,he.Z)(function*(n,e,t,r){const i=nt(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield IO(i.localStore,A(u[0])),g=zw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yr.EMPTY_BYTE_STRING);yield Md(i,l,g);break}case"rejected":yield Hv(i.localStore,e,!0),Yv(i,e,r);break;default:ut()}}),qN.apply(this,arguments)}function ML(n,e,t){return WN.apply(this,arguments)}function WN(){return WN=(0,he.Z)(function*(n,e,t){const r=ZN(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const u=yield EO(r.localStore,i),l=yield $v(r.localStore,u);yield TN(r,qO(u),l.targetId,!1,l.resumeToken),kb(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Hv(r.localStore,i,!1).then(()=>{oE(r.remoteStore,i),Yv(r,i)}).catch(jl))}}),WN.apply(this,arguments)}function ZN(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$O.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mL.bind(null,e),e.dc.nu=oL.bind(null,e.eventManager),e.dc.Pc=aL.bind(null,e.eventManager),e}function KN(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vL.bind(null,e),e}class aE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.serializer=iE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return yO(this.persistence,new mO,e.initialUser,this.serializer)}createPersistence(e){return new UM(Sb.zs,this.serializer)}createSharedClientState(e){return new TO}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YN extends aE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield KN(r.Vc.syncEngine),yield zv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return yO(this.persistence,new mO,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new aO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Tw(t,this.persistence);return new iM(e.asyncQueue,r)}createPersistence(e){const t=$M(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new jM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AO(),Pb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new TO}}class WO extends YN{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof QM&&(r.sharedClientState.syncEngine={jr:bL.bind(null,i),zr:AL.bind(null,i),Wr:ML.bind(null,i),$i:SL.bind(null,i),Qr:CL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,he.Z)(function*(l){yield function TL(n,e){return GN.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=AO();if(!QM.D(t))throw new Se(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$M(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qv{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>HO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=EL.bind(null,r.syncEngine),yield mN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sL}createDatastore(e){const t=iE(e.databaseInfo.databaseId),r=new $F(e.databaseInfo);return new zF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=g=>HO(this.syncEngine,g,0),l=SO.D()?new SO:new UF,new ZF(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,g,_,D){const T=new hL(r,i,u,l,g,_);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=nt(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Gv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZO(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Lb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RL{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ci,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,he.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new uL(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,he.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class OL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(u,l){const g=nt(u),_=Zw(g.serializer)+"/documents",D={documents:l.map(H=>Ww(g.serializer,H))},T=yield g.vo("BatchGetDocuments",_,D,l.length),N=new Map;T.forEach(H=>{const Y=function eF(n,e){return"found"in e?function(t,r){mt(!!r.found);const i=Zl(t,r.found.name),u=Qr(r.found.updateTime),l=r.found.createTime?Qr(r.found.createTime):It.min(),g=new Oi({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,u,l,g)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const i=Zl(t,r.missing),u=Qr(r.readTime);return Qn.newNoDocument(i,u)}(n,e):ut()}(g.serializer,H);N.set(Y.key.toString(),Y)});const L=[];return l.forEach(H=>{const Y=N.get(H.toString());mt(!!Y),L.push(Y)}),L}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=et.fromPath(i);e.mutations.push(new wM(u,e.precondition(u)))}),yield(r=(0,he.Z)(function*(i,u){const l=nt(i),g=Zw(l.serializer)+"/documents",_={writes:u.map(D=>Kw(l.serializer,D))};yield l.Io("Commit",g,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?yr.exists(!1):yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Se(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PL{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new XM(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,he.Z)(function*(){const t=new OL(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!hf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!w1(t)}return!1}}class kL{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=Dw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,he.Z)(function*(g){Ue("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Wv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Vb(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(u){r.isEqual(u)||(yield vO(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QN.apply(this,arguments)}function JN(n,e){return XN.apply(this,arguments)}function XN(){return XN=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ex(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>kO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>kO(e.remoteStore,u)),n._onlineComponents=e}),XN.apply(this,arguments)}function KO(n){return"FirebaseError"===n.name?n.code===oe.FAILED_PRECONDITION||n.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ex(n){return tx.apply(this,arguments)}function tx(){return tx=(0,he.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!KO(t))throw t;Gs("Error using user provided cache. Falling back to memory cache: "+t),yield Vb(n,new aE)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Vb(n,new aE);return n._offlineComponents}),tx.apply(this,arguments)}function Ub(n){return nx.apply(this,arguments)}function nx(){return nx=(0,he.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield JN(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield JN(n,new Qv))),n._onlineComponents}),nx.apply(this,arguments)}function YO(n){return ex(n).then(e=>e.persistence)}function Bb(n){return ex(n).then(e=>e.localStore)}function QO(n){return Ub(n).then(e=>e.remoteStore)}function rx(n){return Ub(n).then(e=>e.syncEngine)}function Jv(n){return ix.apply(this,arguments)}function ix(){return ix=(0,he.Z)(function*(n){const e=yield Ub(n),t=e.eventManager;return t.onListen=fL.bind(null,e.syncEngine),t.onUnlisten=pL.bind(null,e.syncEngine),t}),ix.apply(this,arguments)}function XO(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,u,l,g,_){const D=new Lb({next:N=>{u.enqueueAndForget(()=>EN(i,T));const L=N.docs.has(l);!L&&N.fromCache?_.reject(new Se(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&g&&"server"===g.source?_.reject(new Se(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),T=new CN($g(l.path),D,{includeMetadataChanges:!0,Ku:!0});return _N(i,T)}(yield Jv(n),n.asyncQueue,e,t,r)})),r.promise}function eP(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,u,l,g,_){const D=new Lb({next:N=>{u.enqueueAndForget(()=>EN(i,T)),N.fromCache&&"server"===g.source?_.reject(new Se(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),T=new CN(l,D,{includeMetadataChanges:!0,Ku:!0});return _N(i,T)}(yield Jv(n),n.asyncQueue,e,t,r)})),r.promise}function tP(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const nP=new Map;function sx(n,e,t){if(!t)throw new Se(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rP(n,e,t,r){if(!0===e&&!0===r)throw new Se(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iP(n){if(!et.isDocumentKey(n))throw new Se(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sP(n){if(et.isDocumentKey(n))throw new Se(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jb(n);throw new Se(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oP(n,e){if(e<=0)throw new Se(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aP{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tP(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qR;switch(t.type){case"firstParty":return new YR(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nP.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),nP.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class Kl extends ls{constructor(e,t,r){super(e,t,$g(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new et(e))}withConverter(e){return new Kl(this.firestore,e,this._path)}}function lP(n,e,...t){if(n=(0,tn.m9)(n),sx("collection","path",e),n instanceof uE){const r=un.fromString(e,...t);return sP(r),new Kl(n,null,r)}{if(!(n instanceof ar||n instanceof Kl))throw new Se(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return sP(r),new Kl(n.firestore,null,r)}}function $b(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=Dw.A()),sx("doc","path",e),n instanceof uE){const r=un.fromString(e,...t);return iP(r),new ar(n,null,new et(r))}{if(!(n instanceof ar||n instanceof Kl))throw new Se(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return iP(r),new ar(n.firestore,n instanceof Kl?n.converter:null,new et(r))}}function cP(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof ar||n instanceof Kl)&&(e instanceof ar||e instanceof Kl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ox(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof ls&&e instanceof ls&&n.firestore===e.firestore&&p(n._query,e._query)&&n.converter===e.converter}class zL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new XM(this,"async_queue_retry"),this.Xc=()=>{const t=Pb();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Pb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Pb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ci;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,he.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ku(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ar("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=vN.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&ut()}verifyOperationInProgress(){}sa(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ax(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class qL{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends uE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dP(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||dP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dP(n){var e,t,r;const i=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xw(n._databaseId,g,n._persistenceKey,(D=i).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,tP(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;n._firestoreClient=new kL(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function hP(n,e,t){const r=new ci;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield Vb(n,t),yield JN(n,e),r.resolve()}catch(i){const u=i;if(!KO(u))throw u;Gs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function fP(n){if(n._initialized||n._terminated)throw new Se(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(Yr.fromBase64String(e))}catch(t){throw new Se(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jg{constructor(e){this._methodName=e}}class Hb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const r2=/^__.*__$/;class i2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fv(e,this.data,t,this.fieldTransforms)}}class pP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Gb{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Gb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Wb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(gP(this.ca)&&r2.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class s2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||iE(e)}ya(e,t,r,i=!1){return new Gb({ca:e,methodName:t,ga:r,path:gr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xg(n){const e=n._freezeSettings(),t=iE(n._databaseId);return new s2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zb(n,e,t,r,i,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,i);dx("Data must be an object, but it was:",l,r);const g=vP(r,l);let _,D;if(u.merge)_=new zs(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const N of u.mergeFields){const L=dE(e,N,t);if(!l.contains(L))throw new Se(oe.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);wP(T,L)||T.push(L)}_=new zs(T),D=l.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,D=l.fieldTransforms;return new i2(new Oi(g),_,D)}class cE extends Jg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cE}}function mP(n,e,t){return new Gb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ux extends Jg{_toFieldTransform(e){return new $w(e.path,new Pv)}isEqual(e){return e instanceof ux}}class o2 extends Jg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.pa.map(u=>em(u,t)),i=new Hg(r);return new $w(e.path,i)}isEqual(e){return this===e}}class a2 extends Jg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.pa.map(u=>em(u,t)),i=new Gg(r);return new $w(e.path,i)}isEqual(e){return this===e}}class u2 extends Jg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new kv(e.serializer,l1(e.serializer,this.Ia));return new $w(e.path,t)}isEqual(e){return this===e}}function lx(n,e,t,r){const i=n.ya(1,e,t);dx("Data must be an object, but it was:",i,r);const u=[],l=Oi.empty();Dd(r,(_,D)=>{const T=qb(e,_,t);D=(0,tn.m9)(D);const N=i.da(T);if(D instanceof cE)u.push(T);else{const L=em(D,N);null!=L&&(u.push(T),l.set(T,L))}});const g=new zs(u);return new pP(l,g,i.fieldTransforms)}function cx(n,e,t,r,i,u){const l=n.ya(1,e,t),g=[dE(e,r,t)],_=[i];if(u.length%2!=0)throw new Se(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)g.push(dE(e,u[L])),_.push(u[L+1]);const D=[],T=Oi.empty();for(let L=g.length-1;L>=0;--L)if(!wP(D,g[L])){const H=g[L];let Y=_[L];Y=(0,tn.m9)(Y);const ae=l.da(H);if(Y instanceof cE)D.push(H);else{const Ie=em(Y,ae);null!=Ie&&(D.push(H),T.set(H,Ie))}}const N=new zs(D);return new pP(T,N,l.fieldTransforms)}function yP(n,e,t,r=!1){return em(t,n.ya(r?4:3,e))}function em(n,e){if(_P(n=(0,tn.m9)(n)))return dx("Unsupported field value:",e,n),vP(n,e);if(n instanceof Jg)return function(t,r){if(!gP(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let g=em(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,tn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return l1(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:Vv(r.serializer,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vv(r.serializer,i)}}if(t instanceof Hb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yl)return{bytesValue:N1(r.serializer,t._byteString)};if(t instanceof ar){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:SM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${jb(t)}`)}(n,e)}function vP(n,e){const t={};return cM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dd(n,(r,i)=>{const u=em(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function _P(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof Hb||n instanceof Yl||n instanceof ar||n instanceof Jg)}function dx(n,e,t){if(!_P(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jb(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function dE(n,e,t){if((e=(0,tn.m9)(e))instanceof Nd)return e._internalPath;if("string"==typeof e)return qb(n,e);throw Wb("Field path arguments must be of type string or ",n,!1,void 0,t)}const l2=new RegExp("[~\\*/\\[\\]]");function qb(n,e,t){if(e.search(l2)>=0)throw Wb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nd(...e.split("."))._internalPath}catch{throw Wb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wb(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Se(oe.INVALID_ARGUMENT,g+n+_)}function wP(n,e){return n.some(t=>t.isEqual(e))}class hE{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class c2 extends hE{data(){return super.data()}}function Zb(n,e){return"string"==typeof e?qb(n,e):e instanceof Nd?e._internalPath:e._delegate._internalPath}function EP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hx{}class fE extends hx{}function Tf(n,e,...t){let r=[];e instanceof hx&&r.push(e),r=r.concat(t),function(i){const u=i.filter(g=>g instanceof Xv).length,l=i.filter(g=>g instanceof pE).length;if(u>1||u>0&&l>0)throw new Se(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class pE extends fE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pE(e,t,r)}_apply(e){const t=this._parse(e);return bP(e._query,t),new ls(e.firestore,e.converter,c(e._query,t))}_parse(e){const t=Xg(e.firestore);return function(i,u,l,g,_,D,T){let N;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Se(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){CP(T,D);const L=[];for(const H of T)L.push(DP(g,i,H));N={arrayValue:{values:L}}}else N=DP(g,i,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||CP(T,D),N=yP(l,"where",T,"in"===D||"not-in"===D);return on.create(_,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Xv extends hx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const l=i.getFlattenedFilters();for(const g of l)bP(u,g),u=c(u,g)}(e._query,t),new ls(e.firestore,e.converter,c(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fx extends fE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fx(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Se(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new vf(i,u);return function(g,_){if(null===Bw(g)){const D=jw(g);null!==D&&TP(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Wl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Kb extends fE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Kb(e,t,r)}_apply(e){return new ls(e.firestore,e.converter,h(e._query,this._limit,this._limitType))}}class Yb extends fE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Yb(e,t,r)}_apply(e){const t=IP(e,this.type,this._docOrFields,this._inclusive);return new ls(e.firestore,e.converter,(i=t,new Wl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Qb extends fE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Qb(e,t,r)}_apply(e){const t=IP(e,this.type,this._docOrFields,this._inclusive);return new ls(e.firestore,e.converter,(i=t,new Wl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function IP(n,e,t,r){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof hE)return function(i,u,l,g,_){if(!g)throw new Se(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const T of o(i))if(T.field.isKeyField())D.push(Td(u,g.key));else{const N=g.data.field(T.field);if(Xa(N))throw new Se(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const L=T.field.canonicalString();throw new Se(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}D.push(N)}return new zl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Xg(n.firestore);return function(u,l,g,_,D,T){const N=u.explicitOrderBy;if(D.length>N.length)throw new Se(oe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let H=0;H<D.length;H++){const Y=D[H];if(N[H].field.isKeyField()){if("string"!=typeof Y)throw new Se(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!s(u)&&-1!==Y.indexOf("/"))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const ae=u.path.child(un.fromString(Y));if(!et.isDocumentKey(ae))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const Ie=new et(ae);L.push(Td(l,Ie))}else{const ae=yP(g,_,Y);L.push(ae)}}return new zl(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DP(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new Se(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s(e)&&-1!==t.indexOf("/"))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!et.isDocumentKey(r))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Td(n,new et(r))}if(t instanceof ar)return Td(n,t._key);throw new Se(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jb(t)}.`)}function CP(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bP(n,e){if(e.isInequality()){const r=jw(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=Bw(n);null!==u&&TP(0,i,u)}const t=function(r,i){for(const u of r)for(const l of u.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function TP(n,e,t){if(!t.isEqual(e))throw new Se(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class px{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Dd(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Hb(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const t=Hl(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);mt(B1(r));const i=new Gl(r.get(1),r.get(3)),u=new et(r.popFirst(5));return i.isEqual(t)||Ar(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Jb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _2 extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class tm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xd extends hE{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gE extends xd{data(e={}){return super.data(e)}}class Sf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gE(this._firestore,this._userDataWriter,r.key,r,new tm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new gE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const g=new gE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:E2(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function AP(n,e){return n instanceof xd&&e instanceof xd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sf&&e instanceof Sf&&n._firestore===e._firestore&&ox(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Af extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function MP(n,e,t){n=ln(n,ar);const r=ln(n.firestore,ur),i=Jb(n.converter,e,t);return e_(r,[zb(Xg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yr.none())])}function NP(n,e,t,...r){n=ln(n,ar);const i=ln(n.firestore,ur),u=Xg(i);let l;return l="string"==typeof(e=(0,tn.m9)(e))||e instanceof Nd?cx(u,"updateDoc",n._key,e,t,r):lx(u,"updateDoc",n._key,e),e_(i,[l.toMutation(n._key,yr.exists(!0))])}function xP(n,...e){var t,r,i;n=(0,tn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||ax(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(ax(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let _,D,T;if(n instanceof ar)D=ln(n.firestore,ur),T=$g(n._key.path),_={next:N=>{e[l]&&e[l](gx(D,n,N))},error:e[l+1],complete:e[l+2]};else{const N=ln(n,ls);D=ln(N.firestore,ur),T=N._query;const L=new Af(D);_={next:H=>{e[l]&&e[l](new Sf(D,L,N,H))},error:e[l+1],complete:e[l+2]},EP(n._query)}return function(N,L,H,Y){const ae=new Lb(Y),Ie=new CN(L,ae,H);return N.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return _N(yield Jv(N),Ie)})),()=>{ae.Dc(),N.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return EN(yield Jv(N),Ie)}))}}(Jr(D),T,g,_)}function e_(n,e){return function(t,r){const i=new ci;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function gL(n,e,t){return MN.apply(this,arguments)}(yield rx(t),r,i)})),i.promise}(Jr(n),e)}function gx(n,e,t){const r=t.docs.get(e._key),i=new Af(n);return new xd(n,i,e._key,r,new tm(t.hasPendingWrites,t.fromCache),e.converter)}const U2={maxAttempts:5};class RP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xg(e)}set(e,t,r){this._verifyNotCommitted();const i=Mf(e,this._firestore),u=Jb(i.converter,t,r),l=zb(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,tn.m9)(t))||t instanceof Nd?cx(this._dataReader,"WriteBatch.update",u._key,t,r,i):lx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mf(e,this._firestore);return this._mutations=this._mutations.concat(new Lv(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mf(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new Se(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class B2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xg(e)}get(e){const t=Mf(e,this._firestore),r=new _2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const u=i[0];if(u.isFoundDocument())return new hE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new hE(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=Mf(e,this._firestore),u=Jb(i.converter,t,r),l=zb(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,tn.m9)(t))||t instanceof Nd?cx(this._dataReader,"Transaction.update",u._key,t,r,i):lx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Mf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mf(e,this._firestore),r=new Af(this._firestore);return super.get(e).then(i=>new xd(this._firestore,r,t._key,i._document,new tm(!1,!1),t.converter))}}function mx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PP(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function kP(){if(!function n1(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wd=_o.SDK_VERSION,(0,_o._registerComponent)(new ju.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new ur(new ZR(t.getProvider("auth-internal")),new QR(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Se(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(g.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,_o.registerVersion)(ww,"3.12.1",n),(0,_o.registerVersion)(ww,"3.12.1","esm2017")}();class mE{constructor(e){this._delegate=e}static fromBase64String(e){return kP(),new mE(Yl.fromBase64String(e))}static fromUint8Array(e){return PP(),new mE(Yl.fromUint8Array(e))}toBase64(){return kP(),this._delegate.toBase64()}toUint8Array(){return PP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yx(n){return function K2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Y2{enableIndexedDbPersistence(e,t){return function ZL(n,e){fP(n=ln(n,ur));const t=Jr(n);if(t._uninitializedComponentsProvider)throw new Se(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Qv;return hP(t,i,new YN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KL(n){fP(n=ln(n,ur));const e=Jr(n);if(e._uninitializedComponentsProvider)throw new Se(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Qv;return hP(e,r,new WO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function YL(n){if(n._initialized&&!n._terminated)throw new Se(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Co.D())return Promise.resolve();const i=r+"main";yield Co.delete(i)}),function(r){return t.apply(this,arguments)})($M(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uP(n,e,t,r={}){var i;const u=(n=ln(n,uE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Gs("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=li.MOCK_USER;else{l=(0,tn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Se(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new li(_)}n._authCredentials=new WR(new JA(l,g))}}(this._delegate,e,t,r)}enableNetwork(){return function JL(n){return function FL(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield YO(n),t=yield QO(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i.vu.delete(0),sE(i)}(t)}))}(Jr(n=ln(n,ur)))}(this._delegate)}disableNetwork(){return function XL(n){return function LL(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield YO(n),t=yield QO(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const u=nt(i);u.vu.add(0),yield Gv(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=ln(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QL(n){return function(e){const t=new ci;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function _L(n,e){return PN.apply(this,arguments)}(yield rx(e),t)})),t.promise}(Jr(n=ln(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function N2(n,e){return function BL(n,e){const t=new Lb(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Jv(n),i=t,nt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Jv(n),i=t,void nt(r).ku.delete(i);var r,i}))}}(Jr(n=ln(n,ur)),ax(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new t_(this,lP(this._delegate,e))}catch(t){throw qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new tu(this,$b(this._delegate,e))}catch(t){throw qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function GL(n,e){if(n=ln(n,uE),sx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ls(n,null,(t=e,new Wl(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function j2(n,e,t){n=ln(n,ur);const r=Object.assign(Object.assign({},U2),t);return function(i){if(i.maxAttempts<1)throw new Se(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const g=new ci;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const _=yield function JO(n){return Ub(n).then(e=>e.datastore)}(i);new PL(i.asyncQueue,_,l,u,g).run()})),g.promise}(Jr(n),i=>e(new B2(n,i)),r)}(this._delegate,t=>e(new LP(this,t)))}batch(){return Jr(this._delegate),new VP(new RP(this._delegate,e=>e_(this._delegate,e)))}loadBundle(e){return function e2(n,e){const t=Jr(n=ln(n,ur)),r=new qL;return function jL(n,e,t,r){const i=function(u,l){let g;return g="string"==typeof u?I1().encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return ZO(_,D);if(_ instanceof ArrayBuffer)return ZO(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new RL(_,l);var _}(t,iE(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function NL(n,e,t){const r=nt(n);var i;(i=(0,he.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(L,H){const Y=nt(L),ae=Qr(H.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ie=>Y.qs.getBundleMetadata(Ie,H.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ae)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(VO(_));const D=new lL(_,u.localStore,l.serializer);let T=yield l.bc();for(;T;){const L=yield D.zu(T);L&&g._updateProgress(L),T=yield l.bc()}const N=yield D.complete();return yield Md(u,N.Ju,void 0),yield function(L,H){const Y=nt(L);return Y.persistence.runTransaction("Save bundle","readwrite",ae=>Y.qs.saveBundleMetadata(ae,H))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Hu)}catch(_){return Gs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var L}),function(u,l,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function t2(n,e){return function $L(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield Bb(n),e)}))}(Jr(n=ln(n,ur)),e).then(t=>t?new ls(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ws(this,t):null)}}class Xb extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new mE(new Yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tu.forKey(t,this.firestore,null)}}class LP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xb(e)}get(e){const t=rm(e);return this._delegate.get(t).then(r=>new yE(this._firestore,new xd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=rm(e);return r?(mx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=rm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=rm(e);return this._delegate.delete(t),this}}class VP{constructor(e){this._delegate=e}set(e,t,r){const i=rm(e);return r?(mx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=rm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=rm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=nm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new nm(e,new Xb(e),t),i.set(t,u)),u}}nm.INSTANCES=new WeakMap;class tu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tu(t,new ar(t._delegate,r,new et(e)))}static forKey(e,t,r){return new tu(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new t_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new t_(this.firestore,lP(this._delegate,e))}catch(t){throw qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof ar&&cP(this._delegate,e)}set(e,t){t=mx("DocumentReference.set",t);try{return t?MP(this._delegate,e,t):MP(this._delegate,e)}catch(r){throw qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?NP(this._delegate,e):NP(this._delegate,e,t,...r)}catch(i){throw qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A2(n){return e_(ln(n.firestore,ur),[new Lv(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=UP(e),r=BP(e,i=>new yE(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function D2(n){n=ln(n,ar);const e=ln(n.firestore,ur),t=Jr(e),r=new Af(e);return function VL(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,u,l){try{const g=yield function(_,D){const T=nt(_);return T.persistence.runTransaction("read document","readonly",N=>T.localDocuments.getDocument(N,D))}(i,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Se(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Wv(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield Bb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new xd(e,r,n._key,i,new tm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function C2(n){n=ln(n,ar);const e=ln(n.firestore,ur);return XO(Jr(e),n._key,{source:"server"}).then(t=>gx(e,n,t))}(this._delegate):function I2(n){n=ln(n,ar);const e=ln(n.firestore,ur);return XO(Jr(e),n._key).then(t=>gx(e,n,t))}(this._delegate),t.then(r=>new yE(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new tu(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}function qs(n,e,t){return n.message=n.message.replace(e,t),n}function UP(n){for(const e of n)if("object"==typeof e&&!yx(e))return e;return{}}function BP(n,e){var t,r;let i;return i=yx(n[0])?n[0]:yx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return AP(this._delegate,e._delegate)}}class vE extends yE{data(e){const t=this._delegate.data(e);return function QA(n,e){n||ut()}(void 0!==t),t}}class Ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xb(e)}where(e,t,r){try{return new Ws(this.firestore,Tf(this._delegate,function d2(n,e,t){const r=e,i=Zb("where",n);return pE._create(i,r,t)}(e,t,r)))}catch(i){throw qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ws(this.firestore,Tf(this._delegate,function h2(n,e="asc"){const t=e,r=Zb("orderBy",n);return fx._create(r,t)}(e,t)))}catch(r){throw qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,Tf(this._delegate,function f2(n){return oP("limit",n),Kb._create("limit",n,"F")}(e)))}catch(t){throw qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,Tf(this._delegate,function p2(n){return oP("limitToLast",n),Kb._create("limitToLast",n,"L")}(e)))}catch(t){throw qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,Tf(this._delegate,function g2(...n){return Yb._create("startAt",n,!0)}(...e)))}catch(t){throw qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,Tf(this._delegate,function m2(...n){return Yb._create("startAfter",n,!1)}(...e)))}catch(t){throw qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,Tf(this._delegate,function y2(...n){return Qb._create("endBefore",n,!1)}(...e)))}catch(t){throw qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,Tf(this._delegate,function v2(...n){return Qb._create("endAt",n,!0)}(...e)))}catch(t){throw qs(t,"endAt()","Query.endAt()")}}isEqual(e){return ox(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function T2(n){n=ln(n,ls);const e=ln(n.firestore,ur),t=Jr(e),r=new Af(e);return function UL(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,u,l){try{const g=yield Nb(i,u,!0),_=new jO(u,g.ir),D=_.sc(g.documents),T=_.applyChanges(D,!1);l.resolve(T.snapshot)}catch(g){const _=Wv(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield Bb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sf(e,r,n,i))}(this._delegate):"server"===e?.source?function S2(n){n=ln(n,ls);const e=ln(n.firestore,ur),t=Jr(e),r=new Af(e);return eP(t,n._query,{source:"server"}).then(i=>new Sf(e,r,n,i))}(this._delegate):function b2(n){n=ln(n,ls);const e=ln(n.firestore,ur),t=Jr(e),r=new Af(e);return EP(n._query),eP(t,n._query).then(i=>new Sf(e,r,n,i))}(this._delegate),t.then(r=>new vx(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=UP(e),r=BP(e,i=>new vx(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xP(this._delegate,t,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}class J2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new J2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vE(this._firestore,r))})}isEqual(e){return AP(this._delegate,e._delegate)}}class t_ extends Ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tu(this.firestore,e):null}doc(e){try{return new tu(this.firestore,void 0===e?$b(this._delegate):$b(this._delegate,e))}catch(t){throw qs(t,"doc()","CollectionReference.doc()")}}add(e){return function M2(n,e){const t=ln(n.firestore,ur),r=$b(n),i=Jb(n.converter,e);return e_(t,[zb(Xg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new tu(this.firestore,t))}isEqual(e){return cP(this._delegate,e._delegate)}withConverter(e){return new t_(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}function rm(n){return ln(n,ar)}class _x{constructor(...e){this._delegate=new Nd(...e)}static documentId(){return new _x(gr.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof Nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._delegate=e}static serverTimestamp(){const e=function H2(){return new ux("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new im(e)}static delete(){const e=function $2(){return new cE("deleteField")}();return e._methodName="FieldValue.delete",new im(e)}static arrayUnion(...e){const t=function G2(...n){return new o2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new im(t)}static arrayRemove(...e){const t=function z2(...n){return new a2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new im(t)}static increment(e){const t=function q2(n){return new u2("increment",n)}(e);return t._methodName="FieldValue.increment",new im(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const X2={Firestore:FP,GeoPoint:Hb,Timestamp:or,Blob:mE,Transaction:LP,WriteBatch:VP,DocumentReference:tu,DocumentSnapshot:yE,Query:Ws,QueryDocumentSnapshot:vE,QuerySnapshot:vx,CollectionReference:t_,FieldPath:_x,FieldValue:im,setLogLevel:function Q2(n){!function YA(n){Wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function jP(n,e){return function nV(n,e=PD.z){return new rs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wx(n,e){return jP(n,e).pipe((0,Ut.U)(t=>({payload:t,type:"query"})))}function eT(n,e){return wx(n,e).pipe(Fs(void 0),xy(),(0,Ut.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=i.find(T=>T.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function $P(n,e,t){return eT(n,t).pipe(Mu((r,i)=>function iV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ex(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ex(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ex(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function kD(n,e=Ho.y){return n=n??FD,(0,Tr.e)((t,r)=>{let i,u=!0;t.subscribe((0,br.x)(r,l=>{const g=e(l);(u||!n(i,g))&&(u=!1,i=g,r.next(l))}))})}(),(0,Ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ex(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function HP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function tV(n){(function eV(n,e){n.INTERNAL.registerComponent(new ju.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},X2)))})(n,(e,t)=>new FP(e,t,new Y2)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(LD.Z);class GP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=eT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ut.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fs(void 0),xy(),hr(([r,i])=>i.length>0||!r),(0,Ut.U)(([r,i])=>i),qi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HP(e);return $P(this.query,t,this.afs.schedulers.outsideAngular).pipe(qi.iC)}valueChanges(e={}){return wx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),qi.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(qi.iC)}add(e){return this.ref.add(e)}doc(e){return new zP(this.ref.doc(e),this.afs)}}class zP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=qP(r,t);return new GP(i,u,this.afs)}snapshotChanges(){return function rV(n,e){return jP(n,e).pipe(Fs(void 0),xy(),(0,Ut.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(qi.iC)}}class oV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),hr(t=>t.length>0),qi.iC):eT(this.query,this.afs.schedulers.outsideAngular).pipe(qi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HP(e);return $P(this.query,t,this.afs.schedulers.outsideAngular).pipe(qi.iC)}valueChanges(e={}){return wx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),qi.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(qi.iC)}}const aV=new d.OlP("angularfire2.enableFirestorePersistence"),uV=new d.OlP("angularfire2.firestore.persistenceSettings"),lV=new d.OlP("angularfire2.firestore.settings"),cV=new d.OlP("angularfire2.firestore.use-emulator");function qP(n,e=(t=>t)){return{query:e(n),ref:n}}let dV=(()=>{class n{constructor(t,r,i,u,l,g,_,D,T,N,L,H,Y,ae,Ie,Je,ct){this.schedulers=_;const lt=(0,Za.on)(t,g,r),ht=T;N&&eA(lt,g,L,Y,ae,Ie,H,Je),[this.firestore,this.persistenceEnabled$]=(0,Za.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Ft=g.runOutsideAngular(()=>lt.firestore());if(u&&Ft.settings(u),ht&&Ft.useEmulator(...ht),i&&!lu(l)){const qt=()=>{try{return(0,fn.D)(Ft.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),Dt(!1)}};return[Ft,g.runOutsideAngular(qt)]}return[Ft,Dt(!1)]},[u,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=qP(i,r),g=this.schedulers.ngZone.run(()=>u);return new GP(g,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new oV(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new zP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Za.Dh),d.LFG(Za.xv,8),d.LFG(aV,8),d.LFG(lV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qi.HU),d.LFG(uV,8),d.LFG(cV,8),d.LFG(jh,8),d.LFG(sd,8),d.LFG(fD,8),d.LFG(pD,8),d.LFG(T0,8),d.LFG(gD,8),d.LFG(S0,8),d.LFG(Hu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ix=(()=>{class n{constructor(t){this.firestore=t,this.users$=this.firestore.collection("usuarios").valueChanges(),this.items$=this.firestore.collection("citas").valueChanges()}addCita(t){this.firestore.collection("citas").add({data:t})}addUser(t){this.firestore.collection("usuarios").add({data:t})}getCita(){return this.items$}eliminarCita(t){this.firestore.doc("citas/"+t).delete().then(()=>{console.log("Dato ELIMINADO exitosamente")}).catch(r=>{console.error("Error al ELIMINAR el dato:",r)})}getUsersAuth(){return this.users$}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dV))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hV=(()=>{class n{constructor(t,r,i,u,l){this.fb=t,this.afAuth=r,this.toastr=i,this.router=u,this.userService=l,this.tel="",this.registrarU=this.fb.group({nombre:["",Rl.required],email:["",Rl.required],contra:["",Rl.required],repetirContra:["",Rl.required],tel:["",Rl.required]})}addUser(){var t=this;return(0,he.Z)(function*(){const r=new Date,g=`${r.getDate()}/${r.getMonth()+1}/${r.getFullYear()}`,T={identificador:t.registrarU.value.nombre,proveedor:"email",fechaCreacion:g,fechaAcceso:g};yield t.userService.addUser(T)})()}registrar(){const t=this.registrarU.value.email,r=this.registrarU.value.contra,i=this.registrarU.value.repetirContra;this.tel=this.registrarU.value.tel,r==i?(this.reCaptchaVerifier=new Vl.Z.auth.RecaptchaVerifier("sign-in-button",{size:"invisible"}),this.afAuth.createUserWithEmailAndPassword(t,r).then(()=>{}).catch(u=>{console.log(u),this.toastr.error(this.firebaseError(u.code),"Error")}),Vl.Z.auth().signInWithPhoneNumber(this.tel,this.reCaptchaVerifier).then(u=>{console.log(u),localStorage.setItem("verID",JSON.stringify(u.verificationId)),this.toastr.success("Registro exitoso","Usuario registrado"),this.addUser(),this.router.navigate(["/verificaciontel"])}).catch(u=>{this.toastr.error(u.code,"Error"),console.log(u)})):this.toastr.error("La contrase\xf1a no concide","Error")}firebaseError(t){switch(t){case"auth/email-already-in-use":return"El usuario ya existe";case"auth/weak-password":return"La contrase\xf1a es muy d\xe9bil";case"auth/invalid-email":return"Correo inv\xe1lido";case"auth/invalid-phone-number":return"T\xe9lefono inv\xe1lido";default:return"Error desconocido"}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(s0),d.Y36(jh),d.Y36($h),d.Y36(os),d.Y36(Ix))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-registro"]],decls:31,vars:2,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/email.png","alt","registromail",1,"loginImg","mb-3"],[1,"titulo","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control"],[1,"form-floating"],["type","email","formControlName","email","placeholder","name@example.com",1,"form-control","mb-3"],["type","email","formControlName","tel","min","10","max","13","name","tel","placeholder","Tel\xe9fono",1,"form-control",3,"ngModel","ngModelChange"],["type","password","formControlName","contra","placeholder","Password",1,"form-control","mb-3"],["type","password","formControlName","repetirContra","placeholder","Password",1,"form-control","mb-3"],[1,"d-grid","gap-2","mb-3"],["id","sign-in-button","type","submit",1,"btn","btn-primary","btn-lg"],["routerLink","/opregistro"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Registro"),d.qZA(),d.TgZ(5,"form",4),d.NdJ("ngSubmit",function(){return r.registrar()}),d.TgZ(6,"div",5),d._UZ(7,"input",6),d.TgZ(8,"label"),d._uU(9,"Nombre"),d.qZA()(),d.TgZ(10,"div",7),d._UZ(11,"input",8),d.TgZ(12,"label"),d._uU(13,"Email"),d.qZA()(),d.TgZ(14,"div",5)(15,"input",9),d.NdJ("ngModelChange",function(u){return r.tel=u}),d.qZA(),d.TgZ(16,"label"),d._uU(17,"Tel\xe9fono"),d.qZA()(),d.TgZ(18,"div",7),d._UZ(19,"input",10),d.TgZ(20,"label"),d._uU(21,"Contrase\xf1a"),d.qZA()(),d.TgZ(22,"div",7),d._UZ(23,"input",11),d.TgZ(24,"label"),d._uU(25,"Repetir contrase\xf1a"),d.qZA()(),d.TgZ(26,"div",12)(27,"button",13),d._uU(28,"Aceptar"),d.qZA()(),d.TgZ(29,"a",14),d._uU(30,"Volver"),d.qZA()()()()),2&t&&(d.xp6(5),d.Q6J("formGroup",r.registrarU),d.xp6(10),d.Q6J("ngModel",r.tel))},dependencies:[Xt,Wa,Ga,Xc,Ol,Fl,nd]}),n})(),fV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-verificacion"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"verificacion works!"),d.qZA())}}),n})(),pV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-op-login"]],decls:22,vars:0,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/login.png","alt","login",1,"loginImg","mb-3"],[1,"titulo","mb-3"],[1,"fa-solid","fa-envelope"],[1,"d-grid","gap-2","mb-3"],["routerLink","/login"],[1,"btn","btn-primary","btn-lg"],["routerLink","/registrotel"],[1,"btn","btn-info","btn-lg"],[1,"fa-solid","fa-phone"],["routerLink","/registro"],["routerLink","/usuarios"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Opciones de login"),d.qZA(),d._UZ(5,"i",4),d.TgZ(6,"form")(7,"div",5)(8,"a",6)(9,"button",7),d._UZ(10,"i",4),d._uU(11," login con email"),d.qZA()()(),d.TgZ(12,"div",5)(13,"a",8)(14,"button",9),d._UZ(15,"i",10),d._uU(16," login con tel\xe9fono"),d.qZA()()(),d.TgZ(17,"a",11),d._uU(18,"Reg\xedstrate"),d.qZA(),d._UZ(19,"br"),d.TgZ(20,"a",12),d._uU(21,"Mostrar Usuarios"),d.qZA()()()())},dependencies:[Xt,Wa,Ol]}),n})(),gV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login-tel"]],decls:22,vars:0,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/telephone.png","alt","login",1,"loginImg"],[1,"titulo","mb-3"],[1,"form-floating","mb-3"],["type","email","placeholder","name@example.com",1,"form-control"],[1,"form-floating"],["type","password","placeholder","Password",1,"form-control","mb-3"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg"],["routerLink","/"],["routerLink","/recuperacion",1,"mt-3"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Login"),d.qZA(),d.TgZ(5,"form")(6,"div",4),d._UZ(7,"input",5),d.TgZ(8,"label"),d._uU(9,"Phone Number"),d.qZA()(),d.TgZ(10,"div",6),d._UZ(11,"input",7),d.TgZ(12,"label"),d._uU(13,"Password"),d.qZA()(),d.TgZ(14,"div",8)(15,"button",9),d._uU(16,"Ingresar"),d.qZA()(),d.TgZ(17,"a",10),d._uU(18,"Men\xfa principal"),d.qZA(),d._UZ(19,"br"),d.TgZ(20,"a",11),d._uU(21,"Olvid\xe9 mi contrase\xf1a"),d.qZA()()()())},dependencies:[Xt,Wa,Ol]}),n})(),mV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-op-registro"]],decls:19,vars:0,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/registro.png","alt","registro",1,"loginImg","mb-3"],[1,"titulo","mb-3"],[1,"fa-solid","fa-envelope"],[1,"d-grid","gap-2","mb-3"],["routerLink","/registro"],[1,"btn","btn-primary","btn-lg"],["routerLink","/registrotel"],[1,"btn","btn-info","btn-lg"],[1,"fa-solid","fa-phone"],["routerLink","/oplogin"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Opciones de registro"),d.qZA(),d._UZ(5,"i",4),d.TgZ(6,"form")(7,"div",5)(8,"a",6)(9,"button",7),d._UZ(10,"i",4),d._uU(11," registro con email"),d.qZA()()(),d.TgZ(12,"div",5)(13,"a",8)(14,"button",9),d._UZ(15,"i",10),d._uU(16," registro con tel\xe9fono"),d.qZA()()(),d.TgZ(17,"a",11),d._uU(18,"Volver"),d.qZA()()()())},dependencies:[Xt,Wa,Ol]}),n})();var yV={apiKey:"AIzaSyBF6KZLlf5ewEULFpykVw6mTTu6vKm_8rY",authDomain:"fir-login-60619.firebaseapp.com",projectId:"fir-login-60619",storageBucket:"fir-login-60619.appspot.com",messagingSenderId:"719132982087",appId:"1:719132982087:web:58b23464b829a80a0daa62"};let vV=(()=>{class n{constructor(t,r,i){this.fb=t,this.toastr=r,this.router=i,this.cargando=!1,this.tel="",this.registrarU=this.fb.group({tel:["",Rl.required]})}ngOnInit(){Vl.Z.initializeApp(yV)}registrarTel(){this.tel=this.registrarU.value.tel,this.reCaptchaVerifier=new Vl.Z.auth.RecaptchaVerifier("sign-in-button",{size:"invisible"}),Vl.Z.auth().signInWithPhoneNumber(this.tel,this.reCaptchaVerifier).then(t=>{console.log(t),localStorage.setItem("verID",JSON.stringify(t.verificationId)),this.router.navigate(["/verificaciontel"])}).catch(t=>{this.toastr.error(t.code,"Error"),console.log(t)})}firebaseError(t){return"auth/invalid-phone-number"===t?"T\xe9lefono inv\xe1lido":"Error desconocido"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(s0),d.Y36($h),d.Y36(os))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-registro-tel"]],decls:15,vars:2,consts:[[1,"contenedor"],[1,"contenido"],["src","assets/media/img/email.png","alt","registromail",1,"loginImg","mb-3"],[1,"titulo","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","tel","min","10","max","13","name","tel",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2","mb-3"],["id","sign-in-button","type","submit",1,"btn","btn-primary","btn-lg"],["routerLink","/opregistro"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"Registro"),d.qZA(),d.TgZ(5,"form",4),d.NdJ("ngSubmit",function(){return r.registrarTel()}),d.TgZ(6,"div",5)(7,"input",6),d.NdJ("ngModelChange",function(u){return r.tel=u}),d.qZA(),d.TgZ(8,"label"),d._uU(9,"Tel\xe9fono"),d.qZA()(),d.TgZ(10,"div",7)(11,"button",8),d._uU(12,"Aceptar"),d.qZA()(),d.TgZ(13,"a",9),d._uU(14,"Volver"),d.qZA()()()()),2&t&&(d.xp6(5),d.Q6J("formGroup",r.registrarU),d.xp6(2),d.Q6J("ngModel",r.tel))},dependencies:[Xt,Wa,Ga,Xc,Ol,Fl,nd]}),n})();function _V(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"input",3,4),d.NdJ("paste",function(i){d.CHM(t);const u=d.oxw(2);return d.KtG(u.handlePaste(i))})("keyup",function(i){const l=d.CHM(t).index,g=d.oxw(2);return d.KtG(g.onKeyUp(i,l))})("input",function(i){d.CHM(t);const u=d.oxw(2);return d.KtG(u.onInput(i))})("keydown",function(i){const l=d.CHM(t).index,g=d.oxw(2);return d.KtG(g.onKeyDown(i,l))}),d.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw(2);d.Gre("otp-input ",i.config.inputClass,""),d.Q6J("pattern",i.config.allowNumbersOnly?"\\d*":"")("type",i.inputType)("placeholder",(null==i.config?null:i.config.placeholder)||"")("ngStyle",i.config.inputStyles)("formControl",i.otpForm.controls[t])("id",i.getBoxId(r))}}function wV(n,e){if(1&n&&(d.TgZ(0,"div",1),d.YNc(1,_V,2,9,"input",2),d.ALo(2,"keys"),d.qZA()),2&n){const t=d.oxw();d.Gre("ng-otp-input-wrapper wrapper ",t.config.containerClass,""),d.MGl("id","c_",t.componentKey,""),d.Q6J("ngStyle",t.config.containerStyles),d.xp6(1),d.Q6J("ngForOf",d.lcZ(2,6,null==t.otpForm?null:t.otpForm.controls))}}class n_{static ifTab(e){return this.ifKey(e,"Tab")}static ifDelete(e){return this.ifKey(e,"Delete;Del")}static ifBackspace(e){return this.ifKey(e,"Backspace")}static ifRightArrow(e){return this.ifKey(e,"ArrowRight;Right")}static ifLeftArrow(e){return this.ifKey(e,"ArrowLeft;Left")}static ifSpacebar(e){return this.ifKey(e,"Spacebar; ")}static ifKey(e,t){return t.split(";").some(i=>i===e.key)}}let Dx=(()=>{class n{transform(t){return Object.keys(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"keys",type:n,pure:!0}),n})(),EV=(()=>{class n{constructor(t){this.keysPipe=t,this.config={length:4},this.onInputChange=new d.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new Pl({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new yo);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(r=>{var i=this.otpForm.controls[r].value;i&&i.length>1&&(i.length>=this.config.length?this.setValue(i):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const t=document.getElementById(`c_${this.componentKey}`);if(t){const r=t.getElementsByClassName("otp-input")[0];r&&r.focus&&r.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,r){const i=this.getBoxId(r-1),u=this.getBoxId(r);return n_.ifSpacebar(t)?(t.preventDefault(),!1):n_.ifBackspace(t)?(t.target.value?this.clearInput(u,r):(this.clearInput(i,r-1),this.setSelected(i)),void this.rebuildValue()):void 0}onInput(t){if(this.config.allowNumbersOnly&&!this.validateNumber(this.currentVal?`${this.currentVal}${t.target.value}`:t.target.value))return t.target.value="",t.stopPropagation(),void t.preventDefault()}onKeyUp(t,r){n_.ifTab(t)&&(r-=1);const i=this.getBoxId(r+1),u=this.getBoxId(r-1),l=this.getBoxId(r);return n_.ifRightArrow(t)?(t.preventDefault(),void this.setSelected(i)):n_.ifLeftArrow(t)?(t.preventDefault(),void this.setSelected(u)):n_.ifDelete(t)?(t.target.value?this.clearInput(l,r):(this.clearInput(u,r-1),this.setSelected(u)),void this.rebuildValue()):void(t.target.value&&(this.ifValidKeyCode(t)&&this.setSelected(i),this.rebuildValue()))}validateNumber(t){return t&&/^\d*\.?\d*$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,r){let i=this.getControlName(r);this.otpForm.controls[i]?.setValue(null);const u=document.getElementById(t);u&&u instanceof HTMLInputElement&&(u.value=null)}setSelected(t){this.focusTo(t);const r=document.getElementById(t);r&&r.setSelectionRange&&setTimeout(()=>{r.setSelectionRange(0,1)},0)}ifValidKeyCode(t){const r=t.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(r)}focusTo(t){const r=document.getElementById(t);r&&r.focus()}setValue(t){if(!this.config.allowNumbersOnly||!isNaN(t)){if(this.otpForm.reset(),!t)return void this.rebuildValue();if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((i,u)=>{this.otpForm.get(this.getControlName(u))&&this.otpForm.get(this.getControlName(u)).setValue(i)}),!this.config.disableAutoFocus){const i=document.getElementById(`c_${this.componentKey}`);var r=t.length<this.config.length?t.length:this.config.length-1;let u=i.getElementsByClassName("otp-input")[r];u&&u.focus&&u.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(r=>{if(this.otpForm.controls[r].value){let i=this.otpForm.controls[r].value,u=i.length>1,l=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());i=i[0];let g=l?"upper"==this.config.letterCase.toLocaleLowerCase()?i.toUpperCase():i.toLowerCase():i;l&&g==i?l=!1:i=g,t+=i,(u||l)&&this.otpForm.controls[r].setValue(i)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.emit(t),this.currentVal=t}handlePaste(t){let r=t.clipboardData||window.clipboardData;if(r)var i=r.getData("Text");t.stopPropagation(),t.preventDefault(),i&&(!this.config.allowNumbersOnly||this.validateNumber(i))&&this.setValue(i)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dx))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(t,r){1&t&&d.YNc(0,wV,3,8,"div",0),2&t&&d.Q6J("ngIf",null==r.otpForm?null:r.otpForm.controls)},dependencies:[Xs,Fn,wa,Ga,rd,Xc,ay,Dx],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),n})(),IV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Dx],imports:[[Vi,o0,VI]]}),n})(),DV=(()=>{class n{constructor(t,r){this.toastr=t,this.router=r,this.config={allowNumbersOnly:!0,length:6}}ngOnInit(){this.verify=JSON.parse(localStorage.getItem("verID")||"{}"),console.log(this.verify)}onOtpChange(t){this.otp=t}handleClick(){var t=Vl.Z.auth.PhoneAuthProvider.credential(this.verify,this.otp);Vl.Z.auth().signInWithCredential(t).then(r=>{console.log(r.user),this.user=r.user,this.toastr.success("Clave de verificaci\xf3n correcta"),this.router.navigate(["/dashboard"])}).catch(r=>{this.toastr.error("Clave de verificaci\xf3n incorrecta")})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($h),d.Y36(os))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-verificacion-tel"]],decls:10,vars:1,consts:[[1,"contenedor"],[1,"contenido2"],["src","assets/media/img/verification.png","alt","verification",1,"loginImg"],[1,"titulo","mb-3"],[3,"config","onInputChange"],[1,"d-grid","gap-2","mt-3"],["id","sign-in-button","type","button",1,"btn","btn-primary","btn-lg","mt-3",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h1",3),d._uU(4,"C\xf3digo de verificaci\xf3n"),d.qZA(),d._UZ(5,"br"),d.TgZ(6,"ng-otp-input",4),d.NdJ("onInputChange",function(u){return r.onOtpChange(u)}),d.qZA(),d.TgZ(7,"div",5)(8,"button",6),d.NdJ("click",function(){return r.handleClick()}),d._uU(9,"Aceptar"),d.qZA()()()()),2&t&&(d.xp6(6),d.Q6J("config",r.config))},dependencies:[EV]}),n})();function CV(n,e){if(1&n&&(d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.data.nombreUsuario),d.xp6(2),d.Oqu(t.data.emailUsuario),d.xp6(2),d.Oqu(t.data.numTarjeta),d.xp6(2),d.Oqu(t.data.nombreCasa),d.xp6(2),d.Oqu(t.data.numPersonas)}}let WP=(()=>{class n{constructor(t){this.userService=t,this.formulario=new Pl({nombreUsuario:new yo,emailUsuario:new yo,numTarjeta:new yo,nombreCasa:new yo,numPersonas:new yo})}ngOnInit(){this.getUser()}onSubmit(){var t=this;return(0,he.Z)(function*(){yield t.userService.addCita(t.formulario.value),t.getUser()})()}getUser(){var t=this;return(0,he.Z)(function*(){t.citas=yield t.userService.getCita()})()}eliminarCita(t){var r=this;return(0,he.Z)(function*(){yield r.userService.eliminarCita(t)})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ix))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-reg-usuarios"]],decls:42,vars:4,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","placeholder","Ingresa tu nombre","formControlName","nombreUsuario",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Ingresa tu email","formControlName","emailUsuario",1,"form-control"],["for","apellido"],["type","text","id","apellido","placeholder","Numero de tarjeta","formControlName","numTarjeta",1,"form-control"],["for","contrasena"],["type","text","id","contrasena","placeholder","Nombre de la casa","formControlName","nombreCasa",1,"form-control"],["for","telefono"],["type","number","id","telefono","placeholder","Numero de Personas","formControlName","numPersonas",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"form",1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(2,"div",2)(3,"label",3),d._uU(4,"Nombre:"),d.qZA(),d._UZ(5,"input",4),d.qZA(),d.TgZ(6,"div",2)(7,"label",5),d._uU(8,"Email:"),d.qZA(),d._UZ(9,"input",6),d.qZA(),d.TgZ(10,"div",2)(11,"label",7),d._uU(12,"Numero de Tarjeta:"),d.qZA(),d._UZ(13,"input",8),d.qZA(),d.TgZ(14,"div",2)(15,"label",9),d._uU(16,"Nombre de la casa seleccionada:"),d.qZA(),d._UZ(17,"input",10),d.qZA(),d.TgZ(18,"div",2)(19,"label",11),d._uU(20,"Numero de Personas:"),d.qZA(),d._UZ(21,"input",12),d.qZA(),d._UZ(22,"br"),d.TgZ(23,"button",13),d._uU(24,"Registrar"),d.qZA()()(),d._UZ(25,"br"),d.TgZ(26,"table",14)(27,"thead")(28,"tr")(29,"th",15),d._uU(30,"Nombre"),d.qZA(),d.TgZ(31,"th",15),d._uU(32,"Email"),d.qZA(),d.TgZ(33,"th",15),d._uU(34,"Numero de tarjeta"),d.qZA(),d.TgZ(35,"th",15),d._uU(36,"Casa Seleccionada"),d.qZA(),d.TgZ(37,"th",15),d._uU(38,"Numero de Personas"),d.qZA()()(),d.TgZ(39,"tbody"),d.YNc(40,CV,11,5,"tr",16),d.ALo(41,"async"),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("formGroup",r.formulario),d.xp6(39),d.Q6J("ngForOf",d.lcZ(41,2,r.citas)))},dependencies:[wa,Wa,Ga,Y_,Xc,Ol,Fl,nd,au]}),n})();function bV(n,e){if(1&n&&(d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.data.identificador),d.xp6(2),d.Oqu(t.data.proveedor),d.xp6(2),d.Oqu(t.data.fechaCreacion),d.xp6(2),d.Oqu(t.data.fechaAcceso)}}const TV=[{path:"",redirectTo:"oplogin",pathMatch:"full"},{path:"oplogin",component:pV},{path:"opregistro",component:mV},{path:"login",component:RD},{path:"logintel",component:gV},{path:"dashboard",component:WP},{path:"recuperacion",component:OD},{path:"registro",component:hV},{path:"registrotel",component:vV},{path:"verificacion",component:fV},{path:"verificaciontel",component:DV},{path:"regUser",component:WP},{path:"usuarios",component:(()=>{class n{constructor(t){this.userService=t}ngOnInit(){this.getUser()}getUser(){var t=this;return(0,he.Z)(function*(){t.usuarios=yield t.userService.getUsersAuth()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ix))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-usuarios"]],decls:15,vars:3,consts:[[1,"container"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),d._uU(5,"Identificador"),d.qZA(),d.TgZ(6,"th",2),d._uU(7,"Proveedores"),d.qZA(),d.TgZ(8,"th",2),d._uU(9,"Fecha de creacion"),d.qZA(),d.TgZ(10,"th",2),d._uU(11,"Fecha de acceso"),d.qZA()()(),d.TgZ(12,"tbody"),d.YNc(13,bV,9,4,"tr",3),d.ALo(14,"async"),d.qZA()()()),2&t&&(d.xp6(13),d.Q6J("ngForOf",d.lcZ(14,1,r.usuarios)))},dependencies:[wa,au],styles:[".container[_ngcontent-%COMP%]{margin:20px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f9f9f9;font-weight:700}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f5f5f5}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eaf2ff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})()},{path:"**",redirectTo:"oplogin",pathMatch:"full"}];let SV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[WE.forRoot(TV),WE]}),n})();function ZP(n){return new d.vHH(3e3,!1)}function Nf(n){switch(n.length){case 0:return new dg;case 1:return n[0];default:return new A0(n)}}function KP(n,e,t=new Map,r=new Map){const i=[],u=[];let l=-1,g=null;if(e.forEach(_=>{const D=_.get("offset"),T=D==l,N=T&&g||new Map;_.forEach((L,H)=>{let Y=H,ae=L;if("offset"!==H)switch(Y=n.normalizePropertyName(Y,i),ae){case Ay:ae=t.get(H);break;case Ka:ae=r.get(H);break;default:ae=n.normalizeStyleValue(H,Y,ae,i)}N.set(Y,ae)}),T||u.push(N),g=N,l=D}),i.length)throw function YV(n){return new d.vHH(3502,!1)}();return u}function Cx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&bx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&bx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&bx(t,"destroy",n)))}}function bx(n,e,t){const u=Tx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(u._data=l),u}function Tx(n,e,t,r,i="",u=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!l}}function ga(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function YP(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const uU=(()=>typeof document>"u"?null:document.documentElement)();function Sx(n){const e=n.parentNode||n.host||null;return e===uU?null:e}let sm=null,QP=!1;function JP(n,e){for(;e;){if(e===n)return!0;e=Sx(e)}return!1}function XP(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let ek=(()=>{class n{validateStyleProperty(t){return function cU(n){sm||(sm=function dU(){return typeof document<"u"?document.body:null}()||{},QP=!!sm.style&&"WebkitAppearance"in sm.style);let e=!0;return sm.style&&!function lU(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in sm.style,!e&&QP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in sm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return JP(t,r)}getParentElement(t){return Sx(t)}query(t,r,i){return XP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,l,g=[],_){return new dg(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ax=(()=>{class n{}return n.NOOP=new ek,n})();const hU=1e3,Mx="ng-enter",tT="ng-leave",nT="ng-trigger",rT=".ng-trigger",nk="ng-animating",Nx=".ng-animating";function Rd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xx(parseFloat(e[1]),e[2])}function xx(n,e){return"s"===e?n*hU:n}function iT(n,e,t){return n.hasOwnProperty("duration")?n:function pU(n,e,t){let i,u=0,l="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(ZP()),{duration:0,delay:0,easing:""};i=xx(parseFloat(g[1]),g[2]);const _=g[3];null!=_&&(u=xx(parseFloat(_),g[4]));const D=g[5];D&&(l=D)}else i=n;if(!t){let g=!1,_=e.length;i<0&&(e.push(function AV(){return new d.vHH(3100,!1)}()),g=!0),u<0&&(e.push(function MV(){return new d.vHH(3101,!1)}()),g=!0),g&&e.splice(_,0,ZP())}return{duration:i,delay:u,easing:l}}(n,e,t)}function _E(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function rk(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function xf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ql(n,e,t){e.forEach((r,i)=>{const u=Ox(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r})}function om(n,e){e.forEach((t,r)=>{const i=Ox(r);n.style[i]=""})}function wE(n){return Array.isArray(n)?1==n.length?n[0]:wD(n):n}const Rx=new RegExp("{{\\s*(.+?)\\s*}}","g");function sk(n){let e=[];if("string"==typeof n){let t;for(;t=Rx.exec(n);)e.push(t[1]);Rx.lastIndex=0}return e}function EE(n,e,t){const r=n.toString(),i=r.replace(Rx,(u,l)=>{let g=e[l];return null==g&&(t.push(function xV(n){return new d.vHH(3003,!1)}()),g=""),g.toString()});return i==r?n:i}function sT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const yU=/-+([a-z0-9])/g;function Ox(n){return n.replace(yU,(...e)=>e[1].toUpperCase())}function ma(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function RV(n){return new d.vHH(3004,!1)}()}}function ok(n,e){return window.getComputedStyle(n)[e]}const oT="*";function wU(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function EU(n,e,t){if(":"==n[0]){const _=function IU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function qV(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function zV(n){return new d.vHH(3015,!1)}()),e;const i=r[1],u=r[2],l=r[3];e.push(ak(i,l));"<"==u[0]&&!(i==oT&&l==oT)&&e.push(ak(l,i))}(r,t,e)):t.push(n),t}const aT=new Set(["true","1"]),uT=new Set(["false","0"]);function ak(n,e){const t=aT.has(n)||uT.has(n),r=aT.has(e)||uT.has(e);return(i,u)=>{let l=n==oT||n==i,g=e==oT||e==u;return!l&&t&&"boolean"==typeof i&&(l=i?aT.has(n):uT.has(n)),!g&&r&&"boolean"==typeof u&&(g=u?aT.has(e):uT.has(e)),l&&g}}const DU=new RegExp("s*:selfs*,?","g");function Px(n,e,t,r){return new CU(n).build(e,t,r)}class CU{constructor(e){this._driver=e}build(e,t,r){const i=new SU(t);return this._resetContextStyleTimingState(i),ma(this,wE(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function PV(){return new d.vHH(3006,!1)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const _=g,D=_.name;D.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,u.push(this.visitState(_,t))}),_.name=D}else if(1==g.type){const _=this.visitTransition(g,t);r+=_.queryCount,i+=_.depCount,l.push(_)}else t.errors.push(function kV(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,l=i||{};r.styles.forEach(g=>{g instanceof Map&&g.forEach(_=>{sk(_).forEach(D=>{l.hasOwnProperty(D)||u.add(D)})})}),u.size&&(sT(u.values()),t.errors.push(function FV(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ma(this,wE(e.animation),t);return{type:1,matchers:wU(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:am(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ma(this,r,t)),options:am(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(l=>{t.currentTime=r;const g=ma(this,l,t);return i=Math.max(i,t.currentTime),g});return t.currentTime=i,{type:3,steps:u,options:am(e.options)}}visitAnimate(e,t){const r=function MU(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return kx(iT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=kx(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=iT(t,e);return kx(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:ug({});if(5==u.type)i=this.visitKeyframes(u,t);else{let l=e.styles,g=!1;if(!l){g=!0;const D={};r.easing&&(D.easing=r.easing),l=ug(D)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(l,t);_.isEmptyStep=g,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let g of i)"string"==typeof g?g===Ka?r.push(g):t.errors.push(new d.vHH(3002,!1)):r.push(rk(g));let u=!1,l=null;return r.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(l=g.get("easing"),g.delete("easing")),!u))for(let _ of g.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((g,_)=>{const D=t.collectedStyles.get(t.currentQuerySelector),T=D.get(_);let N=!0;T&&(u!=i&&u>=T.startTime&&i<=T.endTime&&(t.errors.push(function VV(n,e,t,r,i){return new d.vHH(3010,!1)}()),N=!1),u=T.startTime),N&&D.set(_,{startTime:u,endTime:i}),t.options&&function mU(n,e,t){const r=e.params||{},i=sk(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function NV(n){return new d.vHH(3001,!1)}())})}(g,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function UV(){return new d.vHH(3011,!1)}()),r;let u=0;const l=[];let g=!1,_=!1,D=0;const T=e.steps.map(Je=>{const ct=this._makeStyleAst(Je,t);let lt=null!=ct.offset?ct.offset:function AU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ct.styles),ht=0;return null!=lt&&(u++,ht=ct.offset=lt),_=_||ht<0||ht>1,g=g||ht<D,D=ht,l.push(ht),ct});_&&t.errors.push(function BV(){return new d.vHH(3012,!1)}()),g&&t.errors.push(function jV(){return new d.vHH(3200,!1)}());const N=e.steps.length;let L=0;u>0&&u<N?t.errors.push(function $V(){return new d.vHH(3202,!1)}()):0==u&&(L=1/(N-1));const H=N-1,Y=t.currentTime,ae=t.currentAnimateTimings,Ie=ae.duration;return T.forEach((Je,ct)=>{const lt=L>0?ct==H?1:L*ct:l[ct],ht=lt*Ie;t.currentTime=Y+ae.delay+ht,ae.duration=ht,this._validateStyleAst(Je,t),Je.offset=lt,r.styles.push(Je)}),r}visitReference(e,t){return{type:8,animation:ma(this,wE(e.animation),t),options:am(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:am(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:am(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,l]=function bU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(DU,"")),n=n.replace(/@\*/g,rT).replace(/@\w+/g,t=>rT+"-"+t.slice(1)).replace(/:animating/g,Nx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,ga(t.collectedStyles,t.currentQuerySelector,new Map);const g=ma(this,wE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:g,originalSelector:e.selector,options:am(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function HV(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iT(e.timings,t.errors,!0);return{type:12,animation:ma(this,wE(e.animation),t),timings:r,options:null}}}class SU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function am(n){return n?(n=_E(n)).params&&(n.params=function TU(n){return n?_E(n):null}(n.params)):n={},n}function kx(n,e,t){return{duration:n,delay:e,easing:t}}function Fx(n,e,t,r,i,u,l=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:l,subTimeline:g}}class lT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const RU=new RegExp(":enter","g"),PU=new RegExp(":leave","g");function Lx(n,e,t,r,i,u=new Map,l=new Map,g,_,D=[]){return(new kU).buildKeyframes(n,e,t,r,i,u,l,g,_,D)}class kU{buildKeyframes(e,t,r,i,u,l,g,_,D,T=[]){D=D||new lT;const N=new Vx(e,t,D,i,u,T,[]);N.options=_;const L=_.delay?Rd(_.delay):0;N.currentTimeline.delayNextStep(L),N.currentTimeline.setStyles([l],null,N.errors,_),ma(this,r,N);const H=N.timelines.filter(Y=>Y.containsAnimation());if(H.length&&g.size){let Y;for(let ae=H.length-1;ae>=0;ae--){const Ie=H[ae];if(Ie.element===t){Y=Ie;break}}Y&&!Y.allowOnlyTimelineStyles()&&Y.setStyles([g],null,N.errors,_)}return H.length?H.map(Y=>Y.buildKeyframes()):[Fx(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);u!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const l="number"==typeof u?u:Rd(EE(u,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const l=null!=r.duration?Rd(r.duration):null,g=null!=r.delay?Rd(r.delay):null;return 0!==l&&e.forEach(_=>{const D=t.appendInstructionToTimeline(_,l,g);u=Math.max(u,D.duration+D.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),ma(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cT);const l=Rd(u.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ma(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Rd(e.options.delay):0;e.steps.forEach(l=>{const g=t.createSubContext(e.options);u&&g.delayNextStep(u),ma(this,l,g),i=Math.max(i,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iT(t.params?EE(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(_=>{g.forwardTime((_.offset||0)*u),g.setStyles(_.styles,_.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Rd(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cT);let l=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=g.length;let _=null;g.forEach((D,T)=>{t.currentQueryIndex=T;const N=t.createSubContext(e.options,D);u&&N.delayNextStep(u),D===t.element&&(_=N.currentTimeline),ma(this,e.animation,N),N.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,N.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,l=Math.abs(u.duration),g=l*(t.currentQueryTotal-1);let _=l*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=g-_;break;case"full":_=r.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const N=T.currentTime;ma(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-N+(i.startTime-r.currentTimeline.startTime)}}const cT={};class Vx{constructor(e,t,r,i,u,l,g,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=l,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new dT(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Rd(r.duration)),null!=r.delay&&(i.delay=Rd(r.delay));const u=r.params;if(u){let l=i.params;l||(l=this.options.params={}),Object.keys(u).forEach(g=>{(!t||!l.hasOwnProperty(g))&&(l[g]=EE(u[g],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new Vx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=cT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new FU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,l){let g=[];if(i&&g.push(this.element),e.length>0){e=(e=e.replace(RU,"."+this._enterClassName)).replace(PU,"."+this._leaveClassName);let D=this._driver.query(this.element,e,1!=r);0!==r&&(D=r<0?D.slice(D.length+r,D.length):D.slice(0,r)),g.push(...D)}return!u&&0==g.length&&l.push(function GV(n){return new d.vHH(3014,!1)}()),g}}class dT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ka),this._currentKeyframe.set(t,Ka);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},l=function LU(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Ka)}else xf(i,t)}),t}(e,this._globalTimelineStyles);for(let[g,_]of l){const D=EE(_,u,r);this._pendingStyles.set(g,D),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??Ka),this._updateStyle(g,D)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((g,_)=>{const D=xf(g,new Map,this._backFill);D.forEach((T,N)=>{T===Ay?e.add(N):T===Ka&&t.add(N)}),r||D.set("offset",_/this.duration),i.push(D)});const u=e.size?sT(e.values()):[],l=t.size?sT(t.values()):[];if(r){const g=i[0],_=new Map(g);g.set("offset",0),_.set("offset",1),i=[g,_]}return Fx(this.element,i,u,l,this.duration,this.startTime,this.easing,!1)}}class FU extends dT{constructor(e,t,r,i,u,l,g=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=g,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],l=r+t,g=t/l,_=xf(e[0]);_.set("offset",0),u.push(_);const D=xf(e[0]);D.set("offset",ck(g)),u.push(D);const T=e.length-1;for(let N=1;N<=T;N++){let L=xf(e[N]);const H=L.get("offset");L.set("offset",ck((t+H*r)/l)),u.push(L)}r=l,t=0,i="",e=u}return Fx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ck(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Ux{}const VU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class UU extends Ux{normalizePropertyName(e,t){return Ox(e)}normalizeStyleValue(e,t,r,i){let u="";const l=r.toString().trim();if(VU.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&i.push(function OV(n,e){return new d.vHH(3005,!1)}())}return l+u}}function dk(n,e,t,r,i,u,l,g,_,D,T,N,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:l,timelines:g,queriedElements:_,preStyleProps:D,postStyleProps:T,totalTime:N,errors:L}}const Bx={};class hk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function BU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,l,g,_,D,T){const N=[],L=this.ast.options&&this.ast.options.params||Bx,Y=this.buildStyles(r,g&&g.params||Bx,N),ae=_&&_.params||Bx,Ie=this.buildStyles(i,ae,N),Je=new Set,ct=new Map,lt=new Map,ht="void"===i,Ft={params:jU(ae,L),delay:this.ast.options?.delay},qt=T?[]:Lx(e,t,this.ast.animation,u,l,Y,Ie,Ft,D,N);let vn=0;if(qt.forEach(iu=>{vn=Math.max(iu.duration+iu.delay,vn)}),N.length)return dk(t,this._triggerName,r,i,ht,Y,Ie,[],[],ct,lt,vn,N);qt.forEach(iu=>{const Od=iu.element,Sk=ga(ct,Od,new Set);iu.preStyleProps.forEach(um=>Sk.add(um));const DE=ga(lt,Od,new Set);iu.postStyleProps.forEach(um=>DE.add(um)),Od!==t&&Je.add(Od)});const cs=sT(Je.values());return dk(t,this._triggerName,r,i,ht,Y,Ie,qt,cs,ct,lt,vn)}}function jU(n,e){const t=_E(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class $U{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=_E(this.defaultParams);return Object.keys(e).forEach(u=>{const l=e[u];null!==l&&(i[u]=l)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((l,g)=>{l&&(l=EE(l,i,t));const _=this.normalizer.normalizePropertyName(g,t);l=this.normalizer.normalizeStyleValue(g,_,l,t),r.set(g,l)})}),r}}class GU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new $U(i.style,i.options&&i.options.params||{},r))}),fk(this.states,"true","1"),fk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new hk(e,i,this.states))}),this.fallbackTransition=function zU(n,e,t){return new hk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function fk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qU=new lT;class WU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=Px(this._driver,t,r,[]);if(r.length)throw function QV(n){return new d.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=KP(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let l;const g=new Map;if(u?(l=Lx(this._driver,t,u,Mx,tT,new Map,new Map,r,qU,i),l.forEach(T=>{const N=ga(g,T.element,new Map);T.postStyleProps.forEach(L=>N.set(L,null))})):(i.push(function JV(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function XV(n){return new d.vHH(3504,!1)}();g.forEach((T,N)=>{T.forEach((L,H)=>{T.set(H,this._driver.computeStyle(N,H,Ka))})});const D=Nf(l.map(T=>{const N=g.get(T.element);return this._buildPlayer(T,new Map,N)}));return this._playersById.set(e,D),D.onDestroy(()=>this.destroy(e)),this.players.push(D),D}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function eU(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=Tx(t,"","","");return Cx(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const pk="ng-animate-queued",jx="ng-animate-disabled",JU=[],gk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},XU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},nu="__ng_removed";class $x{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function rB(n){return n??null}(r?e.value:e),r){const u=_E(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const IE="void",Hx=new $x(IE);class eB{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ru(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function tU(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function nU(n){return new d.vHH(3303,!1)}();if(!function iB(n){return"start"==n||"done"==n}(r))throw function rU(n,e){return new d.vHH(3400,!1)}();const u=ga(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};u.push(l);const g=ga(this._engine.statesByElement,e,new Map);return g.has(t)||(ru(e,nT),ru(e,nT+"-"+t),g.set(t,Hx)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(l);_>=0&&u.splice(_,1),this._triggers.has(t)||g.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function iU(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),l=new Gx(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(ru(e,nT),ru(e,nT+"-"+t),this._engine.statesByElement.set(e,g=new Map));let _=g.get(t);const D=new $x(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&D.absorbOptions(_.options),g.set(t,D),_||(_=Hx),D.value!==IE&&_.value===D.value){if(!function aB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,D.params)){const ae=[],Ie=u.matchStyles(_.value,_.params,ae),Je=u.matchStyles(D.value,D.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{om(e,Ie),Ql(e,Je)})}return}const L=ga(this._engine.playersByElement,e,[]);L.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==t&&ae.queued&&ae.destroy()});let H=u.matchTransition(_.value,D.value,e,D.params),Y=!1;if(!H){if(!i)return;H=u.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:_,toState:D,player:l,isFallbackTransition:Y}),Y||(ru(e,pk),l.onStart(()=>{r_(e,pk)})),l.onDone(()=>{let ae=this.players.indexOf(l);ae>=0&&this.players.splice(ae,1);const Ie=this._engine.playersByElement.get(e);if(Ie){let Je=Ie.indexOf(l);Je>=0&&Ie.splice(Je,1)}}),this.players.push(l),L.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rT,!0);r.forEach(i=>{if(i[nu])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),l=new Map;if(u){const g=[];if(u.forEach((_,D)=>{if(l.set(D,_.value),this._triggers.has(D)){const T=this.trigger(e,D,IE,i);T&&g.push(T)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Nf(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const l=u.name;if(i.has(l))return;i.add(l);const _=this._triggers.get(l).fallbackTransition,D=r.get(l)||Hx,T=new $x(IE),N=new Gx(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:_,fromState:D,toState:T,player:N,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[nu];(!u||u===gk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ru(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,l=this._elementListeners.get(u);l&&l.forEach(g=>{if(g.name==r.triggerName){const _=Tx(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,Cx(r.player,g.phase,_,g.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==u||0==l?u-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class tB{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new eB(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,g=this.driver.getParentElement(t);for(;g;){const _=i.get(g);if(_){const D=r.indexOf(_);r.splice(D+1,0,e),l=!0;break}g=this.driver.getParentElement(g)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(hT(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!hT(t))return;const u=t[nu];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ru(e,jx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),r_(e,jx))}removeNode(e,t,r,i){if(hT(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[nu]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return hT(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,rT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Nx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[nu];if(t&&t.setForRemoval){if(e[nu]=gk,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ru(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Nf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function sU(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new lT,i=[],u=new Map,l=[],g=new Map,_=new Map,D=new Map,T=new Set;this.disabledNodes.forEach(_t=>{T.add(_t);const xt=this.driver.query(_t,".ng-animate-queued",!0);for(let Lt=0;Lt<xt.length;Lt++)T.add(xt[Lt])});const N=this.bodyNode,L=Array.from(this.statesByElement.keys()),H=vk(L,this.collectedEnterElements),Y=new Map;let ae=0;H.forEach((_t,xt)=>{const Lt=Mx+ae++;Y.set(xt,Lt),_t.forEach(gn=>ru(gn,Lt))});const Ie=[],Je=new Set,ct=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const xt=this.collectedLeaveElements[_t],Lt=xt[nu];Lt&&Lt.setForRemoval&&(Ie.push(xt),Je.add(xt),Lt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(gn=>Je.add(gn)):ct.add(xt))}const lt=new Map,ht=vk(L,Array.from(Je));ht.forEach((_t,xt)=>{const Lt=tT+ae++;lt.set(xt,Lt),_t.forEach(gn=>ru(gn,Lt))}),e.push(()=>{H.forEach((_t,xt)=>{const Lt=Y.get(xt);_t.forEach(gn=>r_(gn,Lt))}),ht.forEach((_t,xt)=>{const Lt=lt.get(xt);_t.forEach(gn=>r_(gn,Lt))}),Ie.forEach(_t=>{this.processLeaveNode(_t)})});const Ft=[],qt=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Lt=>{const gn=Lt.player,Ji=Lt.element;if(Ft.push(gn),this.collectedEnterElements.length){const Ss=Ji[nu];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(Lt.triggerName)){const lm=Ss.previousTriggersValues.get(Lt.triggerName),su=this.statesByElement.get(Lt.element);if(su&&su.has(Lt.triggerName)){const gT=su.get(Lt.triggerName);gT.value=lm,su.set(Lt.triggerName,gT)}}return void gn.destroy()}}const Jl=!N||!this.driver.containsElement(N,Ji),ya=lt.get(Ji),Rf=Y.get(Ji),Mr=this._buildInstruction(Lt,r,Rf,ya,Jl);if(Mr.errors&&Mr.errors.length)return void qt.push(Mr);if(Jl)return gn.onStart(()=>om(Ji,Mr.fromStyles)),gn.onDestroy(()=>Ql(Ji,Mr.toStyles)),void i.push(gn);if(Lt.isFallbackTransition)return gn.onStart(()=>om(Ji,Mr.fromStyles)),gn.onDestroy(()=>Ql(Ji,Mr.toStyles)),void i.push(gn);const Nk=[];Mr.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||Nk.push(Ss)}),Mr.timelines=Nk,r.append(Ji,Mr.timelines),l.push({instruction:Mr,player:gn,element:Ji}),Mr.queriedElements.forEach(Ss=>ga(g,Ss,[]).push(gn)),Mr.preStyleProps.forEach((Ss,lm)=>{if(Ss.size){let su=_.get(lm);su||_.set(lm,su=new Set),Ss.forEach((gT,Wx)=>su.add(Wx))}}),Mr.postStyleProps.forEach((Ss,lm)=>{let su=D.get(lm);su||D.set(lm,su=new Set),Ss.forEach((gT,Wx)=>su.add(Wx))})});if(qt.length){const _t=[];qt.forEach(xt=>{_t.push(function oU(n,e){return new d.vHH(3505,!1)}())}),Ft.forEach(xt=>xt.destroy()),this.reportError(_t)}const vn=new Map,cs=new Map;l.forEach(_t=>{const xt=_t.element;r.has(xt)&&(cs.set(xt,xt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,vn))}),i.forEach(_t=>{const xt=_t.element;this._getPreviousPlayers(xt,!1,_t.namespaceId,_t.triggerName,null).forEach(gn=>{ga(vn,xt,[]).push(gn),gn.destroy()})});const iu=Ie.filter(_t=>wk(_t,_,D)),Od=new Map;yk(Od,this.driver,ct,D,Ka).forEach(_t=>{wk(_t,_,D)&&iu.push(_t)});const DE=new Map;H.forEach((_t,xt)=>{yk(DE,this.driver,new Set(_t),_,Ay)}),iu.forEach(_t=>{const xt=Od.get(_t),Lt=DE.get(_t);Od.set(_t,new Map([...xt?.entries()??[],...Lt?.entries()??[]]))});const um=[],Ak=[],Mk={};l.forEach(_t=>{const{element:xt,player:Lt,instruction:gn}=_t;if(r.has(xt)){if(T.has(xt))return Lt.onDestroy(()=>Ql(xt,gn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(gn.totalTime),void i.push(Lt);let Ji=Mk;if(cs.size>1){let ya=xt;const Rf=[];for(;ya=ya.parentNode;){const Mr=cs.get(ya);if(Mr){Ji=Mr;break}Rf.push(ya)}Rf.forEach(Mr=>cs.set(Mr,Ji))}const Jl=this._buildAnimation(Lt.namespaceId,gn,vn,u,DE,Od);if(Lt.setRealPlayer(Jl),Ji===Mk)um.push(Lt);else{const ya=this.playersByElement.get(Ji);ya&&ya.length&&(Lt.parentPlayer=Nf(ya)),i.push(Lt)}}else om(xt,gn.fromStyles),Lt.onDestroy(()=>Ql(xt,gn.toStyles)),Ak.push(Lt),T.has(xt)&&i.push(Lt)}),Ak.forEach(_t=>{const xt=u.get(_t.element);if(xt&&xt.length){const Lt=Nf(xt);_t.setRealPlayer(Lt)}}),i.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<Ie.length;_t++){const xt=Ie[_t],Lt=xt[nu];if(r_(xt,tT),Lt&&Lt.hasAnimation)continue;let gn=[];if(g.size){let Jl=g.get(xt);Jl&&Jl.length&&gn.push(...Jl);let ya=this.driver.query(xt,Nx,!0);for(let Rf=0;Rf<ya.length;Rf++){let Mr=g.get(ya[Rf]);Mr&&Mr.length&&gn.push(...Mr)}}const Ji=gn.filter(Jl=>!Jl.destroyed);Ji.length?sB(this,xt,Ji):this.processLeaveNode(xt)}return Ie.length=0,um.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const xt=this.players.indexOf(_t);this.players.splice(xt,1)}),_t.play()}),um}elementContainsData(e,t){let r=!1;const i=t[nu];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let l=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(l=g)}else{const g=this.playersByElement.get(e);if(g){const _=!u||u==IE;g.forEach(D=>{D.queued||!_&&D.triggerName!=i||l.push(D)})}}return(r||i)&&(l=l.filter(g=>!(r&&r!=g.namespaceId||i&&i!=g.triggerName))),l}_beforeAnimationBuild(e,t,r){const u=t.element,l=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const D=_.element,T=D!==u,N=ga(r,D,[]);this._getPreviousPlayers(D,T,l,g,t.toState).forEach(H=>{const Y=H.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),H.destroy(),N.push(H)})}om(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,l){const g=t.triggerName,_=t.element,D=[],T=new Set,N=new Set,L=t.timelines.map(Y=>{const ae=Y.element;T.add(ae);const Ie=ae[nu];if(Ie&&Ie.removedBeforeQueried)return new dg(Y.duration,Y.delay);const Je=ae!==_,ct=function oB(n){const e=[];return _k(n,e),e}((r.get(ae)||JU).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ae),lt=u.get(ae),ht=l.get(ae),Ft=KP(this._normalizer,Y.keyframes,lt,ht),qt=this._buildPlayer(Y,Ft,ct);if(Y.subTimeline&&i&&N.add(ae),Je){const vn=new Gx(e,g,ae);vn.setRealPlayer(qt),D.push(vn)}return qt});D.forEach(Y=>{ga(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function nB(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Y.element,Y))}),T.forEach(Y=>ru(Y,nk));const H=Nf(L);return H.onDestroy(()=>{T.forEach(Y=>r_(Y,nk)),Ql(_,t.toStyles)}),N.forEach(Y=>{ga(i,Y,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new dg(e.duration,e.delay)}}class Gx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new dg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Cx(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ga(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hT(n){return n&&1===n.nodeType}function mk(n,e){const t=n.style.display;return n.style.display=e??"none",t}function yk(n,e,t,r,i){const u=[];t.forEach(_=>u.push(mk(_)));const l=[];r.forEach((_,D)=>{const T=new Map;_.forEach(N=>{const L=e.computeStyle(D,N,i);T.set(N,L),(!L||0==L.length)&&(D[nu]=XU,l.push(D))}),n.set(D,T)});let g=0;return t.forEach(_=>mk(_,u[g++])),l}function vk(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const r=1,i=new Set(e),u=new Map;function l(g){if(!g)return r;let _=u.get(g);if(_)return _;const D=g.parentNode;return _=t.has(D)?D:i.has(D)?r:l(D),u.set(g,_),_}return e.forEach(g=>{const _=l(g);_!==r&&t.get(_).push(g)}),t}function ru(n,e){n.classList?.add(e)}function r_(n,e){n.classList?.remove(e)}function sB(n,e,t){Nf(t).onDone(()=>n.processLeaveNode(e))}function _k(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof A0?_k(r.players,e):e.push(r)}}function wk(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class fT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new tB(e,t,r),this._timelineEngine=new WU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const l=e+"-"+i;let g=this._triggerCache[l];if(!g){const _=[],T=Px(this._driver,u,_,[]);if(_.length)throw function KV(n,e){return new d.vHH(3404,!1)}();g=function HU(n,e,t){return new GU(n,e,t)}(i,T,this._normalizer),this._triggerCache[l]=g}this._transitionEngine.registerTrigger(t,i,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,l]=YP(r);this._timelineEngine.command(u,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[l,g]=YP(r);return this._timelineEngine.listen(l,t,g,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let lB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ql(this._element,this._initialStyles),this._endStyles&&(Ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(om(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(om(this._element,this._endStyles),this._endStyles=null),Ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function zx(n){let e=null;return n.forEach((t,r)=>{(function cB(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Ek{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:ok(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dB{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return JP(e,t)}getParentElement(e){return Sx(e)}query(e,t,r){return XP(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,l=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const D=new Map,T=l.filter(H=>H instanceof Ek);(function vU(n,e){return 0===n||0===e})(r,i)&&T.forEach(H=>{H.currentSnapshot.forEach((Y,ae)=>D.set(ae,Y))});let N=function gU(n){return n.length?n[0]instanceof Map?n:n.map(e=>rk(e)):[]}(t).map(H=>xf(H));N=function _U(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,l)=>{r.has(l)||i.push(l),r.set(l,u)}),i.length)for(let u=1;u<e.length;u++){let l=e[u];i.forEach(g=>l.set(g,ok(n,g)))}}return e}(e,N,D);const L=function uB(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=zx(e[0]),e.length>1&&(r=zx(e[e.length-1]))):e instanceof Map&&(t=zx(e)),t||r?new lB(n,t,r):null}(e,N);return new Ek(e,N,_,L)}}let hB=(()=>{class n extends wo{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?wD(t):t;return Ik(this._renderer,null,r,"register",[i]),new fB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ne))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class fB extends la{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new pB(this._id,e,t||{},this._renderer)}}class pB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ik(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ik(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Dk="@.disabled";let gB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,l)=>{const g=l?.parentNode(u);g&&l.removeChild(g,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new Ck("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,T)),T}const l=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(l,g,t,T.name,T)};return r.data.animation.forEach(_),new mB(this,g,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[l,g]=u;l(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(fT),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ck{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Dk?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class mB extends Ck{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Dk?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function yB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),l="";return"@"!=u.charAt(0)&&([u,l]=function vB(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,l,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let _B=(()=>{class n extends fT{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ne),d.LFG(Ax),d.LFG(Ux),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const bk=[{provide:wo,useClass:hB},{provide:Ux,useFactory:function wB(){return new UU}},{provide:fT,useClass:_B},{provide:d.FYo,useFactory:function EB(n,e,t){return new gB(n,e,t)},deps:[Qt,fT,d.R0b]}],qx=[{provide:Ax,useFactory:()=>new dB},{provide:d.QbO,useValue:"BrowserAnimations"},...bk],Tk=[{provide:Ax,useClass:ek},{provide:d.QbO,useValue:"NoopAnimations"},...bk];let IB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Tk:qx}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:qx,imports:[Oa]}),n})(),DB=(()=>{class n{constructor(){this.title="firebaseLogin"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Is]}),n})();const CB_firebaseConfig={apiKey:"AIzaSyA92RfCCXRKxGeYiRi0K_0nGg_M4hyqFZQ",authDomain:"fir-2-df271.firebaseapp.com",projectId:"fir-2-df271",storageBucket:"fir-2-df271.appspot.com",messagingSenderId:"475452440682",appId:"1:475452440682:web:95f534bb5bbb0b1a320a13"};let bB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[DB]}),n.\u0275inj=d.cJS({imports:[Oa,SV,VI,Za.hO.initializeApp(CB_firebaseConfig),IB,yA.forRoot(),IV]}),n})();gl().bootstrapModule(bB).catch(n=>console.error(n))},9751:(wt,Ae,F)=>{F.d(Ae,{y:()=>De});var d=F(2961),K=F(727),P=F(8822),ie=F(9635),se=F(2416),ne=F(576),ye=F(2806);let De=(()=>{class W{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const rt=new W;return rt.source=this,rt.operator=Te,rt}subscribe(Te,rt,pt){const ue=function j(W){return W&&W instanceof d.Lv||function z(W){return W&&(0,ne.m)(W.next)&&(0,ne.m)(W.error)&&(0,ne.m)(W.complete)}(W)&&(0,K.Nn)(W)}(Te)?Te:new d.Hp(Te,rt,pt);return(0,ye.x)(()=>{const{operator:Le,source:Oe}=this;ue.add(Le?Le.call(ue,Oe):Oe?this._subscribe(ue):this._trySubscribe(ue))}),ue}_trySubscribe(Te){try{return this._subscribe(Te)}catch(rt){Te.error(rt)}}forEach(Te,rt){return new(rt=pe(rt))((pt,ue)=>{const Le=new d.Hp({next:Oe=>{try{Te(Oe)}catch(Ge){ue(Ge),Le.unsubscribe()}},error:ue,complete:pt});this.subscribe(Le)})}_subscribe(Te){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(Te)}[P.L](){return this}pipe(...Te){return(0,ie.U)(Te)(this)}toPromise(Te){return new(Te=pe(Te))((rt,pt)=>{let ue;this.subscribe(Le=>ue=Le,Le=>pt(Le),()=>rt(ue))})}}return W.create=Be=>new W(Be),W})();function pe(W){var Be;return null!==(Be=W??se.config.Promise)&&void 0!==Be?Be:Promise}},7579:(wt,Ae,F)=>{F.d(Ae,{x:()=>ye});var d=F(9751),K=F(727);const ie=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),ne=F(2806);let ye=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const W=new De(this,this);return W.operator=j,W}_throwIfClosed(){if(this.closed)throw new ie}next(j){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(j)}})}error(j){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:W}=this;for(;W.length;)W.shift().error(j)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:W,isStopped:Be,observers:Te}=this;return W||Be?K.Lc:(this.currentObservers=null,Te.push(j),new K.w0(()=>{this.currentObservers=null,(0,se.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:W,thrownError:Be,isStopped:Te}=this;W?j.error(Be):Te&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return pe.create=(z,j)=>new De(z,j),pe})();class De extends ye{constructor(z,j){super(),this.destination=z,this.source=j}next(z){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===W||W.call(j,z)}error(z){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===W||W.call(j,z)}complete(){var z,j;null===(j=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===j||j.call(z)}_subscribe(z){var j,W;return null!==(W=null===(j=this.source)||void 0===j?void 0:j.subscribe(z))&&void 0!==W?W:K.Lc}}},2961:(wt,Ae,F)=>{F.d(Ae,{Hp:()=>pt,Lv:()=>W});var d=F(576),K=F(727),P=F(2416),ie=F(7849);function se(){}const ne=pe("C",void 0,void 0);function pe(Pe,_e,ge){return{kind:Pe,value:_e,error:ge}}var z=F(3410),j=F(2806);class W extends K.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,K.Nn)(_e)&&_e.add(this)):this.destination=Ge}static create(_e,ge,Ne){return new pt(_e,ge,Ne)}next(_e){this.isStopped?Oe(function De(Pe){return pe("N",Pe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Oe(function ye(Pe){return pe("E",void 0,Pe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Oe(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Te(Pe,_e){return Be.call(Pe,_e)}class rt{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ge}=this;if(ge.next)try{ge.next(_e)}catch(Ne){ue(Ne)}}error(_e){const{partialObserver:ge}=this;if(ge.error)try{ge.error(_e)}catch(Ne){ue(Ne)}else ue(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ge){ue(ge)}}}class pt extends W{constructor(_e,ge,Ne){let Ee;if(super(),(0,d.m)(_e)||!_e)Ee={next:_e??void 0,error:ge??void 0,complete:Ne??void 0};else{let je;this&&P.config.useDeprecatedNextContext?(je=Object.create(_e),je.unsubscribe=()=>this.unsubscribe(),Ee={next:_e.next&&Te(_e.next,je),error:_e.error&&Te(_e.error,je),complete:_e.complete&&Te(_e.complete,je)}):Ee=_e}this.destination=new rt(Ee)}}function ue(Pe){P.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(Pe):(0,ie.h)(Pe)}function Oe(Pe,_e){const{onStoppedNotification:ge}=P.config;ge&&z.z.setTimeout(()=>ge(Pe,_e))}const Ge={closed:!0,next:se,error:function Le(Pe){throw Pe},complete:se}},727:(wt,Ae,F)=>{F.d(Ae,{Lc:()=>ne,w0:()=>se,Nn:()=>ye});var d=F(576);const P=(0,F(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((W,Be)=>`${Be+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ie=F(8737);class se{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:W}=this;if((0,d.m)(W))try{W()}catch(Te){z=Te instanceof P?Te.errors:[Te]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Te of Be)try{De(Te)}catch(rt){z=z??[],rt instanceof P?z=[...z,...rt.errors]:z.push(rt)}}if(z)throw new P(z)}}add(z){var j;if(z&&z!==this)if(this.closed)De(z);else{if(z instanceof se){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(z)}}_hasParent(z){const{_parentage:j}=this;return j===z||Array.isArray(j)&&j.includes(z)}_addParent(z){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(z),j):j?[j,z]:z}_removeParent(z){const{_parentage:j}=this;j===z?this._parentage=null:Array.isArray(j)&&(0,ie.P)(j,z)}remove(z){const{_finalizers:j}=this;j&&(0,ie.P)(j,z),z instanceof se&&z._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const ne=se.EMPTY;function ye(pe){return pe instanceof se||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function De(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(wt,Ae,F)=>{F.d(Ae,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,Ae,F)=>{F.d(Ae,{E:()=>K});const K=new(F(9751).y)(se=>se.complete())},8996:(wt,Ae,F)=>{F.d(Ae,{D:()=>_e});var d=F(8421),K=F(5363),P=F(9468),ne=F(9751),De=F(2202),pe=F(576),z=F(9672);function W(ge,Ne){if(!ge)throw new Error("Iterable cannot be null");return new ne.y(Ee=>{(0,z.f)(Ee,Ne,()=>{const je=ge[Symbol.asyncIterator]();(0,z.f)(Ee,Ne,()=>{je.next().then(re=>{re.done?Ee.complete():Ee.next(re.value)})},0,!0)})})}var Be=F(3670),Te=F(8239),rt=F(1144),pt=F(6495),ue=F(2206),Le=F(4532),Oe=F(3260);function _e(ge,Ne){return Ne?function Pe(ge,Ne){if(null!=ge){if((0,Be.c)(ge))return function ie(ge,Ne){return(0,d.Xf)(ge).pipe((0,P.R)(Ne),(0,K.Q)(Ne))}(ge,Ne);if((0,rt.z)(ge))return function ye(ge,Ne){return new ne.y(Ee=>{let je=0;return Ne.schedule(function(){je===ge.length?Ee.complete():(Ee.next(ge[je++]),Ee.closed||this.schedule())})})}(ge,Ne);if((0,Te.t)(ge))return function se(ge,Ne){return(0,d.Xf)(ge).pipe((0,P.R)(Ne),(0,K.Q)(Ne))}(ge,Ne);if((0,ue.D)(ge))return W(ge,Ne);if((0,pt.T)(ge))return function j(ge,Ne){return new ne.y(Ee=>{let je;return(0,z.f)(Ee,Ne,()=>{je=ge[De.h](),(0,z.f)(Ee,Ne,()=>{let re,Ke;try{({value:re,done:Ke}=je.next())}catch(en){return void Ee.error(en)}Ke?Ee.complete():Ee.next(re)},0,!0)}),()=>(0,pe.m)(je?.return)&&je.return()})}(ge,Ne);if((0,Oe.L)(ge))return function Ge(ge,Ne){return W((0,Oe.Q)(ge),Ne)}(ge,Ne)}throw(0,Le.z)(ge)}(ge,Ne):(0,d.Xf)(ge)}},8421:(wt,Ae,F)=>{F.d(Ae,{Xf:()=>Be});var d=F(655),K=F(1144),P=F(8239),ie=F(9751),se=F(3670),ne=F(2206),ye=F(4532),De=F(6495),pe=F(3260),z=F(576),j=F(7849),W=F(8822);function Be(Pe){if(Pe instanceof ie.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function Te(Pe){return new ie.y(_e=>{const ge=Pe[W.L]();if((0,z.m)(ge.subscribe))return ge.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,K.z)(Pe))return function rt(Pe){return new ie.y(_e=>{for(let ge=0;ge<Pe.length&&!_e.closed;ge++)_e.next(Pe[ge]);_e.complete()})}(Pe);if((0,P.t)(Pe))return function pt(Pe){return new ie.y(_e=>{Pe.then(ge=>{_e.closed||(_e.next(ge),_e.complete())},ge=>_e.error(ge)).then(null,j.h)})}(Pe);if((0,ne.D)(Pe))return Le(Pe);if((0,De.T)(Pe))return function ue(Pe){return new ie.y(_e=>{for(const ge of Pe)if(_e.next(ge),_e.closed)return;_e.complete()})}(Pe);if((0,pe.L)(Pe))return function Oe(Pe){return Le((0,pe.Q)(Pe))}(Pe)}throw(0,ye.z)(Pe)}function Le(Pe){return new ie.y(_e=>{(function Ge(Pe,_e){var ge,Ne,Ee,je;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ge=(0,d.KL)(Pe);!(Ne=yield ge.next()).done;)if(_e.next(Ne.value),_e.closed)return}catch(re){Ee={error:re}}finally{try{Ne&&!Ne.done&&(je=ge.return)&&(yield je.call(ge))}finally{if(Ee)throw Ee.error}}_e.complete()})})(Pe,_e).catch(ge=>_e.error(ge))})}},6451:(wt,Ae,F)=>{F.d(Ae,{T:()=>ne});var d=F(8189),K=F(8421),P=F(515),ie=F(7669),se=F(8996);function ne(...ye){const De=(0,ie.yG)(ye),pe=(0,ie._6)(ye,1/0),z=ye;return z.length?1===z.length?(0,K.Xf)(z[0]):(0,d.J)(pe)((0,se.D)(z,De)):P.E}},5403:(wt,Ae,F)=>{F.d(Ae,{x:()=>K});var d=F(2961);function K(ie,se,ne,ye,De){return new P(ie,se,ne,ye,De)}class P extends d.Lv{constructor(se,ne,ye,De,pe,z){super(se),this.onFinalize=pe,this.shouldUnsubscribe=z,this._next=ne?function(j){try{ne(j)}catch(W){se.error(W)}}:super._next,this._error=De?function(j){try{De(j)}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(j){se.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(wt,Ae,F)=>{F.d(Ae,{U:()=>P});var d=F(4482),K=F(5403);function P(ie,se){return(0,d.e)((ne,ye)=>{let De=0;ne.subscribe((0,K.x)(ye,pe=>{ye.next(ie.call(se,pe,De++))}))})}},8189:(wt,Ae,F)=>{F.d(Ae,{J:()=>P});var d=F(5577),K=F(4671);function P(ie=1/0){return(0,d.z)(K.y,ie)}},5577:(wt,Ae,F)=>{F.d(Ae,{z:()=>De});var d=F(4004),K=F(8421),P=F(4482),ie=F(9672),se=F(5403),ye=F(576);function De(pe,z,j=1/0){return(0,ye.m)(z)?De((W,Be)=>(0,d.U)((Te,rt)=>z(W,Te,Be,rt))((0,K.Xf)(pe(W,Be))),j):("number"==typeof z&&(j=z),(0,P.e)((W,Be)=>function ne(pe,z,j,W,Be,Te,rt,pt){const ue=[];let Le=0,Oe=0,Ge=!1;const Pe=()=>{Ge&&!ue.length&&!Le&&z.complete()},_e=Ne=>Le<W?ge(Ne):ue.push(Ne),ge=Ne=>{Te&&z.next(Ne),Le++;let Ee=!1;(0,K.Xf)(j(Ne,Oe++)).subscribe((0,se.x)(z,je=>{Be?.(je),Te?_e(je):z.next(je)},()=>{Ee=!0},void 0,()=>{if(Ee)try{for(Le--;ue.length&&Le<W;){const je=ue.shift();rt?(0,ie.f)(z,rt,()=>ge(je)):ge(je)}Pe()}catch(je){z.error(je)}}))};return pe.subscribe((0,se.x)(z,_e,()=>{Ge=!0,Pe()})),()=>{pt?.()}}(W,Be,pe,j)))}},5363:(wt,Ae,F)=>{F.d(Ae,{Q:()=>ie});var d=F(9672),K=F(4482),P=F(5403);function ie(se,ne=0){return(0,K.e)((ye,De)=>{ye.subscribe((0,P.x)(De,pe=>(0,d.f)(De,se,()=>De.next(pe),ne),()=>(0,d.f)(De,se,()=>De.complete(),ne),pe=>(0,d.f)(De,se,()=>De.error(pe),ne)))})}},3099:(wt,Ae,F)=>{F.d(Ae,{B:()=>se});var d=F(8421),K=F(7579),P=F(2961),ie=F(4482);function se(ye={}){const{connector:De=(()=>new K.x),resetOnError:pe=!0,resetOnComplete:z=!0,resetOnRefCountZero:j=!0}=ye;return W=>{let Be,Te,rt,pt=0,ue=!1,Le=!1;const Oe=()=>{Te?.unsubscribe(),Te=void 0},Ge=()=>{Oe(),Be=rt=void 0,ue=Le=!1},Pe=()=>{const _e=Be;Ge(),_e?.unsubscribe()};return(0,ie.e)((_e,ge)=>{pt++,!Le&&!ue&&Oe();const Ne=rt=rt??De();ge.add(()=>{pt--,0===pt&&!Le&&!ue&&(Te=ne(Pe,j))}),Ne.subscribe(ge),!Be&&pt>0&&(Be=new P.Hp({next:Ee=>Ne.next(Ee),error:Ee=>{Le=!0,Oe(),Te=ne(Ge,pe,Ee),Ne.error(Ee)},complete:()=>{ue=!0,Oe(),Te=ne(Ge,z),Ne.complete()}}),(0,d.Xf)(_e).subscribe(Be))})(W)}}function ne(ye,De,...pe){if(!0===De)return void ye();if(!1===De)return;const z=new P.Hp({next:()=>{z.unsubscribe(),ye()}});return(0,d.Xf)(De(...pe)).subscribe(z)}},9468:(wt,Ae,F)=>{F.d(Ae,{R:()=>K});var d=F(4482);function K(P,ie=0){return(0,d.e)((se,ne)=>{ne.add(P.schedule(()=>se.subscribe(ne),ie))})}},8505:(wt,Ae,F)=>{F.d(Ae,{b:()=>se});var d=F(576),K=F(4482),P=F(5403),ie=F(4671);function se(ne,ye,De){const pe=(0,d.m)(ne)||ye||De?{next:ne,error:ye,complete:De}:ne;return pe?(0,K.e)((z,j)=>{var W;null===(W=pe.subscribe)||void 0===W||W.call(pe);let Be=!0;z.subscribe((0,P.x)(j,Te=>{var rt;null===(rt=pe.next)||void 0===rt||rt.call(pe,Te),j.next(Te)},()=>{var Te;Be=!1,null===(Te=pe.complete)||void 0===Te||Te.call(pe),j.complete()},Te=>{var rt;Be=!1,null===(rt=pe.error)||void 0===rt||rt.call(pe,Te),j.error(Te)},()=>{var Te,rt;Be&&(null===(Te=pe.unsubscribe)||void 0===Te||Te.call(pe)),null===(rt=pe.finalize)||void 0===rt||rt.call(pe)}))}):ie.y}},4408:(wt,Ae,F)=>{F.d(Ae,{o:()=>se});var d=F(727);class K extends d.w0{constructor(ye,De){super()}schedule(ye,De=0){return this}}const P={setInterval(ne,ye,...De){const{delegate:pe}=P;return pe?.setInterval?pe.setInterval(ne,ye,...De):setInterval(ne,ye,...De)},clearInterval(ne){const{delegate:ye}=P;return(ye?.clearInterval||clearInterval)(ne)},delegate:void 0};var ie=F(8737);class se extends K{constructor(ye,De){super(ye,De),this.scheduler=ye,this.work=De,this.pending=!1}schedule(ye,De=0){var pe;if(this.closed)return this;this.state=ye;const z=this.id,j=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(j,z,De)),this.pending=!0,this.delay=De,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(j,this.id,De),this}requestAsyncId(ye,De,pe=0){return P.setInterval(ye.flush.bind(ye,this),pe)}recycleAsyncId(ye,De,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return De;null!=De&&P.clearInterval(De)}execute(ye,De){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ye,De);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,De){let z,pe=!1;try{this.work(ye)}catch(j){pe=!0,z=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ye,scheduler:De}=this,{actions:pe}=De;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(pe,this),null!=ye&&(this.id=this.recycleAsyncId(De,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Ae,F)=>{F.d(Ae,{v:()=>P});var d=F(6063);class K{constructor(se,ne=K.now){this.schedulerActionCtor=se,this.now=ne}schedule(se,ne=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,ne)}}K.now=d.l.now;class P extends K{constructor(se,ne=K.now){super(se,ne),this.actions=[],this._active=!1}flush(se){const{actions:ne}=this;if(this._active)return void ne.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=ne.shift());if(this._active=!1,ye){for(;se=ne.shift();)se.unsubscribe();throw ye}}}},4986:(wt,Ae,F)=>{F.d(Ae,{z:()=>P});var d=F(4408);const P=new(F(7565).v)(d.o)},6063:(wt,Ae,F)=>{F.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(wt,Ae,F)=>{F.d(Ae,{z:()=>d});const d={setTimeout(K,P,...ie){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(K,P,...ie):setTimeout(K,P,...ie)},clearTimeout(K){const{delegate:P}=d;return(P?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(wt,Ae,F)=>{F.d(Ae,{h:()=>K});const K=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Ae,F)=>{F.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,Ae,F)=>{F.d(Ae,{_6:()=>ne,jO:()=>ie,yG:()=>se});var d=F(576);function P(ye){return ye[ye.length-1]}function ie(ye){return(0,d.m)(P(ye))?ye.pop():void 0}function se(ye){return function K(ye){return ye&&(0,d.m)(ye.schedule)}(P(ye))?ye.pop():void 0}function ne(ye,De){return"number"==typeof P(ye)?ye.pop():De}},8737:(wt,Ae,F)=>{function d(K,P){if(K){const ie=K.indexOf(P);0<=ie&&K.splice(ie,1)}}F.d(Ae,{P:()=>d})},3888:(wt,Ae,F)=>{function d(K){const ie=K(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}F.d(Ae,{d:()=>d})},2806:(wt,Ae,F)=>{F.d(Ae,{O:()=>ie,x:()=>P});var d=F(2416);let K=null;function P(se){if(d.config.useDeprecatedSynchronousErrorHandling){const ne=!K;if(ne&&(K={errorThrown:!1,error:null}),se(),ne){const{errorThrown:ye,error:De}=K;if(K=null,ye)throw De}}else se()}function ie(se){d.config.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=se)}},9672:(wt,Ae,F)=>{function d(K,P,ie,se=0,ne=!1){const ye=P.schedule(function(){ie(),ne?K.add(this.schedule(null,se)):this.unsubscribe()},se);if(K.add(ye),!ne)return ye}F.d(Ae,{f:()=>d})},4671:(wt,Ae,F)=>{function d(K){return K}F.d(Ae,{y:()=>d})},1144:(wt,Ae,F)=>{F.d(Ae,{z:()=>d});const d=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(wt,Ae,F)=>{F.d(Ae,{D:()=>K});var d=F(576);function K(P){return Symbol.asyncIterator&&(0,d.m)(P?.[Symbol.asyncIterator])}},576:(wt,Ae,F)=>{function d(K){return"function"==typeof K}F.d(Ae,{m:()=>d})},3670:(wt,Ae,F)=>{F.d(Ae,{c:()=>P});var d=F(8822),K=F(576);function P(ie){return(0,K.m)(ie[d.L])}},6495:(wt,Ae,F)=>{F.d(Ae,{T:()=>P});var d=F(2202),K=F(576);function P(ie){return(0,K.m)(ie?.[d.h])}},8239:(wt,Ae,F)=>{F.d(Ae,{t:()=>K});var d=F(576);function K(P){return(0,d.m)(P?.then)}},3260:(wt,Ae,F)=>{F.d(Ae,{L:()=>ie,Q:()=>P});var d=F(655),K=F(576);function P(se){return(0,d.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:De,done:pe}=yield(0,d.qq)(ye.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(De)}}finally{ye.releaseLock()}})}function ie(se){return(0,K.m)(se?.getReader)}},4482:(wt,Ae,F)=>{F.d(Ae,{A:()=>K,e:()=>P});var d=F(576);function K(ie){return(0,d.m)(ie?.lift)}function P(ie){return se=>{if(K(se))return se.lift(function(ne){try{return ie(ne,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(wt,Ae,F)=>{F.d(Ae,{U:()=>P,z:()=>K});var d=F(4671);function K(...ie){return P(ie)}function P(ie){return 0===ie.length?d.y:1===ie.length?ie[0]:function(ne){return ie.reduce((ye,De)=>De(ye),ne)}}},7849:(wt,Ae,F)=>{F.d(Ae,{h:()=>P});var d=F(2416),K=F(3410);function P(ie){K.z.setTimeout(()=>{const{onUnhandledError:se}=d.config;if(!se)throw ie;se(ie)})}},4532:(wt,Ae,F)=>{function d(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>d})},655:(wt,Ae,F)=>{function ie(ce,ve){var Ce={};for(var xe in ce)Object.prototype.hasOwnProperty.call(ce,xe)&&ve.indexOf(xe)<0&&(Ce[xe]=ce[xe]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(xe=Object.getOwnPropertySymbols(ce);qe<xe.length;qe++)ve.indexOf(xe[qe])<0&&Object.prototype.propertyIsEnumerable.call(ce,xe[qe])&&(Ce[xe[qe]]=ce[xe[qe]])}return Ce}function W(ce,ve,Ce,xe){return new(Ce||(Ce=Promise))(function(ke,Ze){function at(Rt){try{vt(xe.next(Rt))}catch(_n){Ze(_n)}}function jt(Rt){try{vt(xe.throw(Rt))}catch(_n){Ze(_n)}}function vt(Rt){Rt.done?ke(Rt.value):function qe(ke){return ke instanceof Ce?ke:new Ce(function(Ze){Ze(ke)})}(Rt.value).then(at,jt)}vt((xe=xe.apply(ce,ve||[])).next())})}function Pe(ce){return this instanceof Pe?(this.v=ce,this):new Pe(ce)}function _e(ce,ve,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,xe=Ce.apply(ce,ve||[]),ke=[];return qe={},Ze("next"),Ze("throw"),Ze("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function Ze(Jt){xe[Jt]&&(qe[Jt]=function(mn){return new Promise(function(_r,Br){ke.push([Jt,mn,_r,Br])>1||at(Jt,mn)})})}function at(Jt,mn){try{!function jt(Jt){Jt.value instanceof Pe?Promise.resolve(Jt.value.v).then(vt,Rt):_n(ke[0][2],Jt)}(xe[Jt](mn))}catch(_r){_n(ke[0][3],_r)}}function vt(Jt){at("next",Jt)}function Rt(Jt){at("throw",Jt)}function _n(Jt,mn){Jt(mn),ke.shift(),ke.length&&at(ke[0][0],ke[0][1])}}function Ne(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ve=ce[Symbol.asyncIterator];return ve?ve.call(ce):(ce=function pt(ce){var ve="function"==typeof Symbol&&Symbol.iterator,Ce=ve&&ce[ve],xe=0;if(Ce)return Ce.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&xe>=ce.length&&(ce=void 0),{value:ce&&ce[xe++],done:!ce}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Ce={},xe("next"),xe("throw"),xe("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function xe(ke){Ce[ke]=ce[ke]&&function(Ze){return new Promise(function(at,jt){!function qe(ke,Ze,at,jt){Promise.resolve(jt).then(function(vt){ke({value:vt,done:at})},Ze)}(at,jt,(Ze=ce[ke](Ze)).done,Ze.value)})}}}F.d(Ae,{FC:()=>_e,KL:()=>Ne,_T:()=>ie,mG:()=>W,qq:()=>Pe})},2223:(wt,Ae,F)=>{F.d(Ae,{$8M:()=>ho,$WT:()=>To,$Z:()=>z_,AFp:()=>ZE,ALo:()=>nw,AaK:()=>De,BQk:()=>Dy,CHM:()=>ko,CRH:()=>fw,D6c:()=>Lw,EJc:()=>VC,EiD:()=>T_,EpF:()=>tD,F4k:()=>nD,FYo:()=>B_,FiY:()=>Ct,GfV:()=>Lu,Gpc:()=>j,Gre:()=>aA,HDt:()=>cb,JOm:()=>Si,JVY:()=>RE,JZr:()=>pt,KtG:()=>wc,L6k:()=>DT,LAX:()=>bT,LFG:()=>dn,Lbi:()=>x_,Lck:()=>q0,MGl:()=>og,MMx:()=>Ig,MR2:()=>BE,NdJ:()=>E0,Ojb:()=>tR,OlP:()=>Xt,Oqu:()=>N0,P3R:()=>VE,PXZ:()=>HC,Q6J:()=>Lh,QGY:()=>w0,QbO:()=>YT,Qsj:()=>sI,R0b:()=>di,RDi:()=>_T,Rgc:()=>Sg,SBq:()=>Jc,Sil:()=>tM,Suo:()=>hw,TTD:()=>al,TgZ:()=>Vh,Tol:()=>yD,Udp:()=>jh,X6Q:()=>hi,XFs:()=>gt,Xpm:()=>Xs,Xts:()=>Ap,Y36:()=>Nh,YKP:()=>Wy,YNc:()=>wy,Yjl:()=>to,Yz7:()=>Rt,Z0I:()=>_r,ZZ4:()=>Av,_Bn:()=>Jh,_UZ:()=>rg,_Vd:()=>Ch,_c5:()=>zl,_uU:()=>Ay,aQg:()=>Mv,c2e:()=>Dw,cJS:()=>Jt,cg1:()=>od,d8E:()=>x0,dDg:()=>$C,dqk:()=>tt,eBb:()=>CT,eFA:()=>qC,eJc:()=>pn,ekj:()=>mD,eoX:()=>vv,f3M:()=>kt,g9A:()=>KE,h0i:()=>Ul,hGG:()=>ib,hij:()=>My,iGM:()=>dw,ifc:()=>X,ip1:()=>eM,jDz:()=>K0,kL8:()=>Ry,lG2:()=>Pf,lcZ:()=>wC,lqb:()=>Kc,lri:()=>jC,mCW:()=>Bm,n5z:()=>Tr,oAB:()=>eo,oJD:()=>PE,oxw:()=>sD,pB0:()=>TT,q3G:()=>Sr,q4F:()=>j_,qFp:()=>Bw,qLn:()=>Vu,qOj:()=>LI,qZA:()=>Uh,qzn:()=>_h,rWj:()=>$l,sBO:()=>Iv,s_b:()=>Ng,soG:()=>Zu,tb:()=>_v,tp0:()=>Fr,uIk:()=>BI,vHH:()=>ue,vpe:()=>da,wAp:()=>Mt,xp6:()=>kp,ynx:()=>ig,z2F:()=>ff,z3N:()=>na,zSh:()=>Mp,zs3:()=>kl});var d=F(7579),K=F(727),P=F(9751),ie=F(6451),se=F(3099);function ne(s){for(let o in s)if(s[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function De(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(De).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ne({__forward_ref__:ne});function j(s){return s.__forward_ref__=j,s.toString=function(){return De(this())},s}function W(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===j}function Te(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class ue extends Error{constructor(o,a){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new ue(-201,!1)}function ke(s,o){null==s&&function Ze(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Rt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function mn(s){return Br(s,Sn)||Br(s,Ys)}function _r(s){return null!==mn(s)}function Br(s,o){return s.hasOwnProperty(o)?s[o]:null}function Pi(s){return s&&(s.hasOwnProperty(Ks)||s.hasOwnProperty(Qu))?s[Ks]:null}const Sn=ne({\u0275prov:ne}),Ks=ne({\u0275inj:ne}),Ys=ne({ngInjectableDef:ne}),Qu=ne({ngInjectorDef:ne});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let gi;function lr(s){const o=gi;return gi=s,o}function nn(s,o,a){const c=mn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&gt.Optional?null:void 0!==o?o:void Ne(De(s))}const tt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Bn="__NG_DI_FLAG__",As="ngTempTokenPath",ki=/\n/gm,Js="__source";let Fi;function jn(s){const o=Fi;return Fi=s,o}function Ms(s,o=gt.Default){if(void 0===Fi)throw new ue(-203,!1);return null===Fi?nn(s,void 0,o):Fi.get(s,o&gt.Optional?null:void 0,o)}function dn(s,o=gt.Default){return(function Qs(){return gi}()||Ms)(W(s),o)}function kt(s,o=gt.Default){return dn(s,yi(o))}function yi(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Hn(s){const o=[];for(let a=0;a<s.length;a++){const c=W(s[a]);if(Array.isArray(c)){if(0===c.length)throw new ue(900,!1);let h,p=gt.Default;for(let y=0;y<c.length;y++){const E=c[y],C=Li(E);"number"==typeof C?-1===C?h=E.token:p|=C:h=E}o.push(dn(h,p))}else o.push(dn(c))}return o}function vi(s,o){return s[Bn]=o,s.prototype[Bn]=o,s}function Li(s){return s[Bn]}function q(s){return{toString:s}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),X=(()=>{return(s=X||(X={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",X;var s})();const Qe={},Ye=[],Wt=ne({\u0275cmp:ne}),Jn=ne({\u0275dir:ne}),kn=ne({\u0275pipe:ne}),Gn=ne({\u0275mod:ne}),Vt=ne({\u0275fac:ne}),Xn=ne({__NG_ELEMENT_ID__:ne}),Xi=ne({__NG_ENV_ID__:ne});function ds(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}a=h+1}}function bo(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const p=a[c++],y=a[c++],E=a[c++];s.setAttribute(o,y,E,p)}else{const p=h,y=a[++c];ee(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function de(s){return 3===s||4===s||6===s}function ee(s){return 64===s.charCodeAt(0)}function Re(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||ft(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function ft(s,o,a,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}const bt="ng-template";function $t(s,o,a){let c=0,h=!0;for(;c<s.length;){let p=s[c++];if("string"==typeof p&&h){const y=s[c++];if(a&&"class"===p&&-1!==ds(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<s.length&&"string"==typeof(p=s[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function rn(s){return 4===s.type&&s.value!==bt}function cr(s,o,a){return o===(4!==s.type||a?s.value:bt)}function er(s,o,a){let c=4;const h=s.attrs||[],p=function Xl(s){for(let o=0;o<s.length;o++)if(de(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!cr(s,C,a)||""===C&&1===o.length){if(tr(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!$t(s.attrs,A,a)){if(tr(c))return!1;y=!0}continue}const k=va(8&c?"class":C,h,rn(s),a);if(-1===k){if(tr(c))return!1;y=!0;continue}if(""!==A){let G;G=k>p?"":h[k+1].toLowerCase();const Q=8&c?G:null;if(Q&&-1!==ds(Q,A,0)||2&c&&A!==G){if(tr(c))return!1;y=!0}}}}else{if(!y&&!tr(c)&&!tr(C))return!1;if(y&&tr(C))continue;y=!1,c=C|1&c}}return tr(c)||y}function tr(s){return 0==(1&s)}function va(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function kd(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function _a(s,o,a=!1){for(let c=0;c<o.length;c++)if(er(s,o[c],a))return!0;return!1}function Ju(s,o){return s?":not("+o.trim()+")":o}function wa(s){let o=s[0],a=1,c=2,h="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const E=s[++a];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!tr(y)&&(o+=Ju(p,h),h=""),c=y,p=p||!tr(c);a++}return""!==h&&(o+=Ju(p,h)),o}function Xs(s){return q(()=>{const o=el(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||X.Emulated,styles:s.styles||Ye,_:null,schemas:s.schemas||null,tView:null,id:""};Er(a);const c=s.dependencies;return a.directiveDefs=Ea(c,!1),a.pipeDefs=Ea(c,!0),a.id=function au(s){let o=0;const a=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of a)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Of(s){return sn(s)||Fn(s)}function Xu(s){return null!==s}function eo(s){return q(()=>({type:s.type,bootstrap:s.bootstrap||Ye,declarations:s.declarations||Ye,imports:s.imports||Ye,exports:s.exports||Ye,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ec(s,o){if(null==s)return Qe;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=c,o&&(o[h]=p)}return a}function Pf(s){return q(()=>{const o=el(s);return Er(o),o})}function to(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function sn(s){return s[Wt]||null}function Fn(s){return s[Jn]||null}function $r(s){return s[kn]||null}function To(s){const o=sn(s)||Fn(s)||$r(s);return null!==o&&o.standalone}function In(s,o){const a=s[Gn]||null;if(!a&&!0===o)throw new Error(`Type ${De(s)} does not have '\u0275mod' property.`);return a}function el(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ye,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ec(s.inputs,o),outputs:ec(s.outputs)}}function Er(s){s.features?.forEach(o=>o(s))}function Ea(s,o){if(!s)return null;const a=o?$r:Of;return()=>("function"==typeof s?s():s).map(c=>a(c)).filter(Xu)}const qn=0,Xe=1,Nt=2,Dn=3,_i=4,ts=5,Nr=6,no=7,Cn=8,So=9,Ia=10,Pt=11,ro=12,wi=13,io=14,Wn=15,ei=16,Da=17,ti=18,Ao=19,tc=20,Mo=21,Vi=22,uu=23,nl=24,Ht=25,Vd=1,lu=2,Ei=7,Ud=8,No=9,Ln=11;function ni(s){return Array.isArray(s)&&"object"==typeof s[Vd]}function xr(s){return Array.isArray(s)&&!0===s[Vd]}function rl(s){return 0!=(4&s.flags)}function xo(s){return s.componentOffset>-1}function Bi(s){return 1==(1&s.flags)}function hs(s){return!!s.template}function Ca(s){return 0!=(512&s[Nt])}function ps(s,o){return s.hasOwnProperty(Vt)?s[Vt]:null}let Lf=tt.WeakRef??class fm{constructor(o){this.ref=o}deref(){return this.ref}},sl=0,ii=null,fu=!1;function An(s){const o=ii;return ii=s,o}class Vf{constructor(){this.id=sl++,this.ref=function Oo(s){return new Lf(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=fu;fu=!0;try{for(const[a,c]of this.consumers){const h=c.consumerNode.deref();void 0!==h&&h.trackingVersion===c.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),h?.producers.delete(this.id))}}finally{fu=o}}producerAccessed(){if(fu)throw new Error("");if(null===ii)return;let o=ii.producers.get(this.id);void 0===o?(o={consumerNode:ii.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ii.trackingVersion},ii.producers.set(this.id,o),this.consumers.set(ii.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=ii.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ii?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let mu=null;const Uf=()=>{};class Rr extends Vf{constructor(o,a,c){super(),this.watch=o,this.schedule=a,this.dirty=!1,this.cleanupFn=Uf,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=An(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Uf,this.watch(this.registerOnCleanup)}finally{An(o)}}cleanup(){this.cleanupFn()}}class qd{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function al(){return hc}function hc(s){return s.type.prototype.ngOnChanges&&(s.setInput=fc),Wd}function Wd(){const s=_u(this),o=s?.current;if(o){const a=s.previous;if(a===Qe)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function fc(s,o,a,c){const h=this.declaredInputs[a],p=_u(s)||function gc(s,o){return s[pc]=o}(s,{previous:Qe,current:null}),y=p.current||(p.current={}),E=p.previous,C=E[h];y[h]=new qd(C&&C.currentValue,o,E===Qe),s[c]=o}al.ngInherit=!0;const pc="__ngSimpleChanges__";function _u(s){return s[pc]||null}const ji=function(s,o,a){};function wn(s){for(;Array.isArray(s);)s=s[qn];return s}function ul(s,o){return wn(o[s])}function Ir(s,o){return wn(o[s.index])}function oo(s,o){return s.data[o]}function Hr(s,o){const a=o[s];return ni(a)?a:a[qn]}function Eu(s){return 128==(128&s[Nt])}function $i(s,o){return null==o?null:s[o]}function $f(s){s[Da]=0}function yc(s){1024&s[Nt]||(s[Nt]|=1024,Yd(s,1))}function vc(s){1024&s[Nt]&&(s[Nt]&=-1025,Yd(s,-1))}function Yd(s,o){let a=s[Dn];if(null===a)return;a[ts]+=o;let c=a;for(a=a[Dn];null!==a&&(1===o&&1===c[ts]||-1===o&&0===c[ts]);)a[ts]+=o,c=a,a=a[Dn]}const Tt={lFrame:Du(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function dl(){return Tt.bindingsEnabled}function be(){return Tt.lFrame.lView}function Qt(){return Tt.lFrame.tView}function ko(s){return Tt.lFrame.contextLView=s,s[Cn]}function wc(s){return Tt.lFrame.contextLView=null,s}function Or(){let s=hl();for(;null!==s&&64===s.type;)s=s.parent;return s}function hl(){return Tt.lFrame.currentTNode}function ns(s,o){const a=Tt.lFrame;a.currentTNode=s,a.isParent=o}function Rs(){return Tt.lFrame.isParent}function Xd(){Tt.lFrame.isParent=!1}function Vo(){return Tt.lFrame.bindingIndex++}function gs(s){const o=Tt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Ec(s,o){const a=Tt.lFrame;a.bindingIndex=a.bindingRootIndex=s,gl(o)}function gl(s){Tt.lFrame.currentDirectiveIndex=s}function Dr(s){const o=Tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function xa(){return Tt.lFrame.currentQueryIndex}function Ra(s){Tt.lFrame.currentQueryIndex=s}function Oa(s){const o=s[Xe];return 2===o.type?o.declTNode:1===o.type?s[Nr]:null}function ml(s,o,a){if(a&gt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||a&gt.Host||(h=Oa(p),null===h||(p=p[io],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Tt.lFrame=Dc();return c.currentTNode=o,c.lView=s,!0}function Ic(s){const o=Dc(),a=s[Xe];Tt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Dc(){const s=Tt.lFrame,o=null===s?null:s.child;return null===o?Du(s):o}function Du(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Cu(){const s=Tt.lFrame;return Tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bu=Cu;function Hi(){const s=Cu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Cr(){return Tt.lFrame.selectedIndex}function Uo(s){Tt.lFrame.selectedIndex=s}function hn(){const s=Tt.lFrame;return oo(s.tView,s.selectedIndex)}let Pa=!0;function yl(){return Pa}function Os(s){Pa=s}function Bo(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:R}=p;y&&(s.contentHooks??=[]).push(-a,y),E&&((s.contentHooks??=[]).push(a,E),(s.contentCheckHooks??=[]).push(a,E)),C&&(s.viewHooks??=[]).push(-a,C),A&&((s.viewHooks??=[]).push(a,A),(s.viewCheckHooks??=[]).push(a,A)),null!=R&&(s.destroyHooks??=[]).push(a,R)}}function vl(s,o,a){Cc(s,o,3,a)}function jo(s,o,a,c){(3&s[Nt])===a&&Cc(s,o,a,c)}function _l(s,o){let a=s[Nt];(3&a)===o&&(a&=4095,a+=1,s[Nt]=a)}function Cc(s,o,a,c){const p=c??-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[Da]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[Da]+=65536),(E<p||-1==p)&&(bc(s,a,o,C),s[Da]=(4294901760&s[Da])+C+2),C++}function Jf(s,o){ji(4,s,o);const a=An(null);try{o.call(s)}finally{An(a),ji(5,s,o)}}function bc(s,o,a,c){const h=a[c]<0,p=a[c+1],E=s[h?-a[c]:a[c]];h?s[Nt]>>12<s[Da]>>16&&(3&s[Nt])===o&&(s[Nt]+=4096,Jf(E,p)):Jf(E,p)}const Tu=-1;class ka{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Zn(s){return s!==Tu}function Pr(s){return 32767&s}function Fa(s,o){let a=function Sc(s){return s>>16}(s),c=o;for(;a>0;)c=c[io],a--;return c}let Ps=!0;function ms(s){const o=Ps;return Ps=s,o}const Ac=255,Ho=5;let Ut=0;const Ci={};function si(s,o){const a=br(s,o);if(-1!==a)return a;const c=o[Xe];c.firstCreatePass&&(s.injectorIndex=o.length,La(c.data,s),La(o,null),La(c.blueprint,null));const h=Nc(s,o),p=s.injectorIndex;if(Zn(h)){const y=Pr(h),E=Fa(h,o),C=E[Xe].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|C[y+A]}return o[p+8]=h,p}function La(s,o){s.push(0,0,0,0,0,0,0,0,o)}function br(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Nc(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Kn(h),null===c)return Tu;if(a++,h=h[io],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Tu}function Go(s,o,a){!function Mc(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Xn)&&(c=a[Xn]),null==c&&(c=a[Xn]=Ut++);const h=c&Ac;o.data[s+(h>>Ho)]|=1<<h}(s,o,a)}function Su(s,o,a){if(a&gt.Optional||void 0!==s)return s;Ne()}function wl(s,o,a,c){if(a&gt.Optional&&void 0===c&&(c=null),!(a&(gt.Self|gt.Host))){const h=s[So],p=lr(void 0);try{return h?h.get(o,c,a&gt.Optional):nn(o,c,a&gt.Optional)}finally{lr(p)}}return Su(c,0,a)}function zo(s,o,a,c=gt.Default,h){if(null!==s){if(2048&o[Nt]&&!(c&gt.Self)){const y=function rh(s,o,a,c,h){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[Nt]&&!(512&y[Nt]);){const E=ks(p,y,a,c|gt.Self,Ci);if(E!==Ci)return E;let C=p.parent;if(!C){const A=y[tc];if(A){const R=A.get(a,Ci,c);if(R!==Ci)return R}C=Kn(y),y=y[io]}p=C}return h}(s,o,a,c,Ci);if(y!==Ci)return y}const p=ks(s,o,a,c,Ci);if(p!==Ci)return p}return wl(o,a,c,h)}function ks(s,o,a,c,h){const p=function xc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Xn)?s[Xn]:void 0;return"number"==typeof o?o>=0?o&Ac:nh:o}(a);if("function"==typeof p){if(!ml(o,s,c))return c&gt.Host?Su(h,0,c):wl(o,a,c,h);try{const y=p(c);if(null!=y||c&gt.Optional)return y;Ne()}finally{bu()}}else if("number"==typeof p){let y=null,E=br(s,o),C=Tu,A=c&gt.Host?o[Wn][Nr]:null;for((-1===E||c&gt.SkipSelf)&&(C=-1===E?Nc(s,o):o[E+8],C!==Tu&&Au(c,!1)?(y=o[Xe],E=Pr(C),o=Fa(C,o)):E=-1);-1!==E;){const R=o[Xe];if(Rc(p,E,R.data)){const k=_m(E,o,a,y,c,A);if(k!==Ci)return k}C=o[E+8],C!==Tu&&Au(c,o[Xe].data[E+8]===A)&&Rc(p,E,o)?(y=R,E=Pr(C),o=Fa(C,o)):E=-1}}return h}function _m(s,o,a,c,h,p){const y=o[Xe],E=y.data[s+8],R=co(E,y,a,null==c?xo(E)&&Ps:c!=y&&0!=(3&E.type),h&gt.Host&&p===E);return null!==R?is(o,y,R,E):Ci}function co(s,o,a,c,h){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,R=p>>20,G=h?E+R:s.directiveEnd;for(let Q=c?E:E+R;Q<G;Q++){const fe=y[Q];if(Q<C&&a===fe||Q>=C&&fe.type===a)return Q}if(h){const Q=y[C];if(Q&&hs(Q)&&Q.type===a)return C}return null}function is(s,o,a,c){let h=s[a];const p=o.data;if(function ym(s){return s instanceof ka}(h)){const y=h;y.resolving&&function Pe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ue(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(p[a]));const E=ms(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?lr(y.injectImpl):null;ml(s,c,gt.Default);try{h=s[a]=y.factory(void 0,p,s,c),o.firstCreatePass&&a>=c.directiveStart&&function mm(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=hc(o);(a.preOrderHooks??=[]).push(s,y),(a.preOrderCheckHooks??=[]).push(s,y)}h&&(a.preOrderHooks??=[]).push(0-s,h),p&&((a.preOrderHooks??=[]).push(s,p),(a.preOrderCheckHooks??=[]).push(s,p))}(a,p[a],o)}finally{null!==C&&lr(C),ms(E),y.resolving=!1,bu()}}return h}function Rc(s,o,a){return!!(a[o+(s>>Ho)]&1<<s)}function Au(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Gr{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return zo(this._tNode,this._lView,o,yi(c),a)}}function nh(){return new Gr(Or(),be())}function Tr(s){return q(()=>{const o=s.prototype.constructor,a=o[Vt]||Va(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Vt]||Va(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Va(s){return Be(s)?()=>{const o=Va(W(s));return o&&o()}:ps(s)}function Kn(s){const o=s[Xe],a=o.type;return 2===a?o.declTNode:1===a?s[Nr]:null}function ho(s){return function vm(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const p=a[h];if(de(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(Or(),s)}const hr="__parameters__";function Ba(s,o,a){return q(()=>{const c=function Ua(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(C,A,R){const k=C.hasOwnProperty(hr)?C[hr]:Object.defineProperty(C,hr,{value:[]})[hr];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(y),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function zr(s,o){s.forEach(a=>Array.isArray(a)?zr(a,o):o(a))}function Pc(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ja(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function qr(s,o,a){let c=Wo(s,o);return c>=0?s[1|c]=a:(c=~c,function tp(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function kc(s,o){const a=Wo(s,o);if(a>=0)return s[1|a]}function Wo(s,o){return function I(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<a];if(o===y)return p<<a;y>o?h=p:c=p+1}return~(h<<a)}(s,o,1)}const Ct=vi(Ba("Optional"),8),Fr=vi(Ba("SkipSelf"),4);function bl(s){return 128==(128&s.flags)}var Si=(()=>((Si=Si||{})[Si.Important=1]="Important",Si[Si.DashCase=2]="DashCase",Si))();const jc=/^>|^->|<!--|-->|--!>|<!-$/g,lp=/(<|>)/,lh="\u200b$1\u200b";const cp=new Map;let d_=0;const xm="__ngContext__";function oi(s,o){ni(o)?(s[xm]=o[Ao],function h_(s){cp.set(s[Ao],s)}(o)):s[xm]=o}let hh;function Sl(s,o){return hh(s,o)}function Jo(s){const o=s[Dn];return xr(o)?o[Dn]:o}function Gc(s){return pp(s[ro])}function Is(s){return pp(s[_i])}function pp(s){for(;null!==s&&!xr(s);)s=s[_i];return s}function Xo(s,o,a,c,h){if(null!=c){let p,y=!1;xr(c)?p=c:ni(c)&&(y=!0,c=c[qn]);const E=wn(c);0===s&&null!==a?null==h?m(o,a,E):f(o,a,E,h||null,!0):1===s&&null!==a?f(o,a,E,h||null,!0):2===s?function Zc(s,o,a){const c=U(s,o);c&&function S(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function Vm(s,o,a,c,h){const p=a[Ei];p!==wn(a)&&Xo(o,s,c,p,h);for(let E=Ln;E<a.length;E++){const C=a[E];Ml(C[Xe],C,s,o,c,p)}}(o,s,p,a,h)}}function Ha(s,o){return s.createComment(function Am(s){return s.replace(jc,o=>o.replace(lp,lh))}(o))}function Wr(s,o,a){return s.createElement(o,a)}function gh(s,o){const a=s[No],c=a.indexOf(o);vc(o),a.splice(c,1)}function yp(s,o){if(s.length<=Ln)return;const a=Ln+o,c=s[a];if(c){const h=c[ei];null!==h&&h!==s&&gh(h,c),o>0&&(s[a-1][_i]=c[_i]);const p=ja(s,Ln+o);!function gp(s,o){Ml(s,o,o[Pt],2,null,null),o[qn]=null,o[Nr]=null}(c[Xe],c);const y=p[ti];null!==y&&y.detachView(p[Xe]),c[Dn]=null,c[_i]=null,c[Nt]&=-129}return c}function vp(s,o){if(!(256&o[Nt])){const a=o[Pt];o[uu]?.destroy(),o[nl]?.destroy(),a.destroyNode&&Ml(s,o,a,3,null,null),function go(s){let o=s[ro];if(!o)return Fm(s[Xe],s);for(;o;){let a=null;if(ni(o))a=o[ro];else{const c=o[Ln];c&&(a=c)}if(!a){for(;o&&!o[_i]&&o!==s;)ni(o)&&Fm(o[Xe],o),o=o[Dn];null===o&&(o=s),ni(o)&&Fm(o[Xe],o),a=o&&o[_i]}o=a}}(o)}}function Fm(s,o){if(!(256&o[Nt])){o[Nt]&=-129,o[Nt]|=256,function AE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof ka)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],C=p[y+1];ji(4,E,C);try{C.call(E)}finally{ji(5,E,C)}}else{ji(4,h,p);try{p.call(h)}finally{ji(5,h,p)}}}}}(s,o),function SE(s,o){const a=s.cleanup,c=o[no];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else a[p].call(c[a[p+1]]);null!==c&&(o[no]=null);const h=o[Mo];if(null!==h){o[Mo]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[Xe].type&&o[Pt].destroy();const a=o[ei];if(null!==a&&xr(o[Dn])){a!==o[Dn]&&gh(a,o);const c=o[ti];null!==c&&c.detachView(s)}!function f_(s){cp.delete(s[Ao])}(o)}}function _p(s,o,a){return function v(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[qn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===X.None||p===X.Emulated)return null}return Ir(c,a)}}(s,o.parent,a)}function f(s,o,a,c,h){s.insertBefore(o,a,c,h)}function m(s,o,a){s.appendChild(o,a)}function w(s,o,a,c,h){null!==c?f(s,o,a,c,h):m(s,o,a)}function U(s,o){return s.parentNode(o)}let it,Ep,y_,Um,ot=function He(s,o,a){return 40&s.type?Ir(s,a):null};function zi(s,o,a,c){const h=_p(s,c,o),p=o[Pt],E=function Me(s,o,a){return ot(s,o,a)}(c.parent||o[Nr],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)w(p,h,a[C],E,!1);else w(p,h,a,E,!1);void 0!==it&&it(p,c,o,a,h)}function ss(s,o){if(null!==o){const a=o.type;if(3&a)return Ir(o,s);if(4&a)return Wc(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return ss(s,c);{const h=s[o.index];return xr(h)?Wc(-1,h):wn(h)}}if(32&a)return Sl(o,s)()||wn(s[o.index]);{const c=Pu(s,o);return null!==c?Array.isArray(c)?c[0]:ss(Jo(s[Wn]),c):ss(s,o.next)}}return null}function Pu(s,o){return null!==o?s[Wn][Nr].projection[o.projection]:null}function Wc(s,o){const a=Ln+s+1;if(a<o.length){const c=o[a],h=c[Xe].firstChild;if(null!==h)return ss(c,h)}return o[Ei]}function ea(s,o,a,c,h,p,y){for(;null!=a;){const E=c[a.index],C=a.type;if(y&&0===o&&(E&&oi(wn(E),c),a.flags|=2),32!=(32&a.flags))if(8&C)ea(s,o,a.child,c,h,p,!1),Xo(o,s,h,E,p);else if(32&C){const A=Sl(a,c);let R;for(;R=A();)Xo(o,s,h,R,p);Xo(o,s,h,E,p)}else 16&C?mh(s,o,c,a,h,p):Xo(o,s,h,E,p);a=y?a.projectionNext:a.next}}function Ml(s,o,a,c,h,p){ea(a,c,s.firstChild,o,h,p,!1)}function mh(s,o,a,c,h,p){const y=a[Wn],C=y[Nr].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Xo(o,s,h,C[A],p);else{let A=C;const R=y[Dn];bl(c)&&(A.flags|=128),ea(s,o,A,R,h,p,!0)}}function m_(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function ME(s,o,a){const{mergedAttrs:c,classes:h,styles:p}=a;null!==c&&bo(s,o,c),null!==h&&m_(s,o,h),null!==p&&function wp(s,o,a){s.setAttribute(o,"style",a)}(s,o,p)}function ta(s){return function yh(){if(void 0===Ep&&(Ep=null,tt.trustedTypes))try{Ep=tt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ep}()?.createHTML(s)||s}function _T(s){y_=s}function Ip(){if(void 0!==y_)return y_;if(typeof document<"u")return document;throw new ue(210,!1)}function v_(){if(void 0===Um&&(Um=null,tt.trustedTypes))try{Um=tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Um}function __(s){return v_()?.createHTML(s)||s}function Dp(s){return v_()?.createScriptURL(s)||s}class Nl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}class vh extends Nl{getTypeName(){return"HTML"}}class xE extends Nl{getTypeName(){return"Style"}}class wT extends Nl{getTypeName(){return"Script"}}class ET extends Nl{getTypeName(){return"URL"}}class IT extends Nl{getTypeName(){return"ResourceURL"}}function na(s){return s instanceof Nl?s.changingThisBreaksApplicationSecurity:s}function _h(s,o){const a=function w_(s){return s instanceof Nl&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${pt})`)}return a===o}function RE(s){return new vh(s)}function DT(s){return new xE(s)}function CT(s){return new wT(s)}function bT(s){return new ET(s)}function TT(s){return new IT(s)}class ST{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(ta(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class AT{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=ta(o),a}}const NT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bm(s){return(s=String(s)).match(NT)?s:"unsafe:"+s}function Fu(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function wh(...s){const o={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const xT=Fu("area,br,col,hr,img,wbr"),E_=Fu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I_=Fu("rp,rt"),D_=wh(xT,wh(E_,Fu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wh(I_,Fu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wh(I_,E_)),C_=Fu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jm=wh(C_,Fu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Eh=Fu("script,style,template");class b_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!D_.hasOwnProperty(a))return this.sanitizedSomething=!0,!Eh.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),y=p.name,E=y.toLowerCase();if(!jm.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=p.value;C_[E]&&(C=Bm(C)),this.buf.push(" ",y,'="',bp(C),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();D_.hasOwnProperty(a)&&!xT.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(bp(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const OT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OE=/([^\#-~ |!])/g;function bp(s){return s.replace(/&/g,"&amp;").replace(OT,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(OE,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tp;function T_(s,o){let a=null;try{Tp=Tp||function Cp(s){const o=new AT(s);return function MT(){try{return!!(new window.DOMParser).parseFromString(ta(""),"text/html")}catch{return!1}}()?new ST(o):o}(s);let c=o?String(o):"";a=Tp.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=a.innerHTML,a=Tp.getInertBodyElement(c)}while(c!==p);return ta((new b_).sanitizeChildren(S_(a)||a))}finally{if(a){const c=S_(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function S_(s){return"content"in s&&function PT(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Sr=(()=>((Sr=Sr||{})[Sr.NONE=0]="NONE",Sr[Sr.HTML=1]="HTML",Sr[Sr.STYLE=2]="STYLE",Sr[Sr.SCRIPT=3]="SCRIPT",Sr[Sr.URL=4]="URL",Sr[Sr.RESOURCE_URL=5]="RESOURCE_URL",Sr))();function PE(s){const o=Sp();return o?__(o.sanitize(Sr.HTML,s)||""):_h(s,"HTML")?__(na(s)):T_(Ip(),Oe(s))}function kE(s){const o=Sp();return o?o.sanitize(Sr.URL,s)||"":_h(s,"URL")?na(s):Bm(Oe(s))}function FE(s){const o=Sp();if(o)return Dp(o.sanitize(Sr.RESOURCE_URL,s)||"");if(_h(s,"ResourceURL"))return Dp(na(s));throw new ue(904,!1)}function VE(s,o,a){return function FT(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?FE:kE}(o,a)(s)}function Sp(){const s=be();return s&&s[Ia].sanitizer}class Xt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Rt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ap=new Xt("ENVIRONMENT_INITIALIZER"),UE=new Xt("INJECTOR",-1),A_=new Xt("INJECTOR_DEF_TYPES");class LT{get(o,a=jr){if(a===jr){const c=new Error(`NullInjectorError: No provider for ${De(o)}!`);throw c.name="NullInjectorError",c}return a}}function BE(s){return{\u0275providers:s}}function VT(...s){return{\u0275providers:Hm(0,s),\u0275fromNgModule:!0}}function Hm(s,...o){const a=[],c=new Set;let h;return zr(o,p=>{const y=p;jE(y,a,[],c)&&(h||=[],h.push(y))}),void 0!==h&&M_(h,a),a}function M_(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];ra(h,p=>{o.push(p)})}}function jE(s,o,a,c){if(!(s=W(s)))return!1;let h=null,p=Pi(s);const y=!p&&sn(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(p=Pi(C),!p)return!1;h=C}const E=c.has(h);if(y){if(E)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)jE(A,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(h);try{zr(p.imports,R=>{jE(R,o,a,c)&&(A||=[],A.push(R))})}finally{}void 0!==A&&M_(A,o)}if(!E){const A=ps(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Ye},{provide:A_,useValue:h,multi:!0},{provide:Ap,useValue:()=>dn(h),multi:!0})}const C=p.providers;null==C||E||ra(C,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}function ra(s,o){for(let a of s)Te(a)&&(a=a.\u0275providers),Array.isArray(a)?ra(a,o):o(a)}const BT=ne({provide:String,useValue:ne});function $E(s){return null!==s&&"object"==typeof s&&BT in s}function xl(s){return"function"==typeof s}const Mp=new Xt("Set Injector scope."),Gm={},HT={};let GE;function Np(){return void 0===GE&&(GE=new LT),GE}class Kc{}class zE extends Kc{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,N_(o,y=>this.processProvider(y)),this.records.set(UE,Yc(void 0,this)),h.has("environment")&&this.records.set(Kc,Yc(void 0,this));const p=this.records.get(Mp);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(A_.multi,Ye,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=jn(this),c=lr(void 0);try{return o()}finally{jn(a),lr(c)}}get(o,a=jr,c=gt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Xi))return o[Xi](this);c=yi(c);const h=jn(this),p=lr(void 0);try{if(!(c&gt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function WE(s){return"function"==typeof s||"object"==typeof s&&s instanceof Xt}(o)&&mn(o);E=C&&this.injectableDefInScope(C)?Yc(qE(o),Gm):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&gt.Self?Np():this.parent).get(o,a=c&gt.Optional&&a===jr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[As]=y[As]||[]).unshift(De(o)),h)throw y;return function B(s,o,a,c){const h=s[As];throw o[Js]&&h.unshift(o[Js]),s.message=function V(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=De(o);if(Array.isArray(o))h=o.map(De).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):De(E)))}h=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(ki,"\n  ")}`}("\n"+s.message,h,a,c),s.ngTokenPath=h,s[As]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{lr(p),jn(h)}}resolveInjectorInitializers(){const o=jn(this),a=lr(void 0);try{const c=this.get(Ap.multi,Ye,gt.Self);for(const h of c)h()}finally{jn(o),lr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(De(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(o){let a=xl(o=W(o))?o:W(o&&o.provide);const c=function GT(s){return $E(s)?Yc(void 0,s.useValue):Yc(zT(s),Gm)}(o);if(xl(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Yc(void 0,Gm,!0),h.factory=()=>Hn(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Gm&&(a.value=HT,a.value=a.factory()),"object"==typeof a.value&&a.value&&function WT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function qE(s){const o=mn(s),a=null!==o?o.factory:ps(s);if(null!==a)return a;if(s instanceof Xt)throw new ue(204,!1);if(s instanceof Function)return function eR(s){const o=s.length;if(o>0)throw function fr(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new ue(204,!1);const a=function wr(s){return s&&(s[Sn]||s[Ys])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ue(204,!1)}function zT(s,o,a){let c;if(xl(s)){const h=W(s);return ps(h)||qE(h)}if($E(s))c=()=>W(s.useValue);else if(function $T(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Hn(s.deps||[]));else if(function jT(s){return!(!s||!s.useExisting)}(s))c=()=>dn(W(s.useExisting));else{const h=W(s&&(s.useClass||s.provide));if(!function qT(s){return!!s.deps}(s))return ps(h)||qE(h);c=()=>new h(...Hn(s.deps))}return c}function Yc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function N_(s,o){for(const a of s)Array.isArray(a)?N_(a,o):a&&Te(a)?N_(a.\u0275providers,o):o(a)}const ZE=new Xt("AppId",{providedIn:"root",factory:()=>ZT}),ZT="ng",KE=new Xt("Platform Initializer"),x_=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),YT=new Xt("AnimationModuleType"),tR=new Xt("CSP nonce",{providedIn:"root",factory:()=>Ip().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let QE=(s,o)=>null;function k_(s,o){return QE(s,o)}class XT{}class V_{}class U_{resolveComponentFactory(o){throw function rI(s){const o=Error(`No component factory found for ${De(s)}.`);return o.ngComponent=s,o}(o)}}let Ch=(()=>{class s{}return s.NULL=new U_,s})();function iI(){return Qc(Or(),be())}function Qc(s,o){return new Jc(Ir(s,o))}let Jc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=iI,s})();function Ym(s){return s instanceof Jc?s.nativeElement:s}class B_{}let sI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function oI(){const s=be(),a=Hr(Or().index,s);return(ni(a)?a:s)[Pt]}(),s})(),as=(()=>{class s{}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:()=>null}),s})();class Lu{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const j_=new Lu("16.0.3"),aI={};function Qm(s){for(;s;){s[Nt]|=64;const o=Jo(s);if(Ca(s)&&!o)return s;s=o}return null}function Op(s){return s.ngOriginalError}class Vu{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Op(o);for(;a&&Op(a);)a=Op(a);return a||null}}const uI=new Xt("",{providedIn:"root",factory:()=>!1});function qa(s){return s instanceof Function?s():s}class cI extends Vf{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){Qm(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,a,c){const h=An(this);this.trackingVersion++;try{o(a,c)}finally{An(h)}}destroy(){this.trackingVersion++}}let Sh=null;function dI(){return Sh??=new cI,Sh}function Pp(s,o){return s[o]??dI()}function H_(s,o){const a=dI();a.hasReadASignal&&(s[o]=Sh,a.lView=s,Sh=new cI)}const zt={};function kp(s){Pl(Qt(),be(),Cr()+s,!1)}function Pl(s,o,a,c){if(!c)if(3==(3&o[Nt])){const p=s.preOrderCheckHooks;null!==p&&vl(o,p,a)}else{const p=s.preOrderHooks;null!==p&&jo(o,p,0,a)}Uo(a)}function iy(s,o=null,a=null,c){const h=Fp(s,o,a,c);return h.resolveInjectorInitializers(),h}function Fp(s,o=null,a=null,c,h=new Set){const p=[a||Ye,VT(s)];return c=c||("object"==typeof s?void 0:De(s)),new zE(p,o||Np(),c||null,h)}let kl=(()=>{class s{static create(a,c){if(Array.isArray(a))return iy({name:""},c,a,"");{const h=a.name??"";return iy({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=jr,s.NULL=new LT,s.\u0275prov=Rt({token:s,providedIn:"any",factory:()=>dn(UE)}),s.__NG_ELEMENT_ID__=-1,s})();function Nh(s,o=gt.Default){const a=be();return null===a?dn(s,o):zo(Or(),a,W(s),o)}function z_(){throw new Error("invalid")}function Lp(s,o,a,c,h,p,y,E,C,A,R){const k=o.blueprint.slice();return k[qn]=h,k[Nt]=140|c,(null!==A||s&&2048&s[Nt])&&(k[Nt]|=2048),$f(k),k[Dn]=k[io]=s,k[Cn]=a,k[Ia]=y||s&&s[Ia],k[Pt]=E||s&&s[Pt],k[So]=C||s&&s[So]||null,k[Nr]=p,k[Ao]=function Mm(){return d_++}(),k[Vi]=R,k[tc]=A,k[Wn]=2==o.type?s[Wn]:k,k}function xh(s,o,a,c,h){let p=s.data[o];if(null===p)p=function hI(s,o,a,c,h){const p=hl(),y=Rs(),C=s.data[o]=function vI(s,o,a,c,h,p){let y=o?o.injectorIndex:-1,E=0;return function ao(){return null!==Tt.skipHydrationRootTNode}()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}(s,o,a,c,h),function Wf(){return Tt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=h;const y=function Fo(){const s=Tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ns(p,!0),p}function Vp(s,o,a,c){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function sy(s,o,a,c,h){const p=Pp(o,uu),y=Cr(),E=2&c;try{if(Uo(-1),E&&o.length>Ht&&Pl(s,o,Ht,!1),ji(E?2:0,h),E)p.runInContext(a,c,h);else{const A=An(null);try{a(c,h)}finally{An(A)}}}finally{E&&null===o[uu]&&H_(o,uu),Uo(y),ji(E?3:1,h)}}function fI(s,o,a){if(rl(o)){const c=An(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const E=s.data[y];E.contentQueries&&E.contentQueries(1,a[y],y)}}finally{An(c)}}}function pI(s,o,a){dl()&&(function EI(s,o,a,c){const h=a.directiveStart,p=a.directiveEnd;xo(a)&&function cS(s,o,a){const c=Ir(o,s),y=Rh(s,Lp(s,gI(a),null,a.onPush?64:16,c,o,null,s[Ia].rendererFactory.createRenderer(c,a),null,null,null));s[o.index]=y}(o,a,s.data[h+a.componentOffset]),s.firstCreatePass||si(a,o),oi(c,o);const y=a.initialInputs;for(let E=h;E<p;E++){const C=s.data[E],A=is(o,s,E,a);oi(A,o),null!==y&&dS(0,E-h,A,C,0,y),hs(C)&&(Hr(a.index,o)[Cn]=is(o,s,E,a))}}(s,o,a,Ir(a,o)),64==(64&a.flags)&&Wa(s,o,a))}function Up(s,o,a=Ir){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?a(o,s):s[y];s[h++]=E}}}function gI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=oy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function oy(s,o,a,c,h,p,y,E,C,A,R){const k=Ht+c,G=k+h,Q=function q_(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:zt);return a}(k,G),fe="function"==typeof A?A():A;return Q[Xe]={type:s,blueprint:Q,template:a,queries:null,viewQuery:E,declTNode:o,data:Q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:fe,incompleteFirstPass:!1,ssrId:R}}let mI=s=>null;function yo(s,o,a,c){for(let h in s)if(s.hasOwnProperty(h)){a=null===a?{}:a;const p=s[h];null===c?sS(a,o,h,p):c.hasOwnProperty(h)&&sS(a,o,c[h],p)}return a}function sS(s,o,a,c){s.hasOwnProperty(a)?s[a].push(o,c):s[a]=[o,c]}function vo(s,o,a,c,h,p,y,E){const C=Ir(o,a);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(uy(s,a,R,c,h),xo(o)&&function gR(s,o){const a=Hr(o,s);16&a[Nt]||(a[Nt]|=64)}(a,o.index)):3&o.type&&(c=function _I(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(C,c,h))}function Z_(s,o,a,c){if(dl()){const h=null===c?null:{"":-1},p=function Y_(s,o){const a=s.directiveRegistry;let c=null,h=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(_a(o,y.selectors,!1))if(c||(c=[]),hs(y))if(null!==y.findHostDirectiveDefs){const E=[];h=h||new Map,y.findHostDirectiveDefs(y,E,h),c.unshift(...E,y),Q_(s,o,E.length)}else c.unshift(y),Q_(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,a);let y,E;null===p?y=E=null:[y,E]=p,null!==y&&K_(s,o,a,y,h,E),h&&function yR(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new ue(-301,!1);c.push(o[h],p)}}}(a,c,h)}a.mergedAttrs=Re(a.mergedAttrs,a.attrs)}function K_(s,o,a,c,h,p){for(let A=0;A<c.length;A++)Go(si(a,o),s,c[A].type);!function lS(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,c.length);for(let A=0;A<c.length;A++){const R=c[A];R.providersResolver&&R.providersResolver(R)}let y=!1,E=!1,C=Vp(s,o,c.length,null);for(let A=0;A<c.length;A++){const R=c[A];a.mergedAttrs=Re(a.mergedAttrs,R.hostAttrs),DI(s,a,o,C,R),II(C,R,h),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const k=R.type.prototype;!y&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((s.preOrderHooks??=[]).push(a.index),y=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(a.index),E=!0),C++}!function oS(s,o,a){const h=o.directiveEnd,p=s.data,y=o.attrs,E=[];let C=null,A=null;for(let R=o.directiveStart;R<h;R++){const k=p[R],G=a?a.get(k):null,fe=G?G.outputs:null;C=yo(k.inputs,R,C,G?G.inputs:null),A=yo(k.outputs,R,A,fe);const Fe=null===C||null===y||rn(o)?null:hS(C,R,y);E.push(Fe)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=C,o.outputs=A}(s,a,p)}function Wa(s,o,a){const c=a.directiveStart,h=a.directiveEnd,p=a.index,y=function nr(){return Tt.lFrame.currentDirectiveIndex}();try{Uo(p);for(let E=c;E<h;E++){const C=s.data[E],A=o[E];gl(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&uS(C,A)}}finally{Uo(-1),gl(y)}}function uS(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Q_(s,o,a){o.componentOffset=a,(s.components??=[]).push(o.index)}function II(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;hs(o)&&(a[""]=s)}}function DI(s,o,a,c,h){s.data[c]=h;const p=h.factory||(h.factory=ps(h.type)),y=new ka(p,hs(h),Nh);s.blueprint[c]=y,a[c]=y,function aS(s,o,a,c,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function wI(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,p)}}(s,o,c,Vp(s,a,h.hostVars,zt),h)}function oa(s,o,a,c,h,p){const y=Ir(s,o);!function jp(s,o,a,c,h,p,y){if(null==p)s.removeAttribute(o,h,a);else{const E=null==y?Oe(p):y(p,c||"",h);s.setAttribute(o,h,E,a)}}(o[Pt],y,p,s.value,a,c,h)}function dS(s,o,a,c,h,p){const y=p[o];if(null!==y)for(let E=0;E<y.length;)ay(c,a,y[E++],y[E++],y[E++])}function ay(s,o,a,c,h){const p=An(null);try{null!==s.setInput?s.setInput(o,h,a,c):o[c]=h}finally{An(p)}}function hS(s,o,a){let c=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){c.push(p,y[E+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function Fl(s,o,a,c){return[s,!0,!1,o,null,0,c,a,null,null,null]}function CI(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=s.data[p];Ra(a[c]),y.contentQueries(2,o[p],p)}}}function Rh(s,o){return s[ro]?s[wi][_i]=o:s[ro]=o,s[wi]=o,o}function J_(s,o,a){Ra(0);const c=An(null);try{o(s,a)}finally{An(c)}}function X_(s){return s[no]||(s[no]=[])}function TI(s){return s.cleanup||(s.cleanup=[])}function SI(s,o){const a=s[So],c=a?a.get(Vu,null):null;c&&c.handleError(o)}function uy(s,o,a,c,h){for(let p=0;p<a.length;){const y=a[p++],E=a[p++];ay(s.data[y],o[y],c,E,h)}}function e0(s,o){const a=Hr(o,s),c=a[Xe];!function fS(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])}(c,a);const h=a[qn];null!==h&&null===a[Vi]&&(a[Vi]=k_(h,a[So])),t0(c,a,a[Cn])}function t0(s,o,a){Ic(o);try{const c=s.viewQuery;null!==c&&J_(1,c,a);const h=s.template;null!==h&&sy(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&CI(s,o),s.staticViewQueries&&J_(2,s.viewQuery,a);const p=s.components;null!==p&&function AI(s,o){for(let a=0;a<o.length;a++)e0(s,o[a])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Nt]&=-5,Hi()}}let NI=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(a,c,h){const p=typeof Zone>"u"?null:Zone.current,y=new Rr(a,A=>{this.all.has(A)&&this.queue.set(A,p)},h);let E;this.all.add(y),y.notify();const C=()=>{y.cleanup(),E?.(),this.all.delete(y),this.queue.delete(y)};return E=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:()=>new s}),s})();function $p(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=pe(h,E):2==p&&(c=pe(c,E+": "+o[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function aa(s,o,a,c,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(wn(p)),xr(p)){for(let E=Ln;E<p.length;E++){const C=p[E],A=C[Xe].firstChild;null!==A&&aa(C[Xe],C,A,c)}p[Ei]!==p[qn]&&c.push(p[Ei])}const y=a.type;if(8&y)aa(s,o,a.child,c);else if(32&y){const E=Sl(a,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=Pu(o,a);if(Array.isArray(E))c.push(...E);else{const C=Jo(o[Wn]);aa(C[Xe],C,E,c,!0)}}a=h?a.projectionNext:a.next}return c}function ly(s,o,a,c=!0){const h=o[Ia].rendererFactory;h.begin&&h.begin();try{Hp(s,o,s.template,a)}catch(y){throw c&&SI(o,y),y}finally{h.end&&h.end(),o[Ia].effectManager?.flush()}}function Hp(s,o,a,c){const h=o[Nt];if(256!=(256&h)){o[Ia].effectManager?.flush(),Ic(o);try{$f(o),function Mn(s){return Tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&sy(s,o,a,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&vl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&jo(o,A,0,null),_l(o,0)}if(function vS(s){for(let o=Gc(s);null!==o;o=Is(o)){if(!o[lu])continue;const a=o[No];for(let c=0;c<a.length;c++){yc(a[c])}}}(o),function yS(s){for(let o=Gc(s);null!==o;o=Is(o))for(let a=Ln;a<o.length;a++){const c=o[a],h=c[Xe];Eu(c)&&Hp(h,c,h.template,c[Cn])}}(o),null!==s.contentQueries&&CI(s,o),y){const A=s.contentCheckHooks;null!==A&&vl(o,A)}else{const A=s.contentHooks;null!==A&&jo(o,A,1),_l(o,1)}!function rS(s,o){const a=s.hostBindingOpCodes;if(null===a)return;const c=Pp(o,nl);try{for(let h=0;h<a.length;h++){const p=a[h];if(p<0)Uo(~p);else{const y=p,E=a[++h],C=a[++h];Ec(E,y),c.runInContext(C,2,o[y])}}}finally{null===o[nl]&&H_(o,nl),Uo(-1)}}(s,o);const E=s.components;null!==E&&function _S(s,o){for(let a=0;a<o.length;a++)n0(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&J_(2,C,c),y){const A=s.viewCheckHooks;null!==A&&vl(o,A)}else{const A=s.viewHooks;null!==A&&jo(o,A,2),_l(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Nt]&=-73,vc(o)}finally{Hi()}}}function n0(s,o){const a=Hr(o,s);if(Eu(a)){const c=a[Xe];80&a[Nt]?Hp(c,a,c.template,a[Cn]):a[ts]>0&&cy(a)}}function cy(s){for(let c=Gc(s);null!==c;c=Is(c))for(let h=Ln;h<c.length;h++){const p=c[h];if(Eu(p))if(1024&p[Nt]){const y=p[Xe];Hp(y,p,y.template,p[Cn])}else p[ts]>0&&cy(p)}const a=s[Xe].components;if(null!==a)for(let c=0;c<a.length;c++){const h=Hr(a[c],s);Eu(h)&&h[ts]>0&&cy(h)}}class Oh{get rootNodes(){const o=this._lView,a=o[Xe];return aa(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(o){this._lView[Cn]=o}get destroyed(){return 256==(256&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Dn];if(xr(o)){const a=o[Ud],c=a?a.indexOf(this):-1;c>-1&&(yp(o,c),ja(a,c))}this._attachedToViewContainer=!1}vp(this._lView[Xe],this._lView)}onDestroy(o){!function _c(s,o){if(256==(256&s[Nt]))throw new ue(911,!1);null===s[Mo]&&(s[Mo]=[]),s[Mo].push(o)}(this._lView,o)}markForCheck(){Qm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-129}reattach(){this._lView[Nt]|=128}detectChanges(){ly(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function km(s,o){Ml(s,o,o[Pt],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=o}}class wS extends Oh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ly(o[Xe],o,o[Cn],!1)}checkNoChanges(){}get context(){return null}}class r0 extends Ch{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=sn(o);return new rd(a,this.ngModule)}}function RI(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class ES{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=yi(c);const h=this.injector.get(o,aI,c);return h!==aI||a===aI?h:this.parentInjector.get(o,a,c)}}class rd extends V_{get inputs(){return RI(this.componentDef.inputs)}get outputs(){return RI(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Fd(s){return s.map(wa).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let p=(h=h||this.ngModule)instanceof Kc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new ES(o,p):o,E=y.get(B_,null);if(null===E)throw new ue(407,!1);const R={rendererFactory:E,sanitizer:y.get(as,null),effectManager:y.get(NI,null)},k=E.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Q=c?function iS(s,o,a,c){const p=c.get(uI,!1)||a===X.ShadowDom,y=s.selectRootElement(o,p);return function pR(s){mI(s)}(y),y}(k,c,this.componentDef.encapsulation,y):Wr(k,G,function OI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(G)),fe=this.componentDef.onPush?576:528,Fe=oy(0,null,null,1,0,null,null,null,null,null,null),We=Lp(null,Fe,null,fe,null,null,R,k,y,null,null);let yt,we;Ic(We);try{const At=this.componentDef;let Zt,yn=null;At.findHostDirectiveDefs?(Zt=[],yn=new Map,At.findHostDirectiveDefs(At,Zt,yn),Zt.push(At)):Zt=[At];const pa=function wR(s,o){const a=s[Xe],c=Ht;return s[c]=o,xh(a,c,2,"#host",null)}(We,Q),Kt=function PI(s,o,a,c,h,p,y){const E=h[Xe];!function kI(s,o,a,c){for(const h of s)o.mergedAttrs=Re(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&($p(o,o.mergedAttrs,!0),null!==a&&ME(c,a,o))}(c,s,o,y);let C=null;null!==o&&(C=k_(o,h[So]));const A=p.rendererFactory.createRenderer(o,a),R=Lp(h,gI(a),null,a.onPush?64:16,h[s.index],s,p,A,null,null,C);return E.firstCreatePass&&Q_(E,s,c.length-1),Rh(h,R),h[s.index]=R}(pa,Q,At,Zt,We,R,k);we=oo(Fe,Ht),Q&&function IR(s,o,a,c){if(c)bo(s,a,["ng-version",j_.full]);else{const{attrs:h,classes:p}=function zn(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&a.push(p);else{if(!tr(h))break;h=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&bo(s,a,h),p&&p.length>0&&m_(s,a,p.join(" "))}}(k,At,Q,c),void 0!==a&&function FI(s,o,a){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=a[h];c.push(null!=p?Array.from(p):null)}}(we,this.ngContentSelectors,a),yt=function ER(s,o,a,c,h,p){const y=Or(),E=h[Xe],C=Ir(y,h);K_(E,h,y,a,null,c);for(let R=0;R<a.length;R++)oi(is(h,E,y.directiveStart+R,y),h);Wa(E,h,y),C&&oi(C,h);const A=is(h,E,y.directiveStart+y.componentOffset,y);if(s[Cn]=h[Cn]=A,null!==p)for(const R of p)R(A,o);return fI(E,y,s),A}(Kt,At,Zt,yn,We,[s0]),t0(Fe,We,null)}finally{Hi()}return new _R(this.componentType,yt,Qc(we,We),We,we)}}class _R extends XT{constructor(o,a,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new wS(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const p=this._rootLView;uy(p[Xe],p,h,o,a),this.previousInputValues.set(o,a),Qm(Hr(this._tNode.index,p))}}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function s0(){const s=Or();Bo(be()[Xe],s)}function LI(s){let o=function IS(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(hs(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ue(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=s;y.inputs=o0(s.inputs),y.declaredInputs=o0(s.declaredInputs),y.outputs=o0(s.outputs);const E=h.hostBindings;E&&dy(s,E);const C=h.viewQuery,A=h.contentQueries;if(C&&VI(s,C),A&&DS(s,A),ye(s.inputs,h.inputs),ye(s.declaredInputs,h.declaredInputs),ye(s.outputs,h.outputs),hs(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===LI&&(a=!1)}}o=Object.getPrototypeOf(o)}!function DR(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Re(h.hostAttrs,a=Re(a,h.hostAttrs))}}(c)}function o0(s){return s===Qe?{}:s===Ye?[]:s}function VI(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function DS(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,p)=>{o(c,h,p),a(c,h,p)}:o}function dy(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function fy(s){return!!Gp(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Gp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Wi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function BI(s,o,a,c){const h=be();return Wi(h,Vo(),o)&&(Qt(),oa(hn(),h,s,o,a,c)),BI}function Wp(s,o,a,c){return Wi(s,Vo(),a)?o+Oe(a)+c:zt}function wy(s,o,a,c,h,p,y,E){const C=be(),A=Qt(),R=s+Ht,k=A.firstCreatePass?function kS(s,o,a,c,h,p,y,E,C){const A=o.consts,R=xh(o,s,4,y||null,$i(A,E));Z_(o,a,R,$i(A,C)),Bo(o,R);const k=R.tView=oy(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,R),k.queries=o.queries.embeddedTView(R)),R}(R,A,C,o,a,c,h,p,y):A.data[R];ns(k,!1);const G=Ey(A,C,k,s);yl()&&zi(A,C,G,k),oi(G,C),Rh(C,C[R]=Fl(G,C,G,k)),Bi(k)&&pI(A,C,k),null!=y&&Up(C,k,E)}let Ey=function Iy(s,o,a,c){return Os(!0),o[Pt].createComment("")};function Lh(s,o,a){const c=be();return Wi(c,Vo(),o)&&vo(Qt(),hn(),c,s,o,c[Pt],a,!1),Lh}function ng(s,o,a,c,h){const y=h?"class":"style";uy(s,a,o.inputs[y],y,c)}function Vh(s,o,a,c){const h=be(),p=Qt(),y=Ht+s,E=h[Pt],C=p.firstCreatePass?function QI(s,o,a,c,h,p){const y=o.consts,C=xh(o,s,2,c,$i(y,h));return Z_(o,a,C,$i(y,p)),null!==C.attrs&&$p(C,C.attrs,!1),null!==C.mergedAttrs&&$p(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,p,h,o,a,c):p.data[y],A=_0(p,h,C,E,o,s);h[y]=A;const R=Bi(C);return ns(C,!0),ME(E,A,C),32!=(32&C.flags)&&yl()&&zi(p,h,A,C),0===function Na(){return Tt.lFrame.elementDepthCount}()&&oi(A,h),function xs(){Tt.lFrame.elementDepthCount++}(),R&&(pI(p,h,C),fI(p,C,h)),null!==c&&Up(h,C),Vh}function Uh(){let s=Or();Rs()?Xd():(s=s.parent,ns(s,!1));const o=s;(function Gf(s){return Tt.skipHydrationRootTNode===s})(o)&&function Iu(){Tt.skipHydrationRootTNode=null}(),function Po(){Tt.lFrame.elementDepthCount--}();const a=Qt();return a.firstCreatePass&&(Bo(a,s),rl(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xf(s){return 0!=(8&s.flags)}(o)&&ng(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function fn(s){return 0!=(16&s.flags)}(o)&&ng(a,o,be(),o.stylesWithoutHost,!1),Uh}function rg(s,o,a,c){return Vh(s,o,a,c),Uh(),rg}let _0=(s,o,a,c,h,p)=>(Os(!0),Wr(c,h,function Qf(){return Tt.lFrame.currentNamespace}()));function ig(s,o,a){const c=be(),h=Qt(),p=s+Ht,y=h.firstCreatePass?function Bh(s,o,a,c,h){const p=o.consts,y=$i(p,c),E=xh(o,s,8,"ng-container",y);return null!==y&&$p(E,y,!0),Z_(o,a,E,$i(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,c,o,a):h.data[p];ns(y,!0);const E=eD(h,c,y,s);return c[p]=E,yl()&&zi(h,c,E,y),oi(E,c),Bi(y)&&(pI(h,c,y),fI(h,y,c)),null!=a&&Up(c,y),ig}function Dy(){let s=Or();const o=Qt();return Rs()?Xd():(s=s.parent,ns(s,!1)),o.firstCreatePass&&(Bo(o,s),rl(s)&&o.queries.elementEnd(s)),Dy}let eD=(s,o,a,c)=>(Os(!0),Ha(o[Pt],""));function tD(){return be()}function w0(s){return!!s&&"function"==typeof s.then}function nD(s){return!!s&&"function"==typeof s.subscribe}function E0(s,o,a,c){const h=be(),p=Qt(),y=Or();return function I0(s,o,a,c,h,p,y){const E=Bi(c),A=s.firstCreatePass&&TI(s),R=o[Cn],k=X_(o);let G=!0;if(3&c.type||y){const Fe=Ir(c,o),We=y?y(Fe):Fe,yt=k.length,we=y?Zt=>y(wn(Zt[c.index])):c.index;let At=null;if(!y&&E&&(At=function rD(s,o,a,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===a&&h[p+1]===c){const E=o[no],C=h[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,G=!1;else{p=iD(c,o,R,p,!1);const Zt=a.listen(We,h,p);k.push(p,Zt),A&&A.push(h,we,yt,yt+1)}}else p=iD(c,o,R,p,!1);const Q=c.outputs;let fe;if(G&&null!==Q&&(fe=Q[h])){const Fe=fe.length;if(Fe)for(let We=0;We<Fe;We+=2){const yn=o[fe[We]][fe[We+1]].subscribe(p),pa=k.length;k.push(p,yn),A&&A.push(h,c.index,pa,-(pa+1))}}}(p,h,h[Pt],y,s,o,c),E0}function Cy(s,o,a,c){try{return ji(6,o,a),!1!==a(c)}catch(h){return SI(s,h),!1}finally{ji(7,o,a)}}function iD(s,o,a,c,h){return function p(y){if(y===Function)return c;Qm(s.componentOffset>-1?Hr(s.index,o):o);let C=Cy(o,a,c,y),A=p.__ngNextListenerFn__;for(;A;)C=Cy(o,a,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&y.preventDefault(),C}}function sD(s=1){return function eh(s){return(Tt.lFrame.contextLView=function Zf(s,o){for(;s>0;)o=o[io],s--;return o}(s,Tt.lFrame.contextLView))[Cn]}(s)}function og(s,o,a,c,h){const p=be(),y=Wp(p,o,a,c);return y!==zt&&vo(Qt(),hn(),p,s,y,p[Pt],h,!1),og}function Ty(s,o){return s<<17|o<<2}function $u(s){return s>>17&32767}function ag(s){return 2|s}function Hu(s){return(131068&s)>>2}function cD(s,o){return-131069&s|o<<2}function dD(s){return 1|s}function QS(s,o,a,c,h){const p=s[a+1],y=null===o;let E=c?$u(p):Hu(p),C=!1;for(;0!==E&&(!1===C||y);){const R=s[E+1];MR(s[E],o)&&(C=!0,s[E+1]=c?dD(R):ag(R)),E=c?$u(R):Hu(R)}C&&(s[a+1]=c?ag(p):dD(p))}function MR(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Wo(s,o)>=0}const Zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function JS(s){return s.substring(Zr.key,Zr.keyEnd)}function XS(s,o){const a=Zr.textEnd;return a===o?-1:(o=Zr.keyEnd=function fD(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Zr.key=o,a),sd(s,o,a))}function sd(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function jh(s,o,a){return wo(s,o,a,!1),jh}function mD(s,o){return wo(s,o,null,!0),mD}function yD(s){la(PR,Ve,s,!0)}function Ve(s,o){for(let a=function xR(s){return function hD(s){Zr.key=0,Zr.keyEnd=0,Zr.value=0,Zr.valueEnd=0,Zr.textEnd=s.length}(s),XS(s,sd(s,0,Zr.textEnd))}(o);a>=0;a=XS(o,a))qr(s,JS(o),!0)}function wo(s,o,a,c){const h=be(),p=Qt(),y=gs(2);p.firstUpdatePass&&vD(p,s,y,c),o!==zt&&Wi(h,y,o)&&rA(p,p.data[Cr()],h,h[Pt],s,h[y+1]=function dg(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=De(na(s)))),s}(o,a),c,y)}function la(s,o,a,c){const h=Qt(),p=gs(2);h.firstUpdatePass&&vD(h,null,p,c);const y=be();if(a!==zt&&Wi(y,p,a)){const E=h.data[Cr()];if(A0(E,c)&&!Ka(h,p)){let C=c?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(a=pe(C,a||"")),ng(h,E,y,a,c)}else!function kR(s,o,a,c,h,p,y,E){h===zt&&(h=Ye);let C=0,A=0,R=0<h.length?h[0]:null,k=0<p.length?p[0]:null;for(;null!==R||null!==k;){const G=C<h.length?h[C+1]:void 0,Q=A<p.length?p[A+1]:void 0;let Fe,fe=null;R===k?(C+=2,A+=2,G!==Q&&(fe=k,Fe=Q)):null===k||null!==R&&R<k?(C+=2,fe=R):(A+=2,fe=k,Fe=Q),null!==fe&&rA(s,o,a,c,fe,Fe,y,E),R=C<h.length?h[C]:null,k=A<p.length?p[A]:null}}(h,E,y,y[Pt],y[p+1],y[p+1]=function ED(s,o,a){if(null==a||""===a)return Ye;const c=[],h=na(a);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,a),c,p)}}function Ka(s,o){return o>=s.expandoStartIndex}function vD(s,o,a,c){const h=s.data;if(null===h[a+1]){const p=h[Cr()],y=Ka(s,a);A0(p,c)&&null===o&&!y&&(o=!1),o=function _D(s,o,a,c){const h=Dr(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=Sy(a=lg(null,s,o,a,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=lg(h,s,o,a,c),null===p){let C=function OR(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Hu(c))return s[$u(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=lg(null,s,o,C[1],c),C=Sy(C,o.attrs,c),function wD(s,o,a,c){s[$u(a?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function ug(s,o,a){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Sy(c,s[p].hostAttrs,a);return Sy(c,o.attrs,a)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,c),function KS(s,o,a,c,h,p){let y=p?o.classBindings:o.styleBindings,E=$u(y),C=Hu(y);s[c]=a;let R,A=!1;if(Array.isArray(a)?(R=a[1],(null===R||Wo(a,R)>0)&&(A=!0)):R=a,h)if(0!==C){const G=$u(s[E+1]);s[c+1]=Ty(G,E),0!==G&&(s[G+1]=cD(s[G+1],c)),s[E+1]=function lD(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Ty(E,0),0!==E&&(s[E+1]=cD(s[E+1],c)),E=c;else s[c+1]=Ty(C,0),0===E?E=c:s[C+1]=cD(s[C+1],c),C=c;A&&(s[c+1]=ag(s[c+1])),QS(s,R,c,!0),QS(s,R,c,!1),function YS(s,o,a,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Wo(p,o)>=0&&(a[c+1]=dD(a[c+1]))}(o,R,s,c,p),y=Ty(E,C),p?o.classBindings=y:o.styleBindings=y}(h,p,o,a,y,c)}}function lg(s,o,a,c,h){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=o[E],c=Sy(c,p.hostAttrs,h),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),c}function Sy(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),qr(s,y,!!a||o[++p]))}return void 0===s?null:s}function PR(s,o,a){const c=String(o);""!==c&&!c.includes(" ")&&qr(s,c,a)}function rA(s,o,a,c,h,p,y,E){if(!(3&o.type))return;const C=s.data,A=C[E+1],R=function b0(s){return 1==(1&s)}(A)?iA(C,o,a,h,Hu(A),y):void 0;cg(R)||(cg(p)||function ZS(s){return 2==(2&s)}(A)&&(p=iA(C,null,a,h,E,y)),function g_(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Si.DashCase;null==h?s.removeStyle(a,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Si.Important),s.setStyle(a,c,h,p))}}(c,y,ul(Cr(),a),h,p))}function iA(s,o,a,c,h,p){const y=null===o;let E;for(;h>0;){const C=s[h],A=Array.isArray(C),R=A?C[1]:C,k=null===R;let G=a[h+1];G===zt&&(G=k?Ye:void 0);let Q=k?kc(G,c):R===c?G:void 0;if(A&&!cg(Q)&&(Q=kc(C,c)),cg(Q)&&(E=Q,y))return E;const fe=s[h+1];h=y?$u(fe):Hu(fe)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=kc(C,c))}return E}function cg(s){return void 0!==s}function A0(s,o){return 0!=(s.flags&(o?8:16))}function Ay(s,o=""){const a=be(),c=Qt(),h=s+Ht,p=c.firstCreatePass?xh(c,h,1,o,null):c.data[h],y=M0(c,a,p,o,s);a[h]=y,yl()&&zi(c,a,y,p),ns(p,!1)}let M0=(s,o,a,c,h)=>(Os(!0),function zc(s,o){return s.createText(o)}(o[Pt],c));function N0(s){return My("",s,""),N0}function My(s,o,a){const c=be(),h=Wp(c,s,o,a);return h!==zt&&function Uu(s,o,a){const c=ul(o,s);!function Pm(s,o,a){s.setValue(o,a)}(s[Pt],c,a)}(c,Cr(),h),My}function aA(s,o,a){la(qr,Ve,Wp(be(),s,o,a),!0)}function x0(s,o,a){const c=be();if(Wi(c,Vo(),o)){const p=Qt(),y=hn();vo(p,y,c,s,o,function nd(s,o,a){return(null===s||hs(s))&&(a=function Kd(s){for(;Array.isArray(s);){if("object"==typeof s[Vd])return s;s=s[qn]}return null}(a[o.index])),a[Pt]}(Dr(p.data),y,c),a,!0)}return x0}const Ai=void 0;var R0=["en",[["a","p"],["AM","PM"],Ai],[["AM","PM"],Ai,Ai],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ai,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ai,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ai,"{1} 'at' {0}",Ai],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function st(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ot={};function od(s){const o=function Ki(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=VD(o);if(a)return a;const c=o.split("-")[0];if(a=VD(c),a)return a;if("en"===c)return R0;throw new ue(701,!1)}function Ry(s){return od(s)[Mt.PluralCase]}function VD(s){return s in Ot||(Ot[s]=tt.ng&&tt.ng.common&&tt.ng.common.locales&&tt.ng.common.locales[s]),Ot[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const $s="en-US";let UD=$s;function Ni(s,o,a,c,h){if(s=W(s),Array.isArray(s))for(let p=0;p<s.length;p++)Ni(s[p],o,a,c,h);else{const p=Qt(),y=be();let E=xl(s)?s:W(s.provide),C=zT(s);const A=Or(),R=1048575&A.providerIndexes,k=A.directiveStart,G=A.providerIndexes>>20;if(xl(s)||!s.multi){const Q=new ka(C,h,Nh),fe=Qh(E,o,h?R:R+G,k);-1===fe?(Go(si(A,y),p,E),zy(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[fe]=Q,y[fe]=Q)}else{const Q=Qh(E,o,R+G,k),fe=Qh(E,o,R,R+G),We=fe>=0&&a[fe];if(h&&!We||!h&&!(Q>=0&&a[Q])){Go(si(A,y),p,E);const yt=function fC(s,o,a,c,h){const p=new ka(s,a,Nh);return p.multi=[],p.index=o,p.componentProviders=0,Yh(p,h,c&&!a),p}(h?z0:hC,a.length,h,c,C);!h&&We&&(a[fe].providerFactory=yt),zy(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(yt),y.push(yt)}else zy(p,s,Q>-1?Q:fe,Yh(a[h?fe:Q],C,!h&&c));!h&&c&&We&&a[fe].componentProviders++}}}function zy(s,o,a,c){const h=xl(o),p=function HE(s){return!!s.useClass}(o);if(h||p){const C=(p?W(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=A.indexOf(a);-1===R?A.push(a,[c,C]):A[R+1].push(c,C)}else A.push(a,C)}}}function Yh(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Qh(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function hC(s,o,a,c){return qy(this.multi,[])}function z0(s,o,a,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=is(a,a[Xe],this.providerFactory.index,c);p=E.slice(0,y),qy(h,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],qy(h,p);return p}function qy(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Jh(s,o=[]){return a=>{a.providersResolver=(c,h)=>function dC(s,o,a){const c=Qt();if(c.firstCreatePass){const h=hs(s);Ni(a,c.data,c.blueprint,h,!0),Ni(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Ul{}class Wy{}function q0(s,o){return new cd(s,o??null,[])}class cd extends Ul{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new r0(this);const h=In(o);this._bootstrapComponents=qa(h.bootstrap),this._r3Injector=Fp(o,a,[{provide:Ul,useValue:this},{provide:Ch,useValue:this.componentFactoryResolver},...c],De(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Zy extends Wy{constructor(o){super(),this.moduleType=o}create(o){return new cd(this.moduleType,o,[])}}class Ky extends Ul{constructor(o){super(),this.componentFactoryResolver=new r0(this),this.instance=null;const a=new zE([...o.providers,{provide:Ul,useValue:this},{provide:Ch,useValue:this.componentFactoryResolver}],o.parent||Np(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ig(s,o,a=null){return new Ky({providers:s,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Z0=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Hm(0,a.type),h=c.length>0?Ig([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Rt({token:s,providedIn:"environment",factory:()=>new s(dn(Kc))}),s})();function K0(s){s.getStandaloneInjector=o=>o.get(Z0).getOrCreateStandaloneInjector(s)}function _C(s,o,a,c,h,p){const y=o+a;return Wi(s,y,h)?function Bu(s,o,a){return s[o]=a}(s,y+1,p?c.call(p,h):c(h)):function Tg(s,o){const a=s[o];return a===zt?void 0:a}(s,y+1)}function nw(s,o){const a=Qt();let c;const h=s+Ht;a.firstCreatePass?(c=function nf(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??=[]).push(h,c.onDestroy)):c=a.data[h];const p=c.factory||(c.factory=ps(c.type)),y=lr(Nh);try{const E=ms(!1),C=p();return ms(E),function LS(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,be(),h,C),C}finally{lr(y)}}function wC(s,o,a){const c=s+Ht,h=be(),p=function Ma(s,o){return s[o]}(h,c);return function hd(s,o){return s[Xe].data[o].pure}(h,c)?_C(h,function dr(){const s=Tt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function tv(s){return o=>{setTimeout(s,void 0,o)}}const da=class rw extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,p=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=tv(p),h&&(h=tv(h)),y&&(y=tv(y)));const E=super.subscribe({next:h,error:p,complete:y});return o instanceof K.w0&&o.add(E),E}};function jA(){return this._results[Symbol.iterator]()}class iw{get changes(){return this._changes||(this._changes=new da)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=iw.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=jA)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function rr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ep(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sg=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ag,s})();const $A=Sg,nv=class extends $A{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a,null)}createEmbeddedViewImpl(o,a,c){const h=this._declarationTContainer.tView,p=Lp(this._declarationLView,h,o,16,null,h.declTNode,null,null,null,a||null,c||null);p[ei]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[ti];return null!==E&&(p[ti]=E.createEmbeddedView(h)),t0(h,p,o),new Oh(p)}};function Ag(){return fd(Or(),be())}function fd(s,o){return 4&s.type?new nv(o,s,Qc(s,o)):null}let Ng=(()=>{class s{}return s.__NG_ELEMENT_ID__=TC,s})();function TC(){return aw(Or(),be())}const SC=Ng,xg=class extends SC{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Qc(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Nc(this._hostTNode,this._hostLView);if(Zn(o)){const a=Fa(o,this._hostLView),c=Pr(o);return new Gr(a[Xe].data[c+8],a)}return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ow(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Ln}createEmbeddedView(o,a,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const E=o.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(E,h,false),E}createComponent(o,a,c,h,p){const y=o&&!function ys(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const Fe=a||{};E=Fe.index,c=Fe.injector,h=Fe.projectableNodes,p=Fe.environmentInjector||Fe.ngModuleRef}const C=y?o:new rd(sn(o)),A=c||this.parentInjector;if(!p&&null==C.ngModule){const We=(y?A:this.parentInjector).get(Kc,null);We&&(p=We)}sn(C.componentType??{});const Q=C.create(A,h,null,p);return this.insertImpl(Q.hostView,E,false),Q}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const h=o._lView,p=h[Xe];if(function mc(s){return xr(s[Dn])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const A=h[Dn],R=new xg(A,A[Nr],A[Dn]);R.detach(R.indexOf(o))}}const y=this._adjustIndex(a),E=this._lContainer;if(function Al(s,o,a,c){const h=Ln+c,p=a.length;c>0&&(a[h-1][_i]=o),c<p-Ln?(o[_i]=a[h],Pc(a,Ln+c,o)):(a.push(o),o[_i]=null),o[Dn]=a;const y=o[ei];null!==y&&a!==y&&function mp(s,o){const a=s[No];o[Wn]!==o[Dn][Dn][Wn]&&(s[lu]=!0),null===a?s[No]=[o]:a.push(o)}(y,o);const E=o[ti];null!==E&&E.insertView(s),o[Nt]|=128}(p,h,E,y),!c){const C=Wc(y,E),A=h[Pt],R=U(A,E[Ei]);null!==R&&function qc(s,o,a,c,h,p){c[qn]=h,c[Nr]=o,Ml(s,c,a,1,h,p)}(p,E[Nr],A,h,R,C)}return o.attachToViewContainerRef(),Pc(Eo(E),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ow(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=yp(this._lContainer,a);c&&(ja(Eo(this._lContainer),a),vp(c[Xe],c))}detach(o){const a=this._adjustIndex(o,-1),c=yp(this._lContainer,a);return c&&null!=ja(Eo(this._lContainer),a)?new Oh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function ow(s){return s[Ud]}function Eo(s){return s[Ud]||(s[Ud]=[])}function aw(s,o){let a;const c=o[s.index];return xr(c)?a=c:(a=Fl(c,o,null,s),o[s.index]=a,Rh(o,a)),uw(a,o,s,c),new xg(a,s,o)}let uw=function iv(s,o,a,c){if(s[Ei])return;let h;h=8&a.type?wn(c):function qA(s,o){const a=s[Pt],c=a.createComment(""),h=Ir(o,s);return f(a,U(a,h),c,function J(s,o){return s.nextSibling(o)}(a,h),!1),c}(o,a),s[Ei]=h};class Og{constructor(o){this.queryList=o,this.matches=null}clone(){return new Og(this.queryList)}setDirty(){this.queryList.setDirty()}}class rf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new rf(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==mw(o,a).matches&&this.queries[a].setDirty()}}class lw{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class sf{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new sf(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class cw{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new cw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,a,MC(a,p)),this.matchTNodeWithReadOption(o,a,co(a,o,p,!1,!1))}else c===Sg?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,co(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Jc||h===Ng||h===Sg&&4&a.type)this.addMatch(a.index,-2);else{const p=co(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function MC(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function NC(s,o,a,c){return-1===a?function Pg(s,o){return 11&s.type?Qc(s,o):4&s.type?fd(s,o):null}(o,s):-2===a?function xC(s,o,a){return a===Jc?Qc(o,s):a===Sg?fd(o,s):a===Ng?aw(o,s):void 0}(s,o,c):is(s,s[Xe],a,o)}function sv(s,o,a,c){const h=o[ti].queries[c];if(null===h.matches){const p=s.data,y=a.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:NC(o,p[A],y[C+1],a.metadata.read))}h.matches=E}return h.matches}function kg(s,o,a,c){const h=s.queries.getByIndex(a),p=h.matches;if(null!==p){const y=sv(s,o,h,a);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)c.push(y[E/2]);else{const A=p[E+1],R=o[-C];for(let k=Ln;k<R.length;k++){const G=R[k];G[ei]===G[Dn]&&kg(G[Xe],G,A,c)}if(null!==R[No]){const k=R[No];for(let G=0;G<k.length;G++){const Q=k[G];kg(Q[Xe],Q,A,c)}}}}}return c}function dw(s){const o=be(),a=Qt(),c=xa();Ra(c+1);const h=mw(a,c);if(s.dirty&&function ll(s){return 4==(4&s[Nt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?kg(a,o,c,[]):sv(a,o,h,c);s.reset(p,Ym),s.notifyOnChanges()}return!0}return!1}function hw(s,o,a,c){const h=Qt();if(h.firstCreatePass){const p=Or();(function gw(s,o,a){null===s.queries&&(s.queries=new sf),s.queries.track(new cw(o,a))})(h,new lw(o,a,c),p.index),function RC(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function pw(s,o,a){const c=new iw(4==(4&a));(function yI(s,o,a,c){const h=X_(o);h.push(a),s.firstCreatePass&&TI(s).push(c,h.length-1)})(s,o,c,c.destroy),null===o[ti]&&(o[ti]=new rf),o[ti].queries.push(new Og(c))}(h,be(),a)}function fw(){return function gd(s,o){return s[ti].queries[o].queryList}(be(),xa())}function mw(s,o){return s.queries.getByIndex(o)}function pn(s){return!!In(s)}const eM=new Xt("Application Initializer");let Iw=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=kt(eM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const p=h();if(w0(p))a.push(p);else if(nD(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Dw=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Zu=new Xt("LocaleId",{providedIn:"root",factory:()=>kt(Zu,gt.Optional|gt.SkipSelf)||function Bt(){return typeof $localize<"u"&&$localize.locale||$s}()}),VC=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class un{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let tM=(()=>{class s{compileModuleSync(a){return new Zy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=qa(In(a).declarations).reduce((y,E)=>{const C=sn(E);return C&&y.push(new rd(C)),y},[]);return new un(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const nM=(()=>Promise.resolve(0))();function Ed(s){typeof Zone>"u"?nM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}function Cw(...s){}class di{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function UC(){let s=tt.requestAnimationFrame,o=tt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function bw(s){const o=()=>{!function jl(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(tt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,te(s),s.isCheckStableRunning=!0,yv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),te(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,p,y,E)=>{try{return Vg(s),a.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Co(s)}},onInvoke:(a,c,h,p,y,E,C)=>{try{return Vg(s),a.invoke(h,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Co(s)}},onHasTask:(a,c,h,p)=>{a.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,te(s),yv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,h,p)=>(a.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!di.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(di.isInAngularZone())throw new ue(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,BC,Cw,Cw);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const BC={};function yv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function te(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Vg(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Co(s){s._nesting--,yv(s)}class rM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const df=new Xt("",{providedIn:"root",factory:Ku});function Ku(){const s=kt(di);let o=!0;const a=new P.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),c=new P.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{di.assertNotInAngularZone(),Ed(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{di.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(a,c.pipe((0,se.B)()))}const jC=new Xt(""),$l=new Xt("");let Tw,$C=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tw||(function iM(s){Tw=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{di.assertNotInAngularZone(),Ed(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ed(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(dn(di),dn(vv),dn($l))},s.\u0275prov=Rt({token:s,factory:s.\u0275fac}),s})(),vv=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Tw?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ur=null;const hf=new Xt("AllowMultipleToken"),Id=new Xt("PlatformDestroyListeners"),_v=new Xt("appBootstrapListener");class HC{constructor(o,a){this.name=o,this.token=a}}function qC(s,o,a=[]){const c=`Platform: ${o}`,h=new Xt(c);return(p=[])=>{let y=Aw();if(!y||y.injector.get(hf,!1)){const E=[...a,...p,{provide:h,useValue:!0}];s?s(E):function wv(s){if(Ur&&!Ur.get(hf,!1))throw new ue(400,!1);(function Sw(){!function Sa(s){mu=s}(()=>{throw new ue(600,!1)})})(),Ur=s;const o=s.get(ZC);(function zC(s){s.get(KE,null)?.forEach(a=>a())})(s)}(function WC(s=[],o){return kl.create({name:o,providers:[{provide:Mp,useValue:"platform"},{provide:Id,useValue:new Set([()=>Ur=null])},...s]})}(E,c))}return function sM(s){const o=Aw();if(!o)throw new ue(401,!1);return o}()}}function Aw(){return Ur?.get(ZC)??null}let ZC=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function oM(s="zone.js",o){return"noop"===s?new rM:"zone.js"===s?new di(o):s}(c?.ngZone,function KC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return h.run(()=>{const p=function kA(s,o,a){return new cd(s,o,a)}(a.moduleType,this.injector,function eb(s){return[{provide:di,useFactory:s},{provide:Ap,multi:!0,useFactory:()=>{const o=kt(XC,{optional:!0});return()=>o.initialize()}},{provide:Mw,useFactory:aM},{provide:df,useFactory:Ku}]}(()=>h)),y=p.injector.get(Vu,null);return h.runOutsideAngular(()=>{const E=h.onError.subscribe({next:C=>{y.handleError(C)}});p.onDestroy(()=>{Ev(this._modules,p),E.unsubscribe()})}),function YC(s,o,a){try{const c=a();return w0(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(y,h,()=>{const E=p.injector.get(Iw);return E.runInitializers(),E.donePromise.then(()=>(function Gh(s){ke(s,"Expected localeId to be defined"),"string"==typeof s&&(UD=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Zu,$s)||$s),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const h=QC({},c);return function Yi(s,o,a){const c=new Zy(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const c=a.injector.get(ff);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new ue(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Id,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(dn(kl))},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function QC(s,o){return Array.isArray(o)?o.reduce(QC,s):{...s,...o}}let ff=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=kt(Mw),this.componentTypes=[],this.components=[],this.isStable=kt(df),this._injector=kt(Kc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof V_;if(!this._injector.get(Iw).done)throw!h&&To(a),new ue(405,!1);let y;y=h?a:this._injector.get(Ch).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function Qa(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Ul),A=y.create(kl.NULL,[],c||y.selector,E),R=A.location.nativeElement,k=A.injector.get(jC,null);return k?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),Ev(this.components,A),k?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new ue(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ev(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(_v,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ev(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ue(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ev(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}const Mw=new Xt("",{providedIn:"root",factory:()=>kt(Vu).handleError.bind(void 0)});function aM(){const s=kt(di),o=kt(Vu);return a=>s.runOutsideAngular(()=>o.handleError(a))}let XC=(()=>{class s{constructor(){this.zone=kt(di),this.applicationRef=kt(ff)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function hi(){return!1}let Iv=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ri,s})();function Ri(s){return function Un(s,o,a){if(xo(s)&&!a){const c=Hr(s.index,o);return new Oh(c,c)}return 47&s.type?new Oh(o[Wn],o):null}(Or(),be(),16==(16&s))}class Rw{constructor(){}supports(o){return fy(o)}create(o){return new Ow(o)}}const gf=(s,o)=>o;class Ow{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||gf}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<mf(c,h,p)?a:c,E=mf(y,h,p),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{p||(p=[]);const A=E-h,R=C-h;if(A!=R){for(let G=0;G<A;G++){const Q=G<p.length?p[G]:p[G]=0,fe=Q+G;R<=fe&&fe<A&&(p[G]=Q+1)}p[y.previousIndex]=R-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!fy(o))throw new ue(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),c=!0),a=a._next}else h=0,function SS(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new bv(a,c),p,h),o}_verifyReinsertion(o,a,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Tv),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class bv{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Td{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Tv{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Td,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mf(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class Pw{constructor(){}supports(o){return o instanceof Map||Gp(o)}create(){return new tb}}class tb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Gp(o)))throw new ue(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new Sv(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Sv{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yf(){return new Av([new Rw])}let Av=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||yf()),deps:[[s,new Fr,new Ct]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new ue(901,!1)}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:yf}),s})();function nb(){return new Mv([new Pw])}let Mv=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||nb()),deps:[[s,new Fr,new Ct]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new ue(901,!1)}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:nb}),s})();const zl=qC(null,"core",[]);let ib=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(dn(ff))},s.\u0275mod=eo({type:s}),s.\u0275inj=Jt({}),s})(),cb=(()=>{class s{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=kt(di),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(a=>{this.resolve=a})})}add(){if(this.completed)return-1;const a=this.taskId++;return this.collection.add(a),a}remove(a){this.completed||(this.collection.delete(a),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Lw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Bw(s){const o=sn(s);if(!o)return null;const a=new rd(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(wt,Ae,F)=>{F.d(Ae,{Z:()=>rt});var d=F(2090),K=F(4859),P=F(6881),ie=F(1877);class se{constructor(ue,Le){this._delegate=ue,this.firebase=Le,(0,P._addComponent)(ue,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ue,Le=P._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(ue);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Oe=Ge.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Le})}_removeServiceInstance(ue,Le=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(Le)}_addComponent(ue){(0,P._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,P._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function pe(){const pt=function De(pt){const ue={},Le={__esModule:!0,initializeApp:function Pe(Ee,je={}){const re=P.initializeApp(Ee,je);if((0,d.r3)(ue,re.name))return ue[re.name];const Ke=new pt(re,Le);return ue[re.name]=Ke,Ke},app:Ge,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ge(Ee){const je=Ee.name,re=je.replace("-compat","");if(P._registerComponent(Ee)&&"PUBLIC"===Ee.type){const Ke=(en=Ge())=>{if("function"!=typeof en[re])throw ye.create("invalid-app-argument",{appName:je});return en[re]()};void 0!==Ee.serviceProps&&(0,d.ZB)(Ke,Ee.serviceProps),Le[re]=Ke,pt.prototype[re]=function(...en){return this._getService.bind(this,je).apply(this,Ee.multipleInstances?en:[])}}return"PUBLIC"===Ee.type?Le[re]:null},removeApp:function Oe(Ee){delete ue[Ee]},useAsService:function Ne(Ee,je){return"serverAuth"===je?null:je},modularAPIs:P}};function Ge(Ee){if(!(0,d.r3)(ue,Ee=Ee||P._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Ee});return ue[Ee]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function _e(){return Object.keys(ue).map(Ee=>ue[Ee])}}),Ge.App=pt,Le}(se);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ue(Le){(0,d.ZB)(pt,Le)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),pt}(),j=new ie.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=z;!function Te(pt){(0,P.registerVersion)("@firebase/app-compat","0.2.11",pt)}()},6881:(wt,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>nn,_addComponent:()=>Pn,_addOrOverwriteComponent:()=>Xr,_apps:()=>tt,_clearComponents:()=>an,_components:()=>mi,_getProvider:()=>Bn,_registerComponent:()=>jr,_removeServiceInstance:()=>As,deleteApp:()=>dn,getApp:()=>jn,getApps:()=>Ms,initializeApp:()=>ou,onLog:()=>yi,registerVersion:()=>kt,setLogLevel:()=>Hn});var d=F(5861),K=F(4859),P=F(1877),ie=F(2090);const se=(de,ee)=>ee.some(Re=>de instanceof Re);let ne,ye;const z=new WeakMap,j=new WeakMap,W=new WeakMap,Be=new WeakMap,Te=new WeakMap;let ue={get(de,ee,Re){if(de instanceof IDBTransaction){if("done"===ee)return j.get(de);if("objectStoreNames"===ee)return de.objectStoreNames||W.get(de);if("store"===ee)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return Pe(de[ee])},set:(de,ee,Re)=>(de[ee]=Re,!0),has:(de,ee)=>de instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in de};function Ge(de){return"function"==typeof de?function Oe(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...ee){return de.apply(_e(this),ee),Pe(z.get(this))}:function(...ee){return Pe(de.apply(_e(this),ee))}:function(ee,...Re){const ft=de.call(_e(this),ee,...Re);return W.set(ft,ee.sort?ee.sort():[ee]),Pe(ft)}}(de):(de instanceof IDBTransaction&&function pt(de){if(j.has(de))return;const ee=new Promise((Re,ft)=>{const bt=()=>{de.removeEventListener("complete",$t),de.removeEventListener("error",rn),de.removeEventListener("abort",rn)},$t=()=>{Re(),bt()},rn=()=>{ft(de.error||new DOMException("AbortError","AbortError")),bt()};de.addEventListener("complete",$t),de.addEventListener("error",rn),de.addEventListener("abort",rn)});j.set(de,ee)}(de),se(de,function De(){return ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ue):de)}function Pe(de){if(de instanceof IDBRequest)return function rt(de){const ee=new Promise((Re,ft)=>{const bt=()=>{de.removeEventListener("success",$t),de.removeEventListener("error",rn)},$t=()=>{Re(Pe(de.result)),bt()},rn=()=>{ft(de.error),bt()};de.addEventListener("success",$t),de.addEventListener("error",rn)});return ee.then(Re=>{Re instanceof IDBCursor&&z.set(Re,de)}).catch(()=>{}),Te.set(ee,de),ee}(de);if(Be.has(de))return Be.get(de);const ee=Ge(de);return ee!==de&&(Be.set(de,ee),Te.set(ee,de)),ee}const _e=de=>Te.get(de),Ee=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],re=new Map;function Ke(de,ee){if(!(de instanceof IDBDatabase)||ee in de||"string"!=typeof ee)return;if(re.get(ee))return re.get(ee);const Re=ee.replace(/FromIndex$/,""),ft=ee!==Re,bt=je.includes(Re);if(!(Re in(ft?IDBIndex:IDBObjectStore).prototype)||!bt&&!Ee.includes(Re))return;const $t=function(){var rn=(0,d.Z)(function*(cr,...er){const tr=this.transaction(cr,bt?"readwrite":"readonly");let va=tr.store;return ft&&(va=va.index(er.shift())),(yield Promise.all([va[Re](...er),bt&&tr.done]))[0]});return function(er){return rn.apply(this,arguments)}}();return re.set(ee,$t),$t}!function Le(de){ue=de(ue)}(de=>({...de,get:(ee,Re,ft)=>Ke(ee,Re)||de.get(ee,Re,ft),has:(ee,Re)=>!!Ke(ee,Re)||de.has(ee,Re)}));class en{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function vr(de){const ee=de.getComponent();return"VERSION"===ee?.type}(Re)){const ft=Re.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Re=>Re).join(" ")}}const pi="@firebase/app",ce=new P.Yd("@firebase/app"),nn="[DEFAULT]",Et={[pi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tt=new Map,mi=new Map;function Pn(de,ee){try{de.container.addComponent(ee)}catch(Re){ce.debug(`Component ${ee.name} failed to register with FirebaseApp ${de.name}`,Re)}}function Xr(de,ee){de.container.addOrOverwriteComponent(ee)}function jr(de){const ee=de.name;if(mi.has(ee))return ce.debug(`There were multiple attempts to register component ${ee}.`),!1;mi.set(ee,de);for(const Re of tt.values())Pn(Re,de);return!0}function Bn(de,ee){const Re=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),de.container.getProvider(ee)}function As(de,ee,Re=nn){Bn(de,ee).clearInstance(Re)}function an(){mi.clear()}const Yt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Js{constructor(ee,Re,ft){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const Fi="9.22.1";function ou(de,ee={}){let Re=de;"object"!=typeof ee&&(ee={name:ee});const ft=Object.assign({name:nn,automaticDataCollectionEnabled:!1},ee),bt=ft.name;if("string"!=typeof bt||!bt)throw Yt.create("bad-app-name",{appName:String(bt)});if(Re||(Re=(0,ie.aH)()),!Re)throw Yt.create("no-options");const $t=tt.get(bt);if($t){if((0,ie.vZ)(Re,$t.options)&&(0,ie.vZ)(ft,$t.config))return $t;throw Yt.create("duplicate-app",{appName:bt})}const rn=new K.H0(bt);for(const er of mi.values())rn.addComponent(er);const cr=new Js(Re,ft,rn);return tt.set(bt,cr),cr}function jn(de=nn){const ee=tt.get(de);if(!ee&&de===nn&&(0,ie.aH)())return ou();if(!ee)throw Yt.create("no-app",{appName:de});return ee}function Ms(){return Array.from(tt.values())}function dn(de){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(de){const ee=de.name;tt.has(ee)&&(tt.delete(ee),yield Promise.all(de.container.getProviders().map(Re=>Re.delete())),de.isDeleted=!0)})).apply(this,arguments)}function kt(de,ee,Re){var ft;let bt=null!==(ft=Et[de])&&void 0!==ft?ft:de;Re&&(bt+=`-${Re}`);const $t=bt.match(/\s|\//),rn=ee.match(/\s|\//);if($t||rn){const cr=[`Unable to register library "${bt}" with version "${ee}":`];return $t&&cr.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),$t&&rn&&cr.push("and"),rn&&cr.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void ce.warn(cr.join(" "))}jr(new K.wA(`${bt}-version`,()=>({library:bt,version:ee}),"VERSION"))}function yi(de,ee){if(null!==de&&"function"!=typeof de)throw Yt.create("invalid-log-argument");(0,P.Am)(de,ee)}function Hn(de){(0,P.Ub)(de)}const vi="firebase-heartbeat-database",Li=1,B="firebase-heartbeat-store";let V=null;function q(){return V||(V=function ge(de,ee,{blocked:Re,upgrade:ft,blocking:bt,terminated:$t}={}){const rn=indexedDB.open(de,ee),cr=Pe(rn);return ft&&rn.addEventListener("upgradeneeded",er=>{ft(Pe(rn.result),er.oldVersion,er.newVersion,Pe(rn.transaction),er)}),Re&&rn.addEventListener("blocked",er=>Re(er.oldVersion,er.newVersion,er)),cr.then(er=>{$t&&er.addEventListener("close",()=>$t()),bt&&er.addEventListener("versionchange",tr=>bt(tr.oldVersion,tr.newVersion,tr))}).catch(()=>{}),cr}(vi,Li,{upgrade:(de,ee)=>{0===ee&&de.createObjectStore(B)}}).catch(de=>{throw Yt.create("idb-open",{originalErrorMessage:de.message})})),V}function X(){return(X=(0,d.Z)(function*(de){try{return yield(yield q()).transaction(B).objectStore(B).get(Wt(de))}catch(ee){if(ee instanceof ie.ZR)ce.warn(ee.message);else{const Re=Yt.create("idb-get",{originalErrorMessage:ee?.message});ce.warn(Re.message)}}})).apply(this,arguments)}function Qe(de,ee){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,d.Z)(function*(de,ee){try{const ft=(yield q()).transaction(B,"readwrite");yield ft.objectStore(B).put(ee,Wt(de)),yield ft.done}catch(Re){if(Re instanceof ie.ZR)ce.warn(Re.message);else{const ft=Yt.create("idb-set",{originalErrorMessage:Re?.message});ce.warn(ft.message)}}})).apply(this,arguments)}function Wt(de){return`${de.name}!${de.options.appId}`}class Gn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new Xi(Re),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var ee=this;return(0,d.Z)(function*(){const ft=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=Vt();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==bt&&!ee._heartbeatsCache.heartbeats.some($t=>$t.date===bt))return ee._heartbeatsCache.heartbeats.push({date:bt,agent:ft}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter($t=>{const rn=new Date($t.date).valueOf();return Date.now()-rn<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,d.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Re=Vt(),{heartbeatsToSend:ft,unsentEntries:bt}=function Xn(de,ee=1024){const Re=[];let ft=de.slice();for(const bt of de){const $t=Re.find(rn=>rn.agent===bt.agent);if($t){if($t.dates.push(bt.date),ds(Re)>ee){$t.dates.pop();break}}else if(Re.push({agent:bt.agent,dates:[bt.date]}),ds(Re)>ee){Re.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Re,unsentEntries:ft}}(ee._heartbeatsCache.heartbeats),$t=(0,ie.L)(JSON.stringify({version:2,heartbeats:ft}));return ee._heartbeatsCache.lastSentHeartbeatDate=Re,bt.length>0?(ee._heartbeatsCache.heartbeats=bt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),$t})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class Xi{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,d.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function me(de){return X.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Re=this;return(0,d.Z)(function*(){var ft;if(yield Re._canUseIndexedDBPromise){const $t=yield Re.read();return Qe(Re.app,{lastSentHeartbeatDate:null!==(ft=ee.lastSentHeartbeatDate)&&void 0!==ft?ft:$t.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Re=this;return(0,d.Z)(function*(){var ft;if(yield Re._canUseIndexedDBPromise){const $t=yield Re.read();return Qe(Re.app,{lastSentHeartbeatDate:null!==(ft=ee.lastSentHeartbeatDate)&&void 0!==ft?ft:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...ee.heartbeats]})}})()}}function ds(de){return(0,ie.L)(JSON.stringify({version:2,heartbeats:de})).length}!function bo(de){jr(new K.wA("platform-logger",ee=>new en(ee),"PRIVATE")),jr(new K.wA("heartbeat",ee=>new Gn(ee),"PRIVATE")),kt(pi,"0.9.11",de),kt(pi,"0.9.11","esm2017"),kt("fire-js","")}("")},4859:(wt,Ae,F)=>{F.d(Ae,{H0:()=>De,wA:()=>P});var d=F(5861),K=F(2090);class P{constructor(z,j,W){this.name=z,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ie="[DEFAULT]";class se{constructor(z,j){this.name=z,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const j=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(j)){const W=new K.BH;if(this.instancesDeferred.set(j,W),this.isInitialized(j)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:j});Be&&W.resolve(Be)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(z){var j;const W=this.normalizeInstanceIdentifier(z?.identifier),Be=null!==(j=z?.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Te){if(Be)return null;throw Te}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ye(pe){return"EAGER"===pe.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[j,W]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Be});W.resolve(Te)}catch{}}}}clearInstance(z=ie){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,d.Z)(function*(){const j=Array.from(z.instances.values());yield Promise.all([...j.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...j.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ie){return this.instances.has(z)}getOptions(z=ie){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:j={}}=z,W=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[Te,rt]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Te)&&rt.resolve(Be);return Be}onInit(z,j){var W;const Be=this.normalizeInstanceIdentifier(j),Te=null!==(W=this.onInitCallbacks.get(Be))&&void 0!==W?W:new Set;Te.add(z),this.onInitCallbacks.set(Be,Te);const rt=this.instances.get(Be);return rt&&z(rt,Be),()=>{Te.delete(z)}}invokeOnInitCallbacks(z,j){const W=this.onInitCallbacks.get(j);if(W)for(const Be of W)try{Be(z,j)}catch{}}getOrInitializeService({instanceIdentifier:z,options:j={}}){let W=this.instances.get(z);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=z,pe===ie?void 0:pe),options:j}),this.instances.set(z,W),this.instancesOptions.set(z,j),this.invokeOnInitCallbacks(W,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,W)}catch{}var pe;return W||null}normalizeInstanceIdentifier(z=ie){return this.component?this.component.multipleInstances?z:ie:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const j=this.getProvider(z.name);if(j.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);j.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const j=new se(z,this);return this.providers.set(z,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Ae,F)=>{F.d(Ae,{Am:()=>pe,Ub:()=>De,Yd:()=>ye,in:()=>K});const d=[];var K=(()=>((K=K||{})[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K))();const P={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ie=K.INFO,se={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ne=(z,j,...W)=>{if(j<z.logLevel)return;const Be=(new Date).toISOString(),Te=se[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Be}]  ${z.name}:`,...W)};class ye{constructor(j){this.name=j,this._logLevel=ie,this._logHandler=ne,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function De(z){d.forEach(j=>{j.setLogLevel(z)})}function pe(z,j){for(const W of d){let Be=null;j&&j.level&&(Be=P[j.level]),W.userLogHandler=null===z?null:(Te,rt,...pt)=>{const ue=pt.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");rt>=(Be??Te.logLevel)&&z({level:K[rt].toLowerCase(),message:ue,args:pt,type:Te.name})}}}},259:(wt,Ae,F)=>{F.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(6881);(0,d.registerVersion)("firebase","9.22.1","app")},9260:(wt,Ae,F)=>{F.d(Ae,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.22.1","app-compat")},2644:(wt,Ae,F)=>{F.r(Ae);var d=F(5861),K=F(3942),P=F(2090),ie=F(6881),se=F(655),ne=F(1877),ye=F(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const rt=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},pt=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ue=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new ne.Yd("@firebase/auth");function Pe(v,...f){Oe.logLevel<=ne.in.ERROR&&Oe.error(`Auth (${ie.SDK_VERSION}): ${v}`,...f)}function _e(v,...f){throw je(v,...f)}function ge(v,...f){return je(v,...f)}function Ne(v,f,m){const w=Object.assign(Object.assign({},pt()),{[f]:m});return new P.LL("auth","Firebase",w).create(f,{appName:v.name})}function Ee(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&_e(v,"argument-error"),Ne(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return ue.create(v,...f)}function re(v,f,...m){if(!v)throw je(f,...m)}function Ke(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Pe(f),new Error(f)}function en(v,f){v||Ke(f)}function vr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function pi(){return"http:"===Zs()||"https:"===Zs()}function Zs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ce{constructor(f,m){this.shortDelay=f,this.longDelay=m,en(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ce(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pi()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xe(v,f){en(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class qe{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ze=new Ce(3e4,6e4);function at(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function jt(v,f,m,w){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(v,f,m,w,S={}){return Rt(v,S,(0,d.Z)(function*(){let x={},U={};w&&("GET"===f?U=w:x={body:JSON.stringify(w)});const J=(0,P.xO)(Object.assign({key:v.config.apiKey},U)).slice(1),Me=yield v._getAdditionalHeaders();return Me["Content-Type"]="application/json",v.languageCode&&(Me["X-Firebase-Locale"]=v.languageCode),qe.fetch()(_r(v,v.config.apiHost,m,J),Object.assign({method:f,headers:Me,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Rt(v,f,m){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},ke),f);try{const S=new Br(v),x=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const U=yield x.json();if("needConfirmation"in U)throw wr(v,"account-exists-with-different-credential",U);if(x.ok&&!("errorMessage"in U))return U;{const J=x.ok?U.errorMessage:U.error.message,[Me,He]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw wr(v,"credential-already-in-use",U);if("EMAIL_EXISTS"===Me)throw wr(v,"email-already-in-use",U);if("USER_DISABLED"===Me)throw wr(v,"user-disabled",U);const ot=w[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Ne(v,ot,He);_e(v,ot)}}catch(S){if(S instanceof P.ZR)throw S;_e(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Jt(v,f,m,w){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(v,f,m,w,S={}){const x=yield jt(v,f,m,w,S);return"mfaPendingCredential"in x&&_e(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function _r(v,f,m,w){const S=`${f}${m}?${w}`;return v.config.emulator?xe(v.config,S):`${v.config.apiScheme}://${S}`}class Br{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ge(this.auth,"network-request-failed")),Ze.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wr(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const S=ge(v,f,w);return S.customData._tokenResponse=m,S}function Sn(){return(Sn=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function gi(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function nn(){return(nn=(0,d.Z)(function*(v,f=!1){const m=(0,P.m9)(v),w=yield m.getIdToken(f),S=tt(w);re(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const x="object"==typeof S.firebase?S.firebase:void 0,U=x?.sign_in_provider;return{claims:S,token:w,authTime:gi(Et(S.auth_time)),issuedAtTime:gi(Et(S.iat)),expirationTime:gi(Et(S.exp)),signInProvider:U||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(v){return 1e3*Number(v)}function tt(v){const[f,m,w]=v.split(".");if(void 0===f||void 0===m||void 0===w)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(m);return S?JSON.parse(S):(Pe("Failed to decode base64 JWT payload"),null)}catch(S){return Pe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Pn(v,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof P.ZR&&function jr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class Bn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class As{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=gi(this.lastLoginAt),this.creationTime=gi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(v){return ki.apply(this,arguments)}function ki(){return ki=(0,d.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),S=yield Pn(v,function Qu(v,f){return gt.apply(this,arguments)}(m,{idToken:w}));re(S?.users.length,m,"internal-error");const x=S.users[0];v._notifyReloadListener(x);const U=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?function ou(v){return v.map(f=>{var{providerId:m}=f,w=(0,se._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(x.providerUserInfo):[],J=function Fi(v,f){return[...v.filter(w=>!f.some(S=>S.providerId===w.providerId)),...f]}(v.providerData,U),ot=!!v.isAnonymous&&!(v.email&&x.passwordHash||J?.length),it={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:J,metadata:new As(x.createdAt,x.lastLoginAt),isAnonymous:ot};Object.assign(v,it)}),ki.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(v){const f=(0,P.m9)(v);yield an(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(v,f){const m=yield Rt(v,{},(0,d.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:x}=v.config,U=_r(v,S,"/v1/token",`key=${x}`),J=yield v._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",qe.fetch()(U,{method:"POST",headers:J,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){re(f.idToken,"internal-error"),re(typeof f.idToken<"u","internal-error"),re(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function mi(v){const f=tt(v);return re(f,"internal-error"),re(typeof f.exp<"u","internal-error"),re(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return re(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:x,expiresIn:U}=yield function jn(v,f){return Ms.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(S,x,Number(U))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:S,expirationTime:x}=m,U=new dn;return w&&(re("string"==typeof w,"internal-error",{appName:f}),U.refreshToken=w),S&&(re("string"==typeof S,"internal-error",{appName:f}),U.accessToken=S),x&&(re("number"==typeof x,"internal-error",{appName:f}),U.expirationTime=x),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new dn,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function $n(v,f){re("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class kt{constructor(f){var{uid:m,auth:w,stsTokenManager:S}=f,x=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new As(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield Pn(m,m.stsTokenManager.getToken(m.auth,f));return re(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function lr(v){return nn.apply(this,arguments)}(this,f)}reload(){return function Yt(v){return Js.apply(this,arguments)}(this)}_assign(f){this!==f&&(re(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new kt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let S=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield an(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield Pn(f,function Pi(v,f){return Sn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,S,x,U,J,Me,He,ot;const it=null!==(w=m.displayName)&&void 0!==w?w:void 0,On=null!==(S=m.email)&&void 0!==S?S:void 0,zi=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,ss=null!==(U=m.photoURL)&&void 0!==U?U:void 0,Pu=null!==(J=m.tenantId)&&void 0!==J?J:void 0,Wc=null!==(Me=m._redirectEventId)&&void 0!==Me?Me:void 0,Zc=null!==(He=m.createdAt)&&void 0!==He?He:void 0,ku=null!==(ot=m.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:ea,emailVerified:Ml,isAnonymous:Lm,providerData:mh,stsTokenManager:Vm}=m;re(ea&&Vm,f,"internal-error");const g_=dn.fromJSON(this.name,Vm);re("string"==typeof ea,f,"internal-error"),$n(it,f.name),$n(On,f.name),re("boolean"==typeof Ml,f,"internal-error"),re("boolean"==typeof Lm,f,"internal-error"),$n(zi,f.name),$n(ss,f.name),$n(Pu,f.name),$n(Wc,f.name),$n(Zc,f.name),$n(ku,f.name);const wp=new kt({uid:ea,auth:f,email:On,emailVerified:Ml,displayName:it,isAnonymous:Lm,photoURL:ss,phoneNumber:zi,tenantId:Pu,stsTokenManager:g_,createdAt:Zc,lastLoginAt:ku});return mh&&Array.isArray(mh)&&(wp.providerData=mh.map(m_=>Object.assign({},m_))),Wc&&(wp._redirectEventId=Wc),wp}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const S=new dn;S.updateFromServerResponse(m);const x=new kt({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:w});return yield an(x),x})()}}const yi=new Map;function Hn(v){en(v instanceof Function,"Expected a class definition");let f=yi.get(v);return f?(en(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,yi.set(v,f),f)}const Li=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var S=this;return(0,d.Z)(function*(){S.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const S=w.storage[m];return void 0===S?null:S})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function B(v,f,m){return`firebase:${v}:${f}:${m}`}class V{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:S,name:x}=this.auth;this.fullUserKey=B(this.userKey,S.apiKey,x),this.fullPersistenceKey=B("persistence",S.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?kt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new V(Hn(Li),f,w);const S=(yield Promise.all(m.map(function(){var He=(0,d.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return He.apply(this,arguments)}}()))).filter(He=>He);let x=S[0]||Hn(Li);const U=B(w,f.config.apiKey,f.name);let J=null;for(const He of m)try{const ot=yield He._get(U);if(ot){const it=kt._fromJSON(f,ot);He!==x&&(J=it),x=He;break}}catch{}const Me=S.filter(He=>He._shouldAllowMigration);return x._shouldAllowMigration&&Me.length?(x=Me[0],J&&(yield x._set(U,J.toJSON())),yield Promise.all(m.map(function(){var He=(0,d.Z)(function*(ot){if(ot!==x)try{yield ot._remove(U)}catch{}});return function(ot){return He.apply(this,arguments)}}())),new V(x,f,w)):new V(x,f,w)})()}}function q(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ye(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(me(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Jn(f))return"Blackberry";if(kn(f))return"Webos";if(X(f))return"Safari";if((f.includes("chrome/")||Qe(f))&&!f.includes("edge/"))return"Chrome";if(Wt(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function me(v=(0,P.z$)()){return/firefox\//i.test(v)}function X(v=(0,P.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qe(v=(0,P.z$)()){return/crios\//i.test(v)}function Ye(v=(0,P.z$)()){return/iemobile/i.test(v)}function Wt(v=(0,P.z$)()){return/android/i.test(v)}function Jn(v=(0,P.z$)()){return/blackberry/i.test(v)}function kn(v=(0,P.z$)()){return/webos/i.test(v)}function Gn(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ds(v=(0,P.z$)()){return Gn(v)||Wt(v)||kn(v)||Jn(v)||/windows phone/i.test(v)||Ye(v)}function de(v,f=[]){let m;switch(v){case"Browser":m=q((0,P.z$)());break;case"Worker":m=`${q((0,P.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ie.SDK_VERSION}/${w}`}function Re(){return(Re=(0,d.Z)(function*(v){return(yield jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ft(v,f){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(v,f){return jt(v,"GET","/v2/recaptchaConfig",at(v,f))})).apply(this,arguments)}function $t(v){return void 0!==v&&void 0!==v.getResponse}function rn(v){return void 0!==v&&void 0!==v.enterprise}class cr{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function tr(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=S=>{const x=ge("internal-error");x.customData=S,m(x)},w.type="text/javascript",w.charset="UTF-8",function er(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function va(v){return`__${v}${Math.floor(1e6*Math.random())}`}class kd{constructor(f){this.type="recaptcha-enterprise",this.auth=zn(f)}verify(f="verify",m=!1){var w=this;return(0,d.Z)(function*(){function x(){return x=(0,d.Z)(function*(J){if(!m){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var Me=(0,d.Z)(function*(He,ot){ft(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(it=>{if(void 0!==it.recaptchaKey){const On=new cr(it);return null==J.tenantId?J._agentRecaptchaConfig=On:J._tenantRecaptchaConfigs[J.tenantId]=On,He(On.siteKey)}ot(new Error("recaptcha Enterprise site key undefined"))}).catch(it=>{ot(it)})});return function(He,ot){return Me.apply(this,arguments)}}())}),x.apply(this,arguments)}function U(J,Me,He){const ot=window.grecaptcha;rn(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(J,{action:f}).then(it=>{Me(it)}).catch(()=>{Me("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,Me)=>{(function S(J){return x.apply(this,arguments)})(w.auth).then(He=>{if(!m&&rn(window.grecaptcha))U(He,J,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));tr("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{U(He,J,Me)}).catch(ot=>{Me(ot)})}}).catch(He=>{Me(He)})})})()}}function es(v,f,m){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(v,f,m,w=!1){const S=new kd(v);let x;try{x=yield S.verify(m)}catch{x=yield S.verify(m,!0)}const U=Object.assign({},f);return Object.assign(U,w?{captchaResp:x}:{captchaResponse:x}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class wa{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=x=>new Promise((U,J)=>{try{U(f(x))}catch(Me){J(Me)}});w.onAbort=m,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const S of m.queue)yield S(f),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const x of w)try{x()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Fd{constructor(f,m,w,S){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xs(this),this.idTokenSubscription=new Xs(this),this.beforeStateQueue=new wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=Hn(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,x;if(!w._deleted&&(w.persistenceManager=yield V.create(w,f),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const S=yield m.assertedPersistence.getCurrentUser();let x=S,U=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const J=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Me=x?._redirectEventId,He=yield m.tryRedirectSignIn(f);(!J||J===Me)&&He?.user&&(x=He.user,U=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(U)try{yield m.beforeStateQueue.runMiddleware(x)}catch(J){x=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(J))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return re(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield an(f)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ve(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,P.m9)(f):null;return w&&re(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&re(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(Hn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,d.Z)(function*(){const m=yield ft(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new cr(m);null==f.tenantId?f._agentRecaptchaConfig=w:f._tenantRecaptchaConfigs[f.tenantId]=w,w.emailPasswordEnabled&&new kd(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&Hn(f)||m._popupRedirectResolver;re(w,m,"argument-error"),m.redirectPersistenceManager=yield V.create(m,[Hn(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,S;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,S){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),U=this._isInitialized?Promise.resolve():this._initializationPromise;return re(U,this,"internal-error"),U.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,w,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const x=yield f._getAppCheckToken();return x&&(w["X-Firebase-AppCheck"]=x),w})()}_getAppCheckToken(){var f=this;return(0,d.Z)(function*(){var m;const w=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return w?.error&&function Ge(v,...f){Oe.logLevel<=ne.in.WARN&&Oe.warn(`Auth (${ie.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function zn(v){return(0,P.m9)(v)}class Xs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eo(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function ec(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class to{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ke("not implemented")}_getIdTokenResponse(f){return Ke("not implemented")}_linkToIdToken(f,m){return Ke("not implemented")}_getReauthenticationResolver(f){return Ke("not implemented")}}function sn(v,f){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:resetPassword",at(v,f))})).apply(this,arguments)}function $r(v,f){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",at(v,f))})).apply(this,arguments)}function Er(v,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithPassword",at(v,f))})).apply(this,arguments)}function tl(v,f){return au.apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:sendOobCode",at(v,f))})).apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(v,f){return tl(v,f)})).apply(this,arguments)}function Nt(v,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(v,f){return tl(v,f)})).apply(this,arguments)}function _i(v,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,d.Z)(function*(v,f){return tl(v,f)})).apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(v,f){return tl(v,f)})).apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",at(v,f))})).apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",at(v,f))})).apply(this,arguments)}class ro extends to{constructor(f,m,w,S=null){super("password",w),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new ro(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new ro(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){var w;switch(m.signInMethod){case"password":const S={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=f._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const x=yield es(f,S,"signInWithPassword");return Er(f,x)}return Er(f,S).catch(function(){var x=(0,d.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield es(f,S,"signInWithPassword");return Er(f,J)}return Promise.reject(U)});return function(U){return x.apply(this,arguments)}}());case"emailLink":return function Cn(v,f){return So.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:_e(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return $r(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ia(v,f){return Pt.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:_e(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function wi(v,f){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithIdp",at(v,f))})).apply(this,arguments)}class ei extends to{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ei(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):_e("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S}=m,x=(0,se._T)(m,["providerId","signInMethod"]);if(!w||!S)return null;const U=new ei(w,S);return U.idToken=x.idToken||void 0,U.accessToken=x.accessToken||void 0,U.secret=x.secret,U.nonce=x.nonce,U.pendingToken=x.pendingToken||null,U}_getIdTokenResponse(f){return wi(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,wi(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,wi(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,P.xO)(m)}return f}}function ti(){return(ti=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:sendVerificationCode",at(v,f))})).apply(this,arguments)}function tc(){return(tc=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",at(v,f))})).apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(v,f){const m=yield Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",at(v,f));if(m.temporaryProof)throw wr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const uu={USER_NOT_FOUND:"user-not-found"};function Ht(){return(Ht=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",at(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),uu)})).apply(this,arguments)}class Ui extends to{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ui({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ui({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Ao(v,f){return tc.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Mo(v,f){return Vi.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function nl(v,f){return Ht.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:x}=f;return w||m||S||x?new Ui({verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:x}):null}}class Ei{constructor(f){var m,w,S,x,U,J;const Me=(0,P.zd)((0,P.pd)(f)),He=null!==(m=Me.apiKey)&&void 0!==m?m:null,ot=null!==(w=Me.oobCode)&&void 0!==w?w:null,it=function Vd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Me.mode)&&void 0!==S?S:null);re(He&&ot&&it,"argument-error"),this.apiKey=He,this.operation=it,this.code=ot,this.continueUrl=null!==(x=Me.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(U=Me.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(J=Me.tenantId)&&void 0!==J?J:null}static parseLink(f){const m=function lu(v){const f=(0,P.zd)((0,P.pd)(v)).link,m=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||m||f||v}(f);try{return new Ei(m)}catch{return null}}}let No=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return ro._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const S=Ei.parseLink(w);return re(S,"argument-error"),ro._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ii{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ln extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class so extends Ln{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return re("providerId"in m&&"signInMethod"in m,"argument-error"),ei._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return re(f.idToken||f.accessToken,"argument-error"),ei._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return so.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return so.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:x,nonce:U,providerId:J}=f;if(!w&&!S&&!m&&!x||!J)return null;try{return new so(J)._credential({idToken:m,accessToken:w,nonce:U,pendingToken:x})}catch{return null}}}let ni=(()=>{class v extends Ln{constructor(){super("facebook.com")}static credential(m){return ei._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xr=(()=>{class v extends Ln{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ei._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:S}=m;if(!w&&!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),rl=(()=>{class v extends Ln{constructor(){super("github.com")}static credential(m){return ei._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Bi extends to{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return wi(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,wi(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,wi(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S,pendingToken:x}=m;return w&&S&&x&&w===S?new Bi(w,x):null}static _create(f,m){return new Bi(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ca extends Ii{constructor(f){re(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ca.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ca.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Bi.fromJSON(f);return re(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Bi._create(w,m)}catch{return null}}}let nc=(()=>{class v extends Ln{constructor(){super("twitter.com")}static credential(m,w){return ei._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=m;if(!w||!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function cu(v,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signUp",at(v,f))})).apply(this,arguments)}class ri{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,S=!1){return(0,d.Z)(function*(){const x=yield kt._fromIdTokenResponse(f,w,S),U=ba(w);return new ri({user:x,providerId:U,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const S=ba(w);return new ri({user:f,providerId:S,_tokenResponse:w,operationType:m})})()}}function ba(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Bd(){return(Bd=(0,d.Z)(function*(v){var f;const m=zn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new ri({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield cu(m,{returnSecureToken:!0}),S=yield ri._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class il extends P.ZR{constructor(f,m,w,S){var x;super(m.code,m.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,il.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,S){return new il(f,m,w,S)}}function kf(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?il._fromErrorAndOperation(v,x,f,w):x})}function Ff(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function fs(){return fs=(0,d.Z)(function*(v,f){const m=(0,P.m9)(v);yield du(!0,m,f);const{providerUserInfo:w}=yield function Ks(v,f){return Ys.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=Ff(w||[]);return m.providerData=m.providerData.filter(x=>S.has(x.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),fs.apply(this,arguments)}function rc(v,f){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(v,f,m=!1){const w=yield Pn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return ri._forOperation(v,"link",w)})).apply(this,arguments)}function du(v,f,m){return jd.apply(this,arguments)}function jd(){return(jd=(0,d.Z)(function*(v,f,m){yield an(f);const S=!1===v?"provider-already-linked":"no-such-provider";re(Ff(f.providerData).has(m)===v,f.auth,S)})).apply(this,arguments)}function sc(v,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(v,f,m=!1){const{auth:w}=v,S="reauthenticate";try{const x=yield Pn(v,kf(w,S,f,v),m);re(x.idToken,w,"internal-error");const U=tt(x.idToken);re(U,w,"internal-error");const{sub:J}=U;return re(v.uid===J,w,"user-mismatch"),ri._forOperation(v,S,x)}catch(x){throw"auth/user-not-found"===x?.code&&_e(w,"user-mismatch"),x}})).apply(this,arguments)}function $d(v,f){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,d.Z)(function*(v,f,m=!1){const w="signIn",S=yield kf(v,w,f),x=yield ri._fromIdTokenResponse(v,w,S);return m||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function oc(v,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(v,f){return $d(zn(v),f)})).apply(this,arguments)}function Gd(v,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(v,f){const m=(0,P.m9)(v);return yield du(!1,m,f.providerId),rc(m,f)})).apply(this,arguments)}function bn(v,f){return uc.apply(this,arguments)}function uc(){return(uc=(0,d.Z)(function*(v,f){return sc((0,P.m9)(v),f)})).apply(this,arguments)}function Lf(){return(Lf=(0,d.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:signInWithCustomToken",at(v,f))})).apply(this,arguments)}function Ns(){return Ns=(0,d.Z)(function*(v,f){const m=zn(v),w=yield function fm(v,f){return Lf.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),S=yield ri._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(S.user),S}),Ns.apply(this,arguments)}class sl{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?ii._fromServerResponse(f,m):"totpInfo"in m?fu._fromServerResponse(f,m):_e(f,"internal-error")}}class ii extends sl{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new ii(m)}}class fu extends sl{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new fu(m)}}function An(v,f,m){var w;re((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),re(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(re(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(re(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function pu(){return pu=(0,d.Z)(function*(v,f,m){var w;const S=zn(v),x={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const U=yield es(S,x,"getOobCode",!0);m&&An(S,U,m),yield Nt(S,U)}else m&&An(S,x,m),yield Nt(S,x).catch(function(){var U=(0,d.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Me=yield es(S,x,"getOobCode",!0);m&&An(S,Me,m),yield Nt(S,Me)}});return function(J){return U.apply(this,arguments)}}())}),pu.apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(v,f,m){yield sn((0,P.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Di(){return Di=(0,d.Z)(function*(v,f){yield function In(v,f){return el.apply(this,arguments)}((0,P.m9)(v),{oobCode:f})}),Di.apply(this,arguments)}function zd(v,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(v,f){const m=(0,P.m9)(v),w=yield sn(m,{oobCode:f}),S=w.requestType;switch(re(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(w.mfaInfo,m,"internal-error");default:re(w.email,m,"internal-error")}let x=null;return w.mfaInfo&&(x=sl._fromServerResponse(zn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:S}})).apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(v,f){const{data:m}=yield zd((0,P.m9)(v),f);return m.email})).apply(this,arguments)}function ol(){return ol=(0,d.Z)(function*(v,f,m){var w;const S=zn(v),x={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const He=yield es(S,x,"signUpPassword");U=cu(S,He)}else U=cu(S,x).catch(function(){var He=(0,d.Z)(function*(ot){if("auth/missing-recaptcha-token"===ot.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const it=yield es(S,x,"signUpPassword");return cu(S,it)}return Promise.reject(ot)});return function(ot){return He.apply(this,arguments)}}());const J=yield U.catch(He=>Promise.reject(He)),Me=yield ri._fromIdTokenResponse(S,"signIn",J);return yield S._updateCurrentUser(Me.user),Me}),ol.apply(this,arguments)}function dc(){return dc=(0,d.Z)(function*(v,f,m){var w;const S=zn(v),x={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function U(J,Me){re(Me.handleCodeInApp,S,"argument-error"),Me&&An(S,J,Me)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const J=yield es(S,x,"getOobCode",!0);U(J,m),yield _i(S,J)}else U(x,m),yield _i(S,x).catch(function(){var J=(0,d.Z)(function*(Me){if("auth/missing-recaptcha-token"!==Me.code)return Promise.reject(Me);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield es(S,x,"getOobCode",!0);U(He,m),yield _i(S,He)}});return function(Me){return J.apply(this,arguments)}}())}),dc.apply(this,arguments)}function qd(){return(qd=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v),S=No.credentialWithLink(f,m||vr());return re(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),oc(w,S)})).apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:createAuthUri",at(v,f))})).apply(this,arguments)}function fc(){return fc=(0,d.Z)(function*(v,f){const w={identifier:f,continueUri:pi()?vr():"http://localhost"},{signinMethods:S}=yield function al(v,f){return hc.apply(this,arguments)}((0,P.m9)(v),w);return S||[]}),fc.apply(this,arguments)}function _u(){return _u=(0,d.Z)(function*(v,f){const m=(0,P.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&An(m.auth,S,f);const{email:x}=yield function qn(v,f){return Xe.apply(this,arguments)}(m.auth,S);x!==v.email&&(yield v.reload())}),_u.apply(this,arguments)}function Aa(){return Aa=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&An(w.auth,x,m);const{email:U}=yield function Nr(v,f){return no.apply(this,arguments)}(w.auth,x);U!==v.email&&(yield v.reload())}),Aa.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function wu(){return wu=(0,d.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,P.m9)(v),x={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},U=yield Pn(w,function Zd(v,f){return ji.apply(this,arguments)}(w.auth,x));w.displayName=U.displayName||null,w.photoURL=U.photoUrl||null;const J=w.providerData.find(({providerId:Me})=>"password"===Me);J&&(J.displayName=w.displayName,J.photoURL=w.photoURL),yield w._updateTokensIfNecessary(U)}),wu.apply(this,arguments)}function ul(v,f,m){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(v,f,m){const{auth:w}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const U=yield Pn(v,$r(w,x));yield v._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class oo{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Ma extends oo{constructor(f,m,w,S){super(f,m,w),this.username=S}}class Hr extends oo{constructor(f,m){super(f,"facebook.com",m)}}class ll extends Ma{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Eu extends oo{constructor(f,m){super(f,"google.com",m)}}class mc extends Ma{constructor(f,m,w){super(f,"twitter.com",m,w)}}function $i(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function jf(v){var f,m;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const U=null===(m=null===(f=tt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(U)return new oo(x,"anonymous"!==U&&"custom"!==U?U:null)}if(!w)return null;switch(w){case"facebook.com":return new Hr(x,S);case"github.com":return new ll(x,S);case"google.com":return new Eu(x,S);case"twitter.com":return new mc(x,S,v.screenName||null);case"custom":case"anonymous":return new oo(x,null);default:return new oo(x,w,S)}}(m)}class xs{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new xs("enroll",f,m)}static _fromMfaPendingCredential(f){return new xs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return xs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return xs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Po{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=zn(f),S=m.customData._serverResponse,x=(S.mfaInfo||[]).map(J=>sl._fromServerResponse(w,J));re(S.mfaPendingCredential,w,"internal-error");const U=xs._fromMfaPendingCredential(S.mfaPendingCredential);return new Po(U,x,function(){var J=(0,d.Z)(function*(Me){const He=yield Me._process(w,U);delete S.mfaInfo,delete S.mfaPendingCredential;const ot=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(m.operationType){case"signIn":const it=yield ri._fromIdTokenResponse(w,m.operationType,ot);return yield w._updateCurrentUser(it.user),it;case"reauthenticate":return re(m.user,w,"internal-error"),ri._forOperation(m.user,m.operationType,ot);default:_e(w,"internal-error")}});return function(Me){return J.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}class Iu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>sl._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Iu(f)}getSession(){var f=this;return(0,d.Z)(function*(){return xs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const S=f,x=yield w.getSession(),U=yield Pn(w.user,S._process(w.user.auth,x,m));return yield w.user._updateTokensIfNecessary(U),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const w="string"==typeof f?f:f.uid,S=yield m.user.getIdToken();try{const x=yield Pn(m.user,function qf(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",at(v,f))}(m.user.auth,{idToken:S,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:U})=>U!==w),yield m.user._updateTokensIfNecessary(x),yield m.user.reload()}catch(x){throw x}})()}}const be=new WeakMap,ko="__sak";class wc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ko,"1"),this.storage.removeItem(ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rs=(()=>{class v extends wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Or(){const v=(0,P.z$)();return X(v)||Gn(v)}()&&function bo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),x=this.localCache[w];S!==x&&m(w,x,S)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((J,Me,He)=>{this.notifyListeners(J,He)});const S=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(S);if(m.newValue!==J)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!w)return}const x=()=>{const J=this.storage.getItem(S);!w&&this.localCache[S]===J||this.notifyListeners(S,J)},U=this.storage.getItem(S);!function Xi(){return(0,P.w1)()&&10===document.documentMode}()||U===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var S=()=>super._set,x=this;return(0,d.Z)(function*(){yield S().call(x,m,w),x.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,S=this;return(0,d.Z)(function*(){const x=yield w().call(S,m);return S.localCache[m]=JSON.stringify(x),x})()}_remove(m){var w=()=>super._remove,S=this;return(0,d.Z)(function*(){yield w().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),uo=(()=>{class v extends wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let fl=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(x=>x.isListeningto(m));if(w)return w;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const S=m,{eventId:x,eventType:U,data:J}=S.data,Me=w.handlersMap[U];if(!Me?.size)return;S.ports[0].postMessage({status:"ack",eventId:x,eventType:U});const He=Array.from(Me).map(function(){var it=(0,d.Z)(function*(On){return On(S.origin,J)});return function(On){return it.apply(this,arguments)}}()),ot=yield function i_(v){return Promise.all(v.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:x,eventType:U,response:ot})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function dr(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class Lo{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var S=this;return(0,d.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let U,J;return new Promise((Me,He)=>{const ot=dr("",20);x.port1.start();const it=setTimeout(()=>{He(new Error("unsupported_event"))},w);J={messageChannel:x,onMessage(On){const zi=On;if(zi.data.eventId===ot)switch(zi.data.status){case"ack":clearTimeout(it),U=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Me(zi.data.response);break;default:clearTimeout(it),clearTimeout(U),He(new Error("invalid_response"))}}},S.handlers.add(J),x.port1.addEventListener("message",J.onMessage),S.target.postMessage({eventType:f,eventId:ot,data:m},[x.port2])}).finally(()=>{J&&S.removeMessageHandler(J)})})()}}function Mn(){return window}function gs(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function pl(){return(pl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gl="firebaseLocalStorageDb",xa="firebaseLocalStorage",Ra="fbase_key";class Oa{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ml(v,f){return v.transaction([xa],f?"readwrite":"readonly").objectStore(xa)}function Dc(){const v=indexedDB.open(gl,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(xa,{keyPath:Ra})}catch(S){m(S)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(xa)?f(w):(w.close(),yield function Ic(){const v=indexedDB.deleteDatabase(gl);return new Oa(v).toPromise()}(),f(yield Dc()))}))})}function Du(v,f,m){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(v,f,m){const w=ml(v,!0).put({[Ra]:f,value:m});return new Oa(w).toPromise()})).apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(v,f){const m=ml(v,!1).get(f),w=yield new Oa(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function eh(v,f){const m=ml(v,!0).delete(f);return new Oa(m).toPromise()}const hn=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Dc()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const x=yield w._openDb();return yield m(x)}catch(x){if(S++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return gs()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=fl._getInstance(function nr(){return gs()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(S,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(S,x){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(S,x){return["keyChanged"]});return function(S,x){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,S;if(m.activeServiceWorker=yield function Wf(){return pl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Lo(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);x&&null!==(w=x[0])&&void 0!==w&&w.fulfilled&&null!==(S=x[0])&&void 0!==S&&S.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ec(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Dc();return yield Du(m,ko,"1"),yield eh(m,ko),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(x=>Du(x,m,w)),S.localCache[m]=w,S.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const S=yield w._withRetries(x=>function bu(v,f){return Hi.apply(this,arguments)}(x,m));return w.localCache[m]=S,S})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(S=>eh(S,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(U=>{const J=ml(U,!1).getAll();return new Oa(J).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const S=[],x=new Set;for(const{fbase_key:U,value:J}of w)x.add(U),JSON.stringify(m.localCache[U])!==JSON.stringify(J)&&(m.notifyListeners(U,J),S.push(U));for(const U of Object.keys(m.localCache))m.localCache[U]&&!x.has(U)&&(m.notifyListeners(U,null),S.push(U));return S})()}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Pa=1e12;class yl{constructor(f){this.auth=f,this.counter=Pa,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Os(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Pa;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Pa))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||Pa))||void 0===w||w.execute(),""})()}}class Os{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;re(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mm(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bo=va("rcb"),vl=new Ce(3e4,6e4);class _l{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Mn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return re(function Cc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&$t(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((w,S)=>{const x=Mn().setTimeout(()=>{S(ge(f,"network-request-failed"))},vl.get());Mn()[Bo]=()=>{Mn().clearTimeout(x),delete Mn()[Bo];const J=Mn().grecaptcha;if(!J||!$t(J))return void S(ge(f,"internal-error"));const Me=J.render;J.render=(He,ot)=>{const it=Me(He,ot);return this.counter++,it},this.hostLanguage=m,w(J)},tr(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Bo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),S(ge(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Mn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jf{load(f){return(0,d.Z)(function*(){return new yl(f)})()}clearedOneInstance(){}}const bc="recaptcha",Tu={theme:"light",type:"image"};class ka{constructor(f,m=Object.assign({},Tu),w){this.parameters=m,this.type=bc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(w),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jf:new _l,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(x=>{const U=J=>{J&&(f.tokenChangeListeners.delete(U),x(J))};f.tokenChangeListeners.add(U),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=Mn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){re(pi()&&!gs(),f.auth,"internal-error"),yield function ym(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function ee(v){return Re.apply(this,arguments)}(f.auth);re(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ui._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function lo(){return(lo=(0,d.Z)(function*(v,f,m){const w=zn(v),S=yield Zn(w,f,(0,P.m9)(m));return new Tc(S,x=>oc(w,x))})).apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v);yield du(!1,w,"phone");const S=yield Zn(w.auth,f,(0,P.m9)(m));return new Tc(S,x=>Gd(w,x))})).apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v),S=yield Zn(w.auth,f,(0,P.m9)(m));return new Tc(S,x=>bn(w,x))})).apply(this,arguments)}function Zn(v,f,m){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,d.Z)(function*(v,f,m){var w;const S=yield m.verify();try{let x;if(re("string"==typeof S,v,"argument-error"),re(m.type===bc,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const U=x.session;if("phoneNumber"in x)return re("enroll"===U.type,v,"internal-error"),(yield function ao(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:start",at(v,f))}(v,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{re("signin"===U.type,v,"internal-error");const J=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return re(J,v,"missing-multi-factor-info"),(yield function Kf(v,f){return jt(v,"POST","/v2/accounts/mfaSignIn:start",at(v,f))}(v,{mfaPendingCredential:U.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Da(v,f){return ti.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:S});return U}}finally{m._reset()}}),Pr.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(v,f){yield rc((0,P.m9)(v),f)})).apply(this,arguments)}let Ps=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=zn(m)}verifyPhoneNumber(m,w){return Zn(this.auth,m,(0,P.m9)(w))}static credential(m,w){return Ui._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:S}=m;return w&&S?Ui._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ms(v,f){return f?Hn(f):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Gi extends to{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return wi(f,this._buildIdpRequest())}_linkToIdToken(f,m){return wi(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return wi(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Ac(v){return $d(v.auth,new Gi(v),v.bypassAuthState)}function Ho(v){const{auth:f,user:m}=v;return re(m,f,"internal-error"),sc(m,new Gi(v),v.bypassAuthState)}function Ut(v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(v){const{auth:f,user:m}=v;return re(m,f,"internal-error"),rc(m,new Gi(v),v.bypassAuthState)})).apply(this,arguments)}class Mc{constructor(f,m,w,S,x=!1){this.auth=f,this.resolver=w,this.user=S,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,S){f.pendingPromise={resolve:w,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(w,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:x,tenantId:U,error:J,type:Me}=f;if(J)return void m.reject(J);const He={auth:m.auth,requestUri:w,sessionId:S,tenantId:U||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Me)(He))}catch(ot){m.reject(ot)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return Ut;case"reauthViaPopup":case"reauthViaRedirect":return Ho;default:_e(this.auth,"internal-error")}}resolve(f){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const si=new Ce(2e3,1e4);function br(){return(br=(0,d.Z)(function*(v,f,m){const w=zn(v);Ee(v,f,Ii);const S=ms(w,m);return new wl(w,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v);Ee(w.auth,f,Ii);const S=ms(w.auth,m);return new wl(w.auth,"reauthViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}function Su(){return(Su=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v);Ee(w.auth,f,Ii);const S=ms(w.auth,m);return new wl(w.auth,"linkViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}let wl=(()=>{class v extends Mc{constructor(m,w,S,x,U){super(m,w,x,U),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return re(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){en(1===m.filter.length,"Popup operations only handle one event");const w=dr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(ge(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,si.get())};m()}}return v.currentPopupAction=null,v})();const zo="pendingRedirect",ks=new Map;class _m extends Mc{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=ks.get(m.auth._key());if(!w){try{const x=(yield function co(v,f){return is.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(x)}catch(S){w=()=>Promise.reject(S)}ks.set(m.auth._key(),w)}return m.bypassAuthState||ks.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const S=yield w.auth._redirectUserForId(f.eventId);if(S)return w.user=S,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function is(){return(is=(0,d.Z)(function*(v,f){const m=Tr(f),w=nh(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(m));return yield w._remove(m),S})).apply(this,arguments)}function xc(v,f){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,d.Z)(function*(v,f){return nh(v)._set(Tr(f),"true")})).apply(this,arguments)}function Gr(v,f){ks.set(v._key(),f)}function nh(v){return Hn(v._redirectPersistence)}function Tr(v){return B(zo,v.config.apiKey,v.name)}function Va(v,f,m){return function rh(v,f,m){return Kn.apply(this,arguments)}(v,f,m)}function Kn(){return(Kn=(0,d.Z)(function*(v,f,m){const w=zn(v);Ee(v,f,Ii),yield w._initializationPromise;const S=ms(w,m);return yield xc(S,w),S._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function ho(v,f,m){return function Fs(v,f,m){return hr.apply(this,arguments)}(v,f,m)}function hr(){return(hr=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v);Ee(w.auth,f,Ii),yield w.auth._initializationPromise;const S=ms(w.auth,m);yield xc(S,w.auth);const x=yield Vs(w);return S._openRedirect(w.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Yn(v,f,m){return function El(v,f,m){return Ua.apply(this,arguments)}(v,f,m)}function Ua(){return(Ua=(0,d.Z)(function*(v,f,m){const w=(0,P.m9)(v);Ee(w.auth,f,Ii),yield w.auth._initializationPromise;const S=ms(w.auth,m);yield du(!1,w,f.providerId),yield xc(S,w.auth);const x=yield Vs(w);return S._openRedirect(w.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(v,f){return yield zn(v)._initializationPromise,fo(v,f,!1)})).apply(this,arguments)}function fo(v,f){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(v,f,m=!1){const w=zn(v),S=ms(w,f),U=yield new _m(w,S,m).execute();return U&&!m&&(delete U.user._redirectEventId,yield w._persistUserIfCurrent(U.user),yield w._setRedirectUser(null,f)),U})).apply(this,arguments)}function Vs(v){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(v){const f=dr(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Nu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Dl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return po(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!po(f)){const S=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ge(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oc(f))}saveEventToCache(f){this.cachedEventUids.add(Oc(f)),this.lastProcessedEventTime=Date.now()}}function Oc(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function po({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Gt(v){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(v,f={}){return jt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const wm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ys=/^https?/;function rr(){return(rr=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Gt(v);for(const m of f)try{if(zr(m))return}catch{}_e(v,"unauthorized-domain")})).apply(this,arguments)}function zr(v){const f=vr(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const U=new URL(v);return""===U.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&U.hostname===w}if(!ys.test(m))return!1;if(wm.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Pc=new Ce(3e4,6e4);function ja(){const v=Mn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Cl=null;const tp=new Ce(5e3,15e3),s_="__/auth/iframe",qr="emulator/auth/iframe",kc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Em(v){const f=v.config;re(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?xe(f,qr):`https://${v.config.authDomain}/${s_}`,w={apiKey:f.apiKey,appName:v.name,v:ie.SDK_VERSION},S=Wo.get(v.config.apiHost);S&&(w.eid=S);const x=v._getFrameworks();return x.length&&(w.fw=x.join(",")),`${m}?${(0,P.xO)(w).slice(1)}`}function b(){return b=(0,d.Z)(function*(v){const f=yield function qo(v){return Cl=Cl||function fr(v){return new Promise((f,m)=>{var w,S,x;function U(){ja(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ja(),m(ge(v,"network-request-failed"))},timeout:Pc.get()})}if(null!==(S=null===(w=Mn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(x=Mn().gapi)||void 0===x||!x.load){const J=va("iframefcb");return Mn()[J]=()=>{gapi.load?U():m(ge(v,"network-request-failed"))},tr(`https://apis.google.com/js/api.js?onload=${J}`).catch(Me=>m(Me))}U()}}).catch(f=>{throw Cl=null,f})}(v),Cl}(v),m=Mn().gapi;return re(m,v,"internal-error"),f.open({where:document.body,url:Em(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kc,dontclear:!0},w=>new Promise(function(){var S=(0,d.Z)(function*(x,U){yield w.restyle({setHideOnLeave:!1});const J=ge(v,"network-request-failed"),Me=Mn().setTimeout(()=>{U(J)},tp.get());function He(){Mn().clearTimeout(Me),x(w)}w.ping(He).then(He,()=>{U(J)})});return function(x,U){return S.apply(this,arguments)}}()))}),b.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ze{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ct="__/auth/handler",St="emulator/auth/handler",Fr=encodeURIComponent("fac");function Rn(v,f,m,w,S,x){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(v,f,m,w,S,x){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const U={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:ie.SDK_VERSION,eventId:S};if(f instanceof Ii){f.setDefaultLanguage(v.languageCode),U.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(U.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ot,it]of Object.entries(x||{}))U[ot]=it}if(f instanceof Ln){const ot=f.getScopes().filter(it=>""!==it);ot.length>0&&(U.scopes=ot.join(","))}v.tenantId&&(U.tid=v.tenantId);const J=U;for(const ot of Object.keys(J))void 0===J[ot]&&delete J[ot];const Me=yield v._getAppCheckToken(),He=Me?`#${Fr}=${encodeURIComponent(Me)}`:"";return`${function Ko({config:v}){return v.emulator?xe(v,St):`https://${v.authDomain}/${Ct}`}(v)}?${(0,P.xO)(J).slice(1)}${He}`})).apply(this,arguments)}const bi="webStorageSupport",vs=class Ti{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=fo,this._overrideRedirectResult=Gr}_openPopup(f,m,w,S){var x=this;return(0,d.Z)(function*(){var U;en(null===(U=x.eventManagers[f._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const J=yield Rn(f,m,w,vr(),S);return function $e(v,f,m,w=500,S=600){const x=Math.max((window.screen.availHeight-S)/2,0).toString(),U=Math.max((window.screen.availWidth-w)/2,0).toString();let J="";const Me=Object.assign(Object.assign({},M),{width:w.toString(),height:S.toString(),top:x,left:U}),He=(0,P.z$)().toLowerCase();m&&(J=Qe(He)?"_blank":m),me(He)&&(f=f||"http://localhost",Me.scrollbars="yes");const ot=Object.entries(Me).reduce((On,[zi,ss])=>`${On}${zi}=${ss},`,"");if(function Xn(v=(0,P.z$)()){var f;return Gn(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(He)&&"_self"!==J)return function dt(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",J),new ze(null);const it=window.open(f||"",J,ot);re(it,v,"popup-blocked");try{it.focus()}catch{}return new ze(it)}(f,J,dr())})()}_openRedirect(f,m,w,S){var x=this;return(0,d.Z)(function*(){return yield x._originValidation(f),function Vo(v){Mn().location.href=v}(yield Rn(f,m,w,vr(),S)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:x}=this.eventManagers[m];return S?Promise.resolve(S):(en(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function I(v){return b.apply(this,arguments)}(f),S=new Nu(f);return w.register("authEvent",x=>(re(x?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=w,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(bi,{type:bi},S=>{var x;const U=null===(x=S?.[0])||void 0===x?void 0:x[bi];void 0!==U&&m(!!U),_e(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ep(v){return rr.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return ds()||X()||Gn()}};class ih{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ke("unexpected MultiFactorSessionType")}}}class $a extends ih{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new $a(f)}_finalizeEnroll(f,m,w){return function Gf(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",at(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function gm(v,f){return jt(v,"POST","/v2/accounts/mfaSignIn:finalize",at(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fc=(()=>{class v{constructor(){}static assertion(m){return $a._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var o_="@firebase/auth";class a_{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{f(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xu(){return window}(0,P.Pz)("authIdTokenMaxAge"),function Lc(v){(0,ie._registerComponent)(new ye.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),x=f.getProvider("app-check-internal"),{apiKey:U,authDomain:J}=w.options;re(U&&!U.includes(":"),"invalid-api-key",{appName:w.name});const Me={apiKey:U,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(v)},He=new Fd(w,S,x,Me);return function Of(v,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(Hn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,f?.popupRedirectResolver)}(He,m),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ye.wA("auth-internal",f=>{const m=zn(f.getProvider("auth").getImmediate());return new a_(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(o_,"0.23.2",function u_(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ie.registerVersion)(o_,"0.23.2","esm2017")}("Browser");function Ru(){return Ru=(0,d.Z)(function*(v,f,m){var w;const{BuildInfo:S}=xu();en(f.sessionId,"AuthEvent did not contain a session ID");const x=yield function TE(v){return ap.apply(this,arguments)}(f.sessionId),U={};return Gn()?U.ibi=S.packageName:Wt()?U.apn=S.packageName:_e(v,"operation-not-supported-in-this-environment"),S.displayName&&(U.appDisplayName=S.displayName),U.sessionId=x,Rn(v,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,U)}),Ru.apply(this,arguments)}function ip(){return(ip=(0,d.Z)(function*(v){const{BuildInfo:f}=xu(),m={};Gn()?m.iosBundleId=f.packageName:Wt()?m.androidPackageName=f.packageName:_e(v,"operation-not-supported-in-this-environment"),yield Gt(v,m)})).apply(this,arguments)}function Tm(){return(Tm=(0,d.Z)(function*(v,f,m){const{cordova:w}=xu();let S=()=>{};try{yield new Promise((x,U)=>{let J=null;function Me(){var it;x();const On=null===(it=w.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof On&&On(),"function"==typeof m?.close&&m.close()}function He(){J||(J=window.setTimeout(()=>{U(ge(v,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===document?.visibilityState&&He()}f.addPassiveListener(Me),document.addEventListener("resume",He,!1),Wt()&&document.addEventListener("visibilitychange",ot,!1),S=()=>{f.removePassiveListener(Me),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",ot,!1),J&&window.clearTimeout(J)}})}finally{S()}})).apply(this,arguments)}function ap(){return(ap=(0,d.Z)(function*(v){const f=function Uc(v){if(en(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),m=new Uint8Array(f);for(let w=0;w<v.length;w++)m[w]=v.charCodeAt(w);return m}(v),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Bc extends Nu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function uh(v){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(v){const f=yield ws()._get(Si(v));return f&&(yield ws()._remove(Si(v))),f})).apply(this,arguments)}function bl(){const v=[];for(let m=0;m<20;m++){const w=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(w))}return v.join("")}function ws(){return Hn(Rs)}function Si(v){return B("authEvent",v.config.apiKey,v.name)}function lh(v){if(!v?.includes("?"))return{};const[f,...m]=v.split("?");return(0,P.zd)(m.join("?"))}const d_=class cp{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fo,this._overrideRedirectResult=Gr}_initialize(f){var m=this;return(0,d.Z)(function*(){const w=f._key();let S=m.eventManagers.get(w);return S||(S=new Bc(f),m.eventManagers.set(w,S),m.attachCallbackListeners(f,S)),S})()}_openPopup(f){_e(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,S){var x=this;return(0,d.Z)(function*(){!function bE(v){var f,m,w,S,x,U,J,Me,He,ot;const it=xu();re("function"==typeof(null===(f=it?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(m=it?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(x=null===(S=null===(w=it?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Me=null===(J=null===(U=it?.cordova)||void 0===U?void 0:U.plugins)||void 0===J?void 0:J.browsertab)||void 0===Me?void 0:Me.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(ot=null===(He=it?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===ot?void 0:ot.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const U=yield x._initialize(f);yield U.initialized(),U.resetRedirect(),function Au(){ks.clear()}(),yield x._originValidation(f);const J=function Sm(v,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:bl(),postBody:null,tenantId:v.tenantId,error:ge(v,"no-auth-event")}}(f,w,S);yield function up(v,f){return ws()._set(Si(v),f)}(f,J);const Me=yield function Vc(v,f,m){return Ru.apply(this,arguments)}(f,J,m),He=yield function sp(v){const{cordova:f}=xu();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let S=null;w?f.plugins.browsertab.openUrl(v):S=f.InAppBrowser.open(v,function Vt(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(S)})})}(Me);return function op(v,f,m){return Tm.apply(this,arguments)}(f,U,He)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function c_(v){return ip.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:S,BuildInfo:x}=xu(),U=setTimeout((0,d.Z)(function*(){yield uh(f),m.onEvent(Mm())}),500),J=function(){var ot=(0,d.Z)(function*(it){clearTimeout(U);const On=yield uh(f);let zi=null;On&&it?.url&&(zi=function Us(v,f){var m,w;const S=function lp(v){const f=lh(v),m=f.link?decodeURIComponent(f.link):void 0,w=lh(m).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return lh(S).link||S||w||m||v}(f);if(S.includes("/__/auth/callback")){const x=lh(S),U=x.firebaseError?function jc(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,J=null===(w=null===(m=U?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Me=J?ge(J):null;return Me?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(On,it.url)),m.onEvent(zi||Mm())});return function(On){return ot.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,J);const Me=S,He=`${x.packageName.toLowerCase()}://`;xu().handleOpenURL=function(){var ot=(0,d.Z)(function*(it){if(it.toLowerCase().startsWith(He)&&J({url:it}),"function"==typeof Me)try{Me(it)}catch(On){console.error(On)}});return function(it){return ot.apply(this,arguments)}}()}};function Mm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ge("no-auth-event")}}function Lr(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function ch(v=(0,P.z$)()){return!("file:"!==Lr()&&"ionic:"!==Lr()&&"capacitor:"!==Lr()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function $c(){try{const v=self.localStorage,f=dr();if(v)return v.setItem(f,"1"),v.removeItem(f),!function hp(v=(0,P.z$)()){return function oi(){return(0,P.w1)()&&11===document?.documentMode}()||function Qo(v=(0,P.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,P.hl)()}catch{return Hc()&&(0,P.hl)()}return!1}function Hc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Es(){return(function dp(){return"http:"===Lr()||"https:"===Lr()}()||(0,P.ru)()||ch())&&!function xm(){return(0,P.b$)()||(0,P.UG)()}()&&$c()&&!Hc()}function Ou(){return ch()&&typeof document<"u"}function dh(){return(dh=(0,d.Z)(function*(){return!!Ou()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Vr={LOCAL:"local",NONE:"none",SESSION:"session"},Tl=re,hh="persistence";function fh(v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(v){yield v._initializationPromise;const f=ph(),m=B(hh,v.config.apiKey,v.name);f&&f.setItem(m,v._getPersistence())})).apply(this,arguments)}function ph(){var v;try{return(null===(v=function Rm(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Gc=re;class Is{constructor(){this.browserResolver=Hn(vs),this.cordovaResolver=Hn(d_),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=fo,this._overrideRedirectResult=Gr}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,S){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,m,w,S)})()}_openRedirect(f,m,w,S){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,m,w,S)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ou()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function fp(){return dh.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function pp(v){return v.unwrap()}function zc(v){return Ha(v)}function Ha(v){const{_tokenResponse:f}=v instanceof P.ZR?v.customData:v;if(!f)return null;if(!(v instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ps.credentialFromResult(v);const m=f.providerId;if(!m||m===pe.PASSWORD)return null;let w;switch(m){case pe.GOOGLE:w=xr;break;case pe.FACEBOOK:w=ni;break;case pe.GITHUB:w=rl;break;case pe.TWITTER:w=nc;break;default:const{oauthIdToken:S,oauthAccessToken:x,oauthTokenSecret:U,pendingToken:J,nonce:Me}=f;return x||U||S||J?J?m.startsWith("saml.")?Bi._create(m,J):ei._fromParams({providerId:m,signInMethod:m,pendingToken:J,idToken:S,accessToken:x}):new so(m).credential({idToken:S,accessToken:x,rawNonce:Me}):null}return v instanceof P.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Wr(v,f){return f.catch(m=>{throw m instanceof P.ZR&&function Pm(v,f){var m;const w=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new km(v,function dl(v,f){var m;const w=(0,P.m9)(v),S=f;return re(f.customData.operationType,w,"argument-error"),re(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Po._fromError(w,S)}(v,f));else if(w){const S=Ha(f),x=f;S&&(x.credential=S,x.tenantId=w.tenantId||void 0,x.email=w.email||void 0,x.phoneNumber=w.phoneNumber||void 0)}}(v,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:zc(m),additionalUserInfo:$i(m),user:go.getOrCreate(S)}})}function gp(v,f){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(v,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>Wr(v,m.confirm(w))}})).apply(this,arguments)}class km{constructor(f,m){this.resolver=m,this.auth=function Xo(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Wr(pp(this.auth),this.resolver.resolveSignIn(f))}}class go{constructor(f){this._delegate=f,this.multiFactor=function Qt(v){const f=(0,P.m9)(v);return be.has(f)||be.set(f,Iu._fromUser(f)),be.get(f)}(f)}static getOrCreate(f){return go.USER_MAP.has(f)||go.USER_MAP.set(f,new go(f)),go.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return Wr(m.auth,Gd(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,d.Z)(function*(){return gp(w.auth,function Xf(v,f,m){return fn.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return Wr(m.auth,function vm(v,f,m){return Su.apply(this,arguments)}(m._delegate,f,Is))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield fh(zn(m.auth)),Yn(m._delegate,f,Is)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return Wr(m.auth,bn(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return gp(this.auth,function $o(v,f,m){return Dt.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Wr(this.auth,function Nc(v,f,m){return Go.apply(this,arguments)}(this._delegate,f,Is))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield fh(zn(m.auth)),ho(m._delegate,f,Is)})()}sendEmailVerification(f){return function pc(v,f){return _u.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function hm(v,f){return fs.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function wn(v,f){return ul((0,P.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Kd(v,f){return ul((0,P.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Sc(v,f){return Fa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Bf(v,f){return wu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function gc(v,f,m){return Aa.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}go.USER_MAP=new WeakMap;const Al=re;let mp=(()=>{class v{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;Al(S,"invalid-api-key",{appName:m.name}),Al(S,"invalid-api-key",{appName:m.name});const x=typeof window<"u"?Is:void 0;this._delegate=w.initialize({options:{persistence:yp(S,m.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Xu(v,f,m){const w=zn(v);re(w._canInitEmulator,w,"emulator-config-failed"),re(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const S=!!m?.disableWarnings,x=eo(f),{host:U,port:J}=function Ld(v){const f=eo(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const x=S[1];return{host:x,port:ec(w.substr(x.length+1))}}{const[x,U]=w.split(":");return{host:x,port:ec(U)}}}(f);w.config.emulator={url:`${x}//${U}${null===J?"":`:${J}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:U,port:J,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Pf(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,w)}applyActionCode(m){return function Ta(v,f){return Di.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return zd(this._delegate,m)}confirmPasswordReset(m,w){return function lc(v,f,m){return gu.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var S=this;return(0,d.Z)(function*(){return Wr(S._delegate,function vu(v,f,m){return ol.apply(this,arguments)}(S._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Wd(v,f){return fc.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Uf(v,f){const m=Ei.parseLink(f);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){Al(Es(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Ba(v,f){return Ls.apply(this,arguments)}(m._delegate,Is);return w?Wr(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function h_(v,f){zn(v)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,S){const{next:x,error:U,complete:J}=gh(m,w,S);return this._delegate.onAuthStateChanged(x,U,J)}onIdTokenChanged(m,w,S){const{next:x,error:U,complete:J}=gh(m,w,S);return this._delegate.onIdTokenChanged(x,U,J)}sendSignInLinkToEmail(m,w){return function cc(v,f,m){return dc.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Vf(v,f,m){return pu.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let S;switch(function Sl(v,f){Tl(Object.values(Vr).includes(f),v,"invalid-persistence-type"),(0,P.b$)()?Tl(f!==Vr.SESSION,v,"unsupported-persistence-type"):(0,P.UG)()?Tl(f===Vr.NONE,v,"unsupported-persistence-type"):Hc()?Tl(f===Vr.NONE||f===Vr.LOCAL&&(0,P.hl)(),v,"unsupported-persistence-type"):Tl(f===Vr.NONE||$c(),v,"unsupported-persistence-type")}(w._delegate,m),m){case Vr.SESSION:S=uo;break;case Vr.LOCAL:S=(yield Hn(hn)._isAvailable())?hn:Rs;break;case Vr.NONE:S=Li;break;default:return _e("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Wr(this._delegate,function dm(v){return Bd.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Wr(this._delegate,oc(this._delegate,m))}signInWithCustomToken(m){return Wr(this._delegate,function Oo(v,f){return Ns.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Wr(this._delegate,function pm(v,f,m){return oc((0,P.m9)(v),No.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Wr(this._delegate,function Rr(v,f,m){return qd.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return gp(this._delegate,function rs(v,f,m){return lo.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return Al(Es(),w._delegate,"operation-not-supported-in-this-environment"),Wr(w._delegate,function La(v,f,m){return br.apply(this,arguments)}(w._delegate,m,Is))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return Al(Es(),w._delegate,"operation-not-supported-in-this-environment"),yield fh(w._delegate),Va(w._delegate,m,Is)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function yu(v,f){return Sa.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Vr,v})();function gh(v,f,m){let w=v;"function"!=typeof v&&({next:w,error:f,complete:m}=v);const S=w;return{next:U=>S(U&&go.getOrCreate(U)),error:f,complete:m}}function yp(v,f){const m=function Om(v,f){const m=ph();if(!m)return[];const w=B(hh,v,f);switch(m.getItem(w)){case Vr.NONE:return[Li];case Vr.LOCAL:return[hn,uo];case Vr.SESSION:return[uo];default:return[]}}(v,f);if(typeof self<"u"&&!m.includes(hn)&&m.push(hn),typeof window<"u")for(const w of[Rs,uo])m.includes(w)||m.push(w);return m.includes(Li)||m.push(Li),m}class vp{constructor(){this.providerId="phone",this._delegate=new Ps(pp(K.Z.auth()))}static credential(f,m){return Ps.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}vp.PHONE_SIGN_IN_METHOD=Ps.PHONE_SIGN_IN_METHOD,vp.PROVIDER_ID=Ps.PROVIDER_ID;const Fm=re;class SE{constructor(f,m,w=K.Z.app()){var S;Fm(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ka(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _p(v){v.INTERNAL.registerComponent(new ye.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new mp(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:No,FacebookAuthProvider:ni,GithubAuthProvider:rl,GoogleAuthProvider:xr,OAuthProvider:so,SAMLAuthProvider:Ca,PhoneAuthProvider:vp,PhoneMultiFactorGenerator:Fc,RecaptchaVerifier:SE,TwitterAuthProvider:nc,Auth:mp,AuthCredential:to,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},5861:(wt,Ae,F)=>{function d(P,ie,se,ne,ye,De,pe){try{var z=P[De](pe),j=z.value}catch(W){return void se(W)}z.done?ie(j):Promise.resolve(j).then(ne,ye)}function K(P){return function(){var ie=this,se=arguments;return new Promise(function(ne,ye){var De=P.apply(ie,se);function pe(j){d(De,ne,ye,pe,z,"next",j)}function z(j){d(De,ne,ye,pe,z,"throw",j)}pe(void 0)})}}F.d(Ae,{Z:()=>K})}},wt=>{wt(wt.s=193)}]);